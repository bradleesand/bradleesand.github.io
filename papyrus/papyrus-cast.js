/*! jQuery v1.10.2 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/

/**
 * @license
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash exports="amd" --output build/lodash.build.js`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

/*
* EaselJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011 gskinner.com, inc.
* 
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/

//     (c) 2010-2013 Jeremy Ashkenas, DocumentCloud Inc.
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/**
 * Backbone-relational.js 0.8.5 (c) 2011-2013 Paul Uithol and contributors
 * (https://github.com/PaulUithol/Backbone-relational/graphs/contributors)
 * 
 * Backbone-relational may be freely distributed under the MIT license; see the
 * accompanying LICENSE.txt. For details and documentation:
 * https://github.com/PaulUithol/Backbone-relational. Depends on Backbone (and
 * thus on Underscore as well): https://github.com/documentcloud/backbone.
 */

(function(e,t){function H(e){var t=e.length,n=w.type(e);return w.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function j(e){var t=B[e]={};return w.each(e.match(S)||[],function(e,n){t[n]=!0}),t}function q(e,n,r,i){if(w.acceptData(e)){var s,o,u=w.expando,a=e.nodeType,f=a?w.cache:e,l=a?e[u]:e[u]&&u;if(l&&f[l]&&(i||f[l].data)||r!==t||"string"!=typeof n)return l||(l=a?e[u]=c.pop()||w.guid++:u),f[l]||(f[l]=a?{}:{toJSON:w.noop}),("object"==typeof n||"function"==typeof n)&&(i?f[l]=w.extend(f[l],n):f[l].data=w.extend(f[l].data,n)),o=f[l],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[w.camelCase(n)]=r),"string"==typeof n?(s=o[n],null==s&&(s=o[w.camelCase(n)])):s=o,s}}function R(e,t,n){if(w.acceptData(e)){var r,i,s=e.nodeType,o=s?w.cache:e,u=s?e[w.expando]:w.expando;if(o[u]){if(t&&(r=n?o[u]:o[u].data)){w.isArray(t)?t=t.concat(w.map(t,w.camelCase)):t in r?t=[t]:(t=w.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!z(r):!w.isEmptyObject(r))return}(n||(delete o[u].data,z(o[u])))&&(s?w.cleanData([e],!0):w.support.deleteExpando||o!=o.window?delete o[u]:o[u]=null)}}}function U(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(I,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:F.test(r)?w.parseJSON(r):r}catch(s){}w.data(e,n,r)}else r=t}return r}function z(e){var t;for(t in e)if(("data"!==t||!w.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function it(){return!0}function st(){return!1}function ot(){try{return o.activeElement}catch(e){}}function ct(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function ht(e,t,n){if(w.isFunction(t))return w.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return w.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ut.test(t))return w.filter(t,e,n);t=w.filter(t,e)}return w.grep(e,function(e){return w.inArray(e,t)>=0!==n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return w.nodeName(e,"table")&&w.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function _t(e){return e.type=(null!==w.find.attr(e,"type"))+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)w._data(n,"globalEval",!t||w._data(t[r],"globalEval"))}function Ht(e,t){if(1===t.nodeType&&w.hasData(e)){var n,r,i,s=w._data(e),o=w._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;i>r;r++)w.event.add(t,n,u[n][r])}o.data&&(o.data=w.extend({},o.data))}}function Bt(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!w.support.noCloneEvent&&t[w.expando]){i=w._data(t);for(r in i.events)w.removeEvent(t,r,i.handle);t.removeAttribute(w.expando)}"script"===n&&t.text!==e.text?(_t(t).text=e.text,Dt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),w.support.html5Clone&&e.innerHTML&&!w.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&xt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;null!=(s=r[o]);o++)!n||w.nodeName(s,n)?u.push(s):w.merge(u,jt(s,n));return n===t||n&&w.nodeName(e,n)?w.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===w.css(e,"display")||!w.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;u>o;o++)r=e[o],r.style&&(s[o]=w._data(r,"olddisplay"),n=r.style.display,t?(s[o]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(s[o]=w._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&"none"!==n||!i)&&w._data(r,"olddisplay",i?n:w.css(r,"display"))));for(o=0;u>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?s[o]||"":"none"));return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:"width"===t?1:0,o=0;for(;4>s;s+=2)"margin"===n&&(o+=w.css(e,n+Zt[s],!0,i)),r?("content"===n&&(o-=w.css(e,"padding"+Zt[s],!0,i)),"margin"!==n&&(o-=w.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=w.css(e,"padding"+Zt[s],!0,i),"padding"!==n&&(o+=w.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,s=qt(e),o=w.support.boxSizing&&"border-box"===w.css(e,"boxSizing",!1,s);if(0>=i||null==i){if(i=Rt(e,t,s),(0>i||null==i)&&(i=e.style[t]),Jt.test(i))return i;r=o&&(w.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=o,n=Qt[e];return n||(n=fn(e,t),"none"!==n&&n||(It=(It||w("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach()),Qt[e]=n),n}function fn(e,t){var n=w(t.createElement(e)).appendTo(t.body),r=w.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(w.isArray(t))w.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==w.type(t))r(e,t);else for(i in t)vn(e+"["+i+"]",t[i],n,r)}function _n(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(S)||[];if(w.isFunction(n))while(r=s[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,n,r,i){function u(a){var f;return s[a]=!0,w.each(e[a]||[],function(e,a){var l=a(n,r,i);return"string"!=typeof l||o||s[l]?o?!(f=l):t:(n.dataTypes.unshift(l),u(l),!1)}),f}var s={},o=e===An;return u(n.dataTypes[0])||!s["*"]&&u("*")}function Pn(e,n){var r,i,s=w.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&w.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes;while("*"===f[0])f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}return o?(o!==f[0]&&f.unshift(o),r[o]):t}function Bn(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=w.now()}function Zn(e,t,n){var r,i=(Gn[t]||[]).concat(Gn["*"]),s=0,o=i.length;for(;o>s;s++)if(r=i[s].call(n,t,e))return r}function er(e,t,n){var r,i,s=0,o=Qn.length,u=w.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;a>o;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),1>s&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;for(tr(l,f.opts.specialEasing);o>s;s++)if(r=Qn[s].call(f,e,l,f.opts))return r;return w.map(l,Zn,f),w.isFunction(f.opts.start)&&f.opts.start.call(e,f),w.fx.timer(w.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(n in e)if(r=w.camelCase(n),i=t[r],s=e[n],w.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=w.cssHooks[r],o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}function nr(e,t,n){var r,i,s,o,u,a,f=this,l={},c=e.style,h=e.nodeType&&nn(e),p=w._data(e,"fxshow");n.queue||(u=w._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,f.always(function(){f.always(function(){u.unqueued--,w.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[c.overflow,c.overflowX,c.overflowY],"inline"===w.css(e,"display")&&"none"===w.css(e,"float")&&(w.support.inlineBlockNeedsLayout&&"inline"!==an(e.nodeName)?c.zoom=1:c.display="inline-block")),n.overflow&&(c.overflow="hidden",w.support.shrinkWrapBlocks||f.always(function(){c.overflow=n.overflow[0],c.overflowX=n.overflow[1],c.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],$n.exec(i)){if(delete t[r],s=s||"toggle"===i,i===(h?"hide":"show"))continue;l[r]=p&&p[r]||w.style(e,r)}if(!w.isEmptyObject(l)){p?"hidden"in p&&(h=p.hidden):p=w._data(e,"fxshow",{}),s&&(p.hidden=!h),h?w(e).show():f.done(function(){w(e).hide()}),f.done(function(){var t;w._removeData(e,"fxshow");for(t in l)w.style(e,t,l[t])});for(r in l)o=Zn(h?p[r]:0,r,f),r in p||(p[r]=o.start,h&&(o.end=o.start,o.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return w.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.location,o=e.document,u=o.documentElement,a=e.jQuery,f=e.$,l={},c=[],h="1.10.2",p=c.concat,d=c.push,v=c.slice,m=c.indexOf,g=l.toString,y=l.hasOwnProperty,b=h.trim,w=function(e,t){return new w.fn.init(e,t,r)},E=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,S=/\S+/g,x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,N=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,C=/^[\],:{}\s]*$/,k=/(?:^|:|,)(?:\s*\[)+/g,L=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,O=/^-ms-/,M=/-([\da-z])/gi,_=function(e,t){return t.toUpperCase()},D=function(e){(o.addEventListener||"load"===e.type||"complete"===o.readyState)&&(P(),w.ready())},P=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",D,!1),e.removeEventListener("load",D,!1)):(o.detachEvent("onreadystatechange",D),e.detachEvent("onload",D))};w.fn=w.prototype={jquery:h,constructor:w,init:function(e,n,r){var i,s;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:T.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof w?n[0]:n,w.merge(this,w.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),N.test(i[1])&&w.isPlainObject(n))for(i in n)w.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(s=o.getElementById(i[2]),s&&s.parentNode){if(s.id!==i[2])return r.find(e);this.length=1,this[0]=s}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):w.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),w.makeArray(e,this))},selector:"",length:0,toArray:function(){return v.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return w.each(this,e,t)},ready:function(e){return w.ready.promise().done(e),this},slice:function(){return this.pushStack(v.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},w.fn.init.prototype=w.fn,w.extend=w.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[1]||{},a=2),"object"==typeof u||w.isFunction(u)||(u={}),f===a&&(u=this,--a);f>a;a++)if(null!=(s=arguments[a]))for(i in s)e=u[i],r=s[i],u!==r&&(l&&r&&(w.isPlainObject(r)||(n=w.isArray(r)))?(n?(n=!1,o=e&&w.isArray(e)?e:[]):o=e&&w.isPlainObject(e)?e:{},u[i]=w.extend(l,o,r)):r!==t&&(u[i]=r));return u},w.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===w&&(e.$=f),t&&e.jQuery===w&&(e.jQuery=a),w},isReady:!1,readyWait:1,holdReady:function(e){e?w.readyWait++:w.ready(!0)},ready:function(e){if(e===!0?!--w.readyWait:!w.isReady){if(!o.body)return setTimeout(w.ready);w.isReady=!0,e!==!0&&--w.readyWait>0||(n.resolveWith(o,[w]),w.fn.trigger&&w(o).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===w.type(e)},isArray:Array.isArray||function(e){return"array"===w.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[g.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||"object"!==w.type(e)||e.nodeType||w.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(w.support.ownLast)for(n in e)return y.call(e,n);for(n in e);return n===t||y.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=N.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=w.buildFragment([e],t,i),i&&w(i).remove(),w.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=w.trim(n),n&&C.test(n.replace(L,"@").replace(A,"]").replace(k,"")))?Function("return "+n)():(w.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&w.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(O,"ms-").replace(M,_)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=H(e);if(n){if(o){for(;s>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(o){for(;s>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:b&&!b.call("﻿ ")?function(e){return null==e?"":b.call(e)}:function(e){return null==e?"":(e+"").replace(x,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(H(Object(e))?w.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(m)return m.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if("number"==typeof r)for(;r>s;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;for(n=!!n;o>s;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=H(e),u=[];if(o)for(;s>i;i++)r=t(e[i],i,n),null!=r&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(u[u.length]=r);return p.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return"string"==typeof n&&(s=e[n],n=e,e=s),w.isFunction(e)?(r=v.call(arguments,2),i=function(){return e.apply(n||this,r.concat(v.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===w.type(r)){s=!0;for(a in r)w.access(e,n,a,r[a],!0,o,u)}else if(i!==t&&(s=!0,w.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(w(e),n)})),n))for(;f>a;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)));return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),w.ready.promise=function(t){if(!n)if(n=w.Deferred(),"complete"===o.readyState)setTimeout(w.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",D,!1),e.addEventListener("load",D,!1);else{o.attachEvent("onreadystatechange",D),e.attachEvent("onload",D);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function s(){if(!w.isReady){try{r.doScroll("left")}catch(e){return setTimeout(s,50)}P(),w.ready()}}()}return n.promise(t)},w.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()}),r=w(o),function(e,t){function ot(e,t,n,i){var s,o,u,a,f,l,p,m,g,w;if((t?t.ownerDocument||t:E)!==h&&c(t),t=t||h,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(d&&!i){if(s=Z.exec(e))if(u=s[1]){if(9===a){if(o=t.getElementById(u),!o||!o.parentNode)return n;if(o.id===u)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&y(t,o)&&o.id===u)return n.push(o),n}else{if(s[2])return H.apply(n,t.getElementsByTagName(e)),n;if((u=s[3])&&r.getElementsByClassName&&t.getElementsByClassName)return H.apply(n,t.getElementsByClassName(u)),n}if(r.qsa&&(!v||!v.test(e))){if(m=p=b,g=t,w=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){l=mt(e),(p=t.getAttribute("id"))?m=p.replace(nt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",f=l.length;while(f--)l[f]=m+gt(l[f]);g=$.test(e)&&t.parentNode||t,w=l.join(",")}if(w)try{return H.apply(n,g.querySelectorAll(w)),n}catch(S){}finally{p||t.removeAttribute("id")}}}return Nt(e.replace(W,"$1"),t,n,i)}function ut(){function t(n,r){return e.push(n+=" ")>s.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function at(e){return e[b]=!0,e}function ft(e){var t=h.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),r=e.length;while(r--)s.attrHandle[n[r]]=t}function ct(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||O)-(~e.sourceIndex||O);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(){}function mt(e,t){var n,r,i,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=s.preFilter;while(u){(!n||(r=X.exec(u)))&&(r&&(u=u.slice(r[0].length)||u),a.push(i=[])),n=!1,(r=V.exec(u))&&(n=r.shift(),i.push({value:n,type:r[0].replace(W," ")}),u=u.slice(n.length));for(o in s.filter)!(r=G[o].exec(u))||f[o]&&!(r=f[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)}function gt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,s=n&&"parentNode"===r,o=x++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||s)return e(t,n,i)}:function(t,n,u){var a,f,l,c=S+" "+o;if(u){while(t=t[r])if((1===t.nodeType||s)&&e(t,n,u))return!0}else while(t=t[r])if(1===t.nodeType||s)if(l=t[b]||(t[b]={}),(f=l[r])&&f[0]===c){if((a=f[1])===!0||a===i)return a===!0}else if(f=l[r]=[c],f[1]=e(t,n,u)||i,f[1]===!0)return!0}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=null!=t;for(;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function Et(e,t,n,r,i,s){return r&&!r[b]&&(r=Et(r)),i&&!i[b]&&(i=Et(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||Tt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:wt(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?j.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):H.apply(o,g)})}function St(e){var t,n,r,i=e.length,o=s.relative[e[0].type],u=o||s.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return j.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;i>a;a++)if(n=s.relative[e[a].type])h=[yt(bt(h),n)];else{if(n=s.filter[e[a].type].apply(null,e[a].matches),n[b]){for(r=++a;i>r;r++)if(s.relative[e[r].type])break;return Et(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(W,"$1"),n,r>a&&St(e.slice(a,r)),i>r&&St(e=e.slice(r)),i>r&&gt(e))}h.push(n)}return bt(h)}function xt(e,t){var n=0,r=t.length>0,o=e.length>0,u=function(u,a,l,c,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=null!=p,x=f,T=u||o&&s.find.TAG("*",p&&a.parentNode||a),N=S+=null==x?1:Math.random()||.1;for(E&&(f=a!==h&&a,i=n);null!=(d=T[b]);b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){c.push(d);break}E&&(S=N,i=++n)}r&&((d=!m&&d)&&y--,u&&w.push(d))}if(y+=b,r&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)w[b]||g[b]||(g[b]=D.call(c));g=wt(g)}H.apply(c,g),E&&!u&&g.length>0&&y+t.length>1&&ot.uniqueSort(c)}return E&&(S=N,f=x),w};return r?at(u):u}function Tt(e,t,n){var r=0,i=t.length;for(;i>r;r++)ot(e,t[r],n);return n}function Nt(e,t,n,i){var o,u,f,l,c,h=mt(e);if(!i&&1===h.length){if(u=h[0]=h[0].slice(0),u.length>2&&"ID"===(f=u[0]).type&&r.getById&&9===t.nodeType&&d&&s.relative[u[1].type]){if(t=(s.find.ID(f.matches[0].replace(rt,it),t)||[])[0],!t)return n;e=e.slice(u.shift().value.length)}o=G.needsContext.test(e)?0:u.length;while(o--){if(f=u[o],s.relative[l=f.type])break;if((c=s.find[l])&&(i=c(f.matches[0].replace(rt,it),$.test(u[0].type)&&t.parentNode||t))){if(u.splice(o,1),e=i.length&&gt(u),!e)return H.apply(n,i),n;break}}}return a(e,h)(i,t,!d,n,$.test(e)),n}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b="sizzle"+ -(new Date),E=e.document,S=0,x=0,T=ut(),N=ut(),C=ut(),k=!1,L=function(e,t){return e===t?(k=!0,0):0},A=typeof t,O=1<<31,M={}.hasOwnProperty,_=[],D=_.pop,P=_.push,H=_.push,B=_.slice,j=_.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",R=q.replace("w","w#"),U="\\["+I+"*("+q+")"+I+"*(?:([*^$|!~]?=)"+I+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+R+")|)|)"+I+"*\\]",z=":("+q+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+U.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),X=RegExp("^"+I+"*,"+I+"*"),V=RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),$=RegExp(I+"*[+~]"),J=RegExp("="+I+"*([^\\]'\"]*)"+I+"*\\]","g"),K=RegExp(z),Q=RegExp("^"+R+"$"),G={ID:RegExp("^#("+q+")"),CLASS:RegExp("^\\.("+q+")"),TAG:RegExp("^("+q.replace("w","w*")+")"),ATTR:RegExp("^"+U),PSEUDO:RegExp("^"+z),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:RegExp("^(?:"+F+")$","i"),needsContext:RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/'|\\/g,rt=RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),it=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{H.apply(_=B.call(E.childNodes),E.childNodes),_[E.childNodes.length].nodeType}catch(st){H={apply:_.length?function(e,t){P.apply(e,B.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}u=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},r=ot.support={},c=ot.setDocument=function(e){var n=e?e.ownerDocument||e:E,i=n.defaultView;return n!==h&&9===n.nodeType&&n.documentElement?(h=n,p=n.documentElement,d=!u(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){c()}),r.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=ft(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ft(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),r.getById=ft(function(e){return p.appendChild(e).id=b,!n.getElementsByName||!n.getElementsByName(b).length}),r.getById?(s.find.ID=function(e,t){if(typeof t.getElementById!==A&&d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete s.find.ID,s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),s.find.TAG=r.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},s.find.CLASS=r.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==A&&d?n.getElementsByClassName(e):t},m=[],v=[],(r.qsa=Y.test(n.querySelectorAll))&&(ft(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||v.push("\\["+I+"*(?:value|"+F+")"),e.querySelectorAll(":checked").length||v.push(":checked")}),ft(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&v.push("[*^$]="+I+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(r.matchesSelector=Y.test(g=p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ft(function(e){r.disconnectedMatch=g.call(e,"div"),g.call(e,"[s!='']:x"),m.push("!=",z)}),v=v.length&&RegExp(v.join("|")),m=m.length&&RegExp(m.join("|")),y=Y.test(p.contains)||p.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},L=p.compareDocumentPosition?function(e,t){if(e===t)return k=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===n||y(E,e)?-1:t===n||y(E,t)?1:l?j.call(l,e)-j.call(l,t):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],a=[t];if(e===t)return k=!0,0;if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:l?j.call(l,e)-j.call(l,t):0;if(s===o)return ct(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)a.unshift(r);while(u[i]===a[i])i++;return i?ct(u[i],a[i]):u[i]===E?-1:a[i]===E?1:0},n):h},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&c(e),t=t.replace(J,"='$1']"),!(!r.matchesSelector||!d||m&&m.test(t)||v&&v.test(t)))try{var n=g.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return ot(t,h,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==h&&c(e),y(e,t)},ot.attr=function(e,n){(e.ownerDocument||e)!==h&&c(e);var i=s.attrHandle[n.toLowerCase()],o=i&&M.call(s.attrHandle,n.toLowerCase())?i(e,n,!d):t;return o===t?r.attributes||!d?e.getAttribute(n):(o=e.getAttributeNode(n))&&o.specified?o.value:null:o},ot.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,n=[],i=0,s=0;if(k=!r.detectDuplicates,l=!r.sortStable&&e.slice(0),e.sort(L),k){while(t=e[s++])t===e[s]&&(i=n.push(s));while(i--)e.splice(n[i],1)}return e},o=ot.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},s=ot.selectors={cacheLength:50,createPseudo:at,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return G.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&K.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[b]||(m[b]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[b]||(t[b]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[b]||(c[b]={}))[e]=[S,h]),c===t))break;return h-=i,h===r||0===h%r&&h/r>=0}}},PSEUDO:function(e,t){var n,r=s.pseudos[e]||s.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],s.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=j.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:at(function(e){var t=[],n=[],r=a(e.replace(W,"$1"));return r[b]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:at(function(e){return Q.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=d?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!s.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[0>n?n+t:n]}),even:dt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:dt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}},s.pseudos.nth=s.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[n]=ht(n);for(n in{submit:!0,reset:!0})s.pseudos[n]=pt(n);vt.prototype=s.filters=s.pseudos,s.setFilters=new vt,a=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=mt(e)),n=t.length;while(n--)s=St(t[n]),s[b]?r.push(s):i.push(s);s=C(e,xt(i,r))}return s},r.sortStable=b.split("").sort(L).join("")===b,r.detectDuplicates=k,c(),r.sortDetached=ft(function(e){return 1&e.compareDocumentPosition(h.createElement("div"))}),ft(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||lt("type|href|height|width",function(e,n,r){return r?t:e.getAttribute(n,"type"===n.toLowerCase()?1:2)}),r.attributes&&ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||lt("value",function(e,n,r){return r||"input"!==e.nodeName.toLowerCase()?t:e.defaultValue}),ft(function(e){return null==e.getAttribute("disabled")})||lt(F,function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.specified?i.value:e[n]===!0?n.toLowerCase():null}),w.find=ot,w.expr=ot.selectors,w.expr[":"]=w.expr.pseudos,w.unique=ot.uniqueSort,w.text=ot.getText,w.isXMLDoc=ot.isXML,w.contains=ot.contains}(e);var B={};w.Callbacks=function(e){e="string"==typeof e?B[e]||j(e):w.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){for(r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;a&&s>o;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){w.each(t,function(t,n){var r=w.type(n);"function"===r?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&w.each(arguments,function(e,t){var r;while((r=w.inArray(t,a,r))>-1)a.splice(r,1),n&&(s>=r&&s--,o>=r&&o--)}),this},has:function(e){return e?w.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],s=0,this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return!a||i&&!f||(t=t||[],t=[e,t.slice?t.slice():t],n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},w.extend({Deferred:function(e){var t=[["resolve","done",w.Callbacks("once memory"),"resolved"],["reject","fail",w.Callbacks("once memory"),"rejected"],["notify","progress",w.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return w.Deferred(function(n){w.each(t,function(t,s){var o=s[0],u=w.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&w.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?w.extend(e,r):r}},i={};return r.pipe=r.then,w.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=v.call(arguments),r=n.length,i=1!==r||e&&w.isFunction(e.promise)?r:0,s=1===i?e:w.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?v.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1)for(u=Array(r),a=Array(r),f=Array(r);r>t;t++)n[t]&&w.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i;return i||s.resolveWith(f,n),s.promise()}}),w.support=function(t){var n,r,s,u,a,f,l,c,h,p=o.createElement("div");if(p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*")||[],r=p.getElementsByTagName("a")[0],!r||!r.style||!n.length)return t;u=o.createElement("select"),f=u.appendChild(o.createElement("option")),s=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==p.className,t.leadingWhitespace=3===p.firstChild.nodeType,t.tbody=!p.getElementsByTagName("tbody").length,t.htmlSerialize=!!p.getElementsByTagName("link").length,t.style=/top/.test(r.getAttribute("style")),t.hrefNormalized="/a"===r.getAttribute("href"),t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!s.value,t.optSelected=f.selected,t.enctype=!!o.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}s=o.createElement("input"),s.setAttribute("value",""),t.input=""===s.getAttribute("value"),s.value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","t"),s.setAttribute("name","t"),a=o.createDocumentFragment(),a.appendChild(s),t.appendChecked=s.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===p.style.backgroundClip;for(h in w(t))break;return t.ownLast="0"!==h,w(function(){var n,r,s,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=o.getElementsByTagName("body")[0];a&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=p.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&0===s[0].offsetHeight,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",w.swap(a,null!=a.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===p.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(p,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(p,null)||{width:"4px"}).width,r=p.appendChild(o.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===p.offsetWidth,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==p.offsetWidth,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=s=r=null)}),n=u=a=f=r=s=null,t}({});var F=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,I=/([A-Z])/g;w.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?w.cache[e[w.expando]]:e[w.expando],!!e&&!z(e)},data:function(e,t,n){return q(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return q(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&w.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),w.fn.extend({data:function(e,n){var r,i,s=null,o=0,u=this[0];if(e===t){if(this.length&&(s=w.data(u),1===u.nodeType&&!w._data(u,"parsedAttrs"))){for(r=u.attributes;r.length>o;o++)i=r[o].name,0===i.indexOf("data-")&&(i=w.camelCase(i.slice(5)),U(u,i,s[i]));w._data(u,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){w.data(this,e)}):arguments.length>1?this.each(function(){w.data(this,e,n)}):u?U(u,e,w.data(u,e)):null},removeData:function(e){return this.each(function(){w.removeData(this,e)})}}),w.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=w._data(e,n),r&&(!i||w.isArray(r)?i=w._data(e,n,w.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),s=w._queueHooks(e,t),o=function(){w.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return w._data(e,n)||w._data(e,n,{empty:w.Callbacks("once memory").add(function(){w._removeData(e,t+"queue"),w._removeData(e,n)})})}}),w.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?w.queue(this[0],e):n===t?this:this.each(function(){var t=w.queue(this,e,n);w._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},delay:function(e,t){return e=w.fx?w.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=w.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(u--)r=w._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var W,X,V=/[\t\r\n\f]/g,$=/\r/g,J=/^(?:input|select|textarea|button|object)$/i,K=/^(?:a|area)$/i,Q=/^(?:checked|selected)$/i,G=w.support.getSetAttribute,Y=w.support.input;w.fn.extend({attr:function(e,t){return w.access(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})},prop:function(e,t){return w.access(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return e=w.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a="string"==typeof e&&e;if(w.isFunction(e))return this.each(function(t){w(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(S)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(V," "):" ")){s=0;while(i=t[s++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=w.trim(r)}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=0===arguments.length||"string"==typeof e&&e;if(w.isFunction(e))return this.each(function(t){w(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(S)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(V," "):"")){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?w.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):w.isFunction(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var t,r=0,s=w(this),o=e.match(S)||[];while(t=o[r++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else(n===i||"boolean"===n)&&(this.className&&w._data(this,"__className__",this.className),this.className=this.className||e===!1?"":w._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(V," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(arguments.length)return i=w.isFunction(e),this.each(function(n){var s;1===this.nodeType&&(s=i?e.call(this,n,w(this).val()):e,null==s?s="":"number"==typeof s?s+="":w.isArray(s)&&(s=w.map(s,function(e){return null==e?"":e+""})),r=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,s,"value")!==t||(this.value=s))});if(s)return r=w.valHooks[s.type]||w.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,"string"==typeof n?n.replace($,""):null==n?"":n)}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s="select-one"===e.type||0>i,o=s?null:[],u=s?i+1:r.length,a=0>i?u:s?i:0;for(;u>a;a++)if(n=r[a],!(!n.selected&&a!==i||(w.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&w.nodeName(n.parentNode,"optgroup"))){if(t=w(n).val(),s)return t;o.push(t)}return o},set:function(e,t){var n,r,i=e.options,s=w.makeArray(t),o=i.length;while(o--)r=i[o],(r.selected=w.inArray(w(r).val(),s)>=0)&&(n=!0);return n||(e.selectedIndex=-1),s}}},attr:function(e,n,r){var s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?w.prop(e,n,r):(1===u&&w.isXMLDoc(e)||(n=n.toLowerCase(),s=w.attrHooks[n]||(w.expr.match.bool.test(n)?X:W)),r===t?s&&"get"in s&&null!==(o=s.get(e,n))?o:(o=w.find.attr(e,n),null==o?t:o):null!==r?s&&"set"in s&&(o=s.set(e,r,n))!==t?o:(e.setAttribute(n,r+""),r):(w.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(S);if(s&&1===e.nodeType)while(n=s[i++])r=w.propFix[n]||n,w.expr.match.bool.test(n)?Y&&G||!Q.test(n)?e[r]=!1:e[w.camelCase("default-"+n)]=e[r]=!1:w.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!w.support.radioValue&&"radio"===t&&w.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!w.isXMLDoc(e),o&&(n=w.propFix[n]||n,s=w.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&null!==(i=s.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):J.test(e.nodeName)||K.test(e.nodeName)&&e.href?0:-1}}}}),X={set:function(e,t,n){return t===!1?w.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&w.propFix[n]||n,n):e[w.camelCase("default-"+n)]=e[n]=!0,n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,n){var r=w.expr.attrHandle[n]||w.find.attr;w.expr.attrHandle[n]=Y&&G||!Q.test(n)?function(e,n,i){var s=w.expr.attrHandle[n],o=i?t:(w.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return w.expr.attrHandle[n]=s,o}:function(e,n,r){return r?t:e[w.camelCase("default-"+n)]?n.toLowerCase():null}}),Y&&G||(w.attrHooks.value={set:function(e,n,r){return w.nodeName(e,"input")?(e.defaultValue=n,t):W&&W.set(e,n,r)}}),G||(W={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},w.expr.attrHandle.id=w.expr.attrHandle.name=w.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&""!==i.value?i.value:null},w.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:W.set},w.attrHooks.contenteditable={set:function(e,t,n){W.set(e,""===t?!1:t,n)}},w.each(["width","height"],function(e,n){w.attrHooks[n]={set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}}})),w.support.hrefNormalized||w.each(["href","src"],function(e,t){w.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),w.support.style||(w.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),w.support.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.support.enctype||(w.propFix.enctype="encoding"),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,n){return w.isArray(n)?e.checked=w.inArray(w(e).val(),n)>=0:t}},w.support.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;w.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=w._data(e);if(y){r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=w.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof w===i||e&&w.event.triggered===e.type?t:w.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(S)||[""],f=n.length;while(f--)u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort(),v&&(c=w.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=w.event.special[v]||{},p=w.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&w.expr.match.needsContext.test(o),namespace:m.join(".")},l),(d=a[v])||(d=a[v]=[],d.delegateCount=0,c.setup&&c.setup.call(e,s,m,h)!==!1||(e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h))),c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),w.event.global[v]=!0);e=null}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=w.hasData(e)&&w._data(e);if(m&&(l=m.events)){t=(t||"").match(S)||[""],f=t.length;while(f--)if(u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort(),p){c=w.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],!i&&v!==o.origType||n&&n.guid!==o.guid||u&&!u.test(o.namespace)||r&&r!==o.selector&&("**"!==r||!o.selector)||(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&(c.teardown&&c.teardown.call(e,d,m.handle)!==!1||w.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)w.event.remove(e,p+t[f],n,r,!0);w.isEmptyObject(l)&&(delete m.handle,w._removeData(e,"events"))}},trigger:function(n,r,i,s){var u,a,f,l,c,h,p,d=[i||o],v=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];if(f=h=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(v+w.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=0>v.indexOf(":")&&"on"+v,n=n[w.expando]?n:new w.Event(v,"object"==typeof n&&n),n.isTrigger=s?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:w.makeArray(r,[n]),c=w.event.special[v]||{},s||!c.trigger||c.trigger.apply(i,r)!==!1)){if(!s&&!c.noBubble&&!w.isWindow(i)){for(l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||o)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(w._data(f,"events")||{})[n.type]&&w._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&w.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();if(n.type=v,!s&&!n.isDefaultPrevented()&&(!c._default||c._default.apply(d.pop(),r)===!1)&&w.acceptData(i)&&a&&i[v]&&!w.isWindow(i)){h=i[a],h&&(i[a]=null),w.event.triggered=v;try{i[v]()}catch(g){}w.event.triggered=t,h&&(i[a]=h)}return n.result}},dispatch:function(e){e=w.event.fix(e);var n,r,i,s,o,u=[],a=v.call(arguments),f=(w._data(this,"events")||{})[e.type]||[],l=w.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=w.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((w.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!=this;f=f.parentNode||this)if(1===f.nodeType&&(f.disabled!==!0||"click"!==e.type)){for(s=[],o=0;a>o;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?w(r,this).index(f)>=0:w.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return n.length>a&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[w.expando])return e;var t,n,r,i=e.type,s=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new w.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,u=n.button,a=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,s=i.documentElement,r=i.body,e.pageX=n.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),e.which||u===t||(e.which=1&u?1:2&u?3:4&u?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ot()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===ot()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return w.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t},_default:function(e){return w.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=w.extend(new w.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?w.event.trigger(i,null,t):w.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},w.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},w.Event=function(e,n){return this instanceof w.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,n&&w.extend(this,n),this.timeStamp=e&&e.timeStamp||w.now(),this[w.expando]=!0,t):new w.Event(e,n)},w.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},w.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return(!i||i!==r&&!w.contains(r,i))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),w.support.submitBubbles||(w.event.special.submit={setup:function(){return w.nodeName(this,"form")?!1:(w.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=w.nodeName(n,"input")||w.nodeName(n,"button")?n.form:t;r&&!w._data(r,"submitBubbles")&&(w.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),w._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&w.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return w.nodeName(this,"form")?!1:(w.event.remove(this,"._submit"),t)}}),w.support.changeBubbles||(w.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(w.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),w.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),w.event.simulate("change",this,e,!0)})),!1):(w.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!w._data(t,"changeBubbles")&&(w.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||w.event.simulate("change",this.parentNode,e,!0)}),w._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return w.event.remove(this,"._change"),!Z.test(this.nodeName)}}),w.support.focusinBubbles||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){w.event.simulate(t,e.target,w.event.fix(e),!0)};w.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),w.fn.extend({on:function(e,n,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=st;else if(!i)return this;return 1===s&&(u=i,i=function(e){return w().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=w.guid++)),this.each(function(){w.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,w(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,n,e[s]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=st),this.each(function(){w.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?w.event.trigger(e,n,r,!0):t}});var ut=/^.[^:#\[\.,]*$/,at=/^(?:parents|prev(?:Until|All))/,ft=w.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;i>t;t++)if(w.contains(r[t],this))return!0}));for(t=0;i>t;t++)w.find(e,r[t],n);return n=this.pushStack(i>1?w.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=w(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(w.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e||[],!0))},filter:function(e){return this.pushStack(ht(this,e||[],!1))},is:function(e){return!!ht(this,"string"==typeof e&&ft.test(e)?w(e):e||[],!1).length},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||"string"!=typeof e?w(e,t||this.context):0;for(;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(o?o.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){n=s.push(n);break}return this.pushStack(s.length>1?w.unique(s):s)},index:function(e){return e?"string"==typeof e?w.inArray(this[0],w(e)):w.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?w(e,t):w.makeArray(e&&e.nodeType?[e]:e),r=w.merge(this.get(),n);return this.pushStack(w.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return w.dir(e,"parentNode")},parentsUntil:function(e,t,n){return w.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return w.dir(e,"nextSibling")},prevAll:function(e){return w.dir(e,"previousSibling")},nextUntil:function(e,t,n){return w.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return w.dir(e,"previousSibling",n)},siblings:function(e){return w.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return w.sibling(e.firstChild)},contents:function(e){return w.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:w.merge([],e.childNodes)}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(lt[e]||(i=w.unique(i)),at.test(e)&&(i=i.reverse())),this.pushStack(i)}}),w.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,r){var i=[],s=e[n];while(s&&9!==s.nodeType&&(r===t||1!==s.nodeType||!w(s).is(r)))1===s.nodeType&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:w.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(o),Ot=At.appendChild(o.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,w.fn.extend({text:function(e){return w.access(this,function(e){return e===t?w.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Mt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Mt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?w.filter(e,this):this,i=0;for(;null!=(n=r[i]);i++)t||1!==n.nodeType||w.cleanData(jt(n)),n.parentNode&&(t&&w.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&w.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&w.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return w.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(vt,""):t;if(!("string"!=typeof e||St.test(e)||!w.support.htmlSerialize&&mt.test(e)||!w.support.leadingWhitespace&&gt.test(e)||Lt[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(yt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(w.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=w.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),w(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=p.apply([],e);var r,i,s,o,u,a,f=0,l=this.length,c=this,h=l-1,d=e[0],v=w.isFunction(d);if(v||!(1>=l||"string"!=typeof d||w.support.checkClone)&&Tt.test(d))return this.each(function(r){var i=c.eq(r);v&&(e[0]=d.call(this,r,i.html())),i.domManip(e,t,n)});if(l&&(a=w.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=a.firstChild,1===a.childNodes.length&&(a=r),r)){for(o=w.map(jt(a,"script"),_t),s=o.length;l>f;f++)i=a,f!==h&&(i=w.clone(i,!0,!0),s&&w.merge(o,jt(i,"script"))),t.call(this[f],i,f);if(s)for(u=o[o.length-1].ownerDocument,w.map(o,Dt),f=0;s>f;f++)i=o[f],Nt.test(i.type||"")&&!w._data(i,"globalEval")&&w.contains(u,i)&&(i.src?w._evalUrl(i.src):w.globalEval((i.text||i.textContent||i.innerHTML||"").replace(kt,"")));a=r=null}return this}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){var n,r=0,i=[],s=w(e),o=s.length-1;for(;o>=r;r++)n=r===o?this:this.clone(!0),w(s[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}}),w.extend({clone:function(e,t,n){var r,i,s,o,u,a=w.contains(e.ownerDocument,e);if(w.support.html5Clone||w.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild)),!(w.support.noCloneEvent&&w.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(r=jt(s),u=jt(e),o=0;null!=(i=u[o]);++o)r[o]&&Bt(i,r[o]);if(t)if(n)for(u=u||jt(e),r=r||jt(s),o=0;null!=(i=u[o]);o++)Ht(i,r[o]);else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;c>d;d++)if(s=e[d],s||0===s)if("object"===w.type(s))w.merge(p,s.nodeType?[s]:s);else if(Et.test(s)){u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;if(!w.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0])),!w.support.tbody){s="table"!==a||wt.test(s)?"<table>"!==l[1]||wt.test(s)?0:u:u.firstChild,i=s&&s.childNodes.length;while(i--)w.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}w.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}else p.push(t.createTextNode(s));u&&h.removeChild(u),w.support.appendChecked||w.grep(jt(p,"input"),Ft),d=0;while(s=p[d++])if((!r||-1===w.inArray(s,r))&&(o=w.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u),n)){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=w.expando,f=w.cache,l=w.support.deleteExpando,h=w.event.special;for(;null!=(n=e[u]);u++)if((t||w.acceptData(n))&&(s=n[a],o=s&&f[s])){if(o.events)for(r in o.events)h[r]?w.event.remove(n,r):w.removeEvent(n,r,o.handle);f[s]&&(delete f[s],l?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,c.push(s))}},_evalUrl:function(e){return w.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),w.fn.extend({wrapAll:function(e){if(w.isFunction(e))return this.each(function(t){w(this).wrapAll(e.call(this,t))});if(this[0]){var t=w(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return w.isFunction(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=w.isFunction(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){w.nodeName(this,"body")||w(this).replaceWith(this.childNodes)}).end()}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,$t=RegExp("^("+E+")(.*)$","i"),Jt=RegExp("^("+E+")(?!px)[a-z%]+$","i"),Kt=RegExp("^([+-])=("+E+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];w.fn.extend({css:function(e,n){return w.access(this,function(e,n,r){var i,s,o={},u=0;if(w.isArray(n)){for(s=qt(e),i=n.length;i>u;u++)o[n[u]]=w.css(e,n[u],!1,s);return o}return r!==t?w.style(e,n,r):w.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){nn(this)?w(this).show():w(this).hide()})}}),w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":w.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=w.camelCase(n),f=e.style;if(n=w.cssProps[a]||(w.cssProps[a]=tn(f,a)),u=w.cssHooks[n]||w.cssHooks[a],r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];if(o=typeof r,"string"===o&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(w.css(e,n)),o="number"),!(null==r||"number"===o&&isNaN(r)||("number"!==o||w.cssNumber[a]||(r+="px"),w.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(f[n]="inherit"),u&&"set"in u&&(r=u.set(e,r,i))===t)))try{f[n]=r}catch(l){}}},css:function(e,n,r,i){var s,o,u,a=w.camelCase(n);return n=w.cssProps[a]||(w.cssProps[a]=tn(e.style,a)),u=w.cssHooks[n]||w.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),"normal"===o&&n in Yt&&(o=Yt[n]),""===r||r?(s=parseFloat(o),r===!0||w.isNumeric(s)?s||0:o):o}}),e.getComputedStyle?(qt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(""!==a||w.contains(e.ownerDocument,e)||(a=w.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):o.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return null==a&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left="fontSize"===n?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),""===a?"auto":a}),w.each(["height","width"],function(e,n){w.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(w.css(e,"display"))?w.swap(e,Gt,function(){return un(e,n,i)}):un(e,n,i):t},set:function(e,t,r){var i=r&&qt(e);return sn(e,t,r?on(e,n,r,w.support.boxSizing&&"border-box"===w.css(e,"boxSizing",!1,i),i):0)}}}),w.support.opacity||(w.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=w.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===w.trim(s.replace(Ut,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i)}}),w(function(){w.support.reliableMarginRight||(w.cssHooks.marginRight={get:function(e,n){return n?w.swap(e,{display:"inline-block"},Rt,[e,"marginRight"]):t}}),!w.support.pixelPosition&&w.fn.position&&w.each(["top","left"],function(e,n){w.cssHooks[n]={get:function(e,r){return r?(r=Rt(e,n),Jt.test(r)?w(e).position()[n]+"px":r):t}}})}),w.expr&&w.expr.filters&&(w.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!w.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||w.css(e,"display"))},w.expr.filters.visible=function(e){return!w.expr.filters.hidden(e)}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){var r=0,i={},s="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(w.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:w.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),w.param=function(e,n){var r,i=[],s=function(e,t){t=w.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=w.ajaxSettings&&w.ajaxSettings.traditional),w.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},w.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var mn,gn,yn=w.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=w.fn.load,Ln={},An={},On="*/".concat("*");try{gn=s.href}catch(Mn){gn=o.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],w.fn.load=function(e,n,r){if("string"!=typeof e&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),w.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(o="POST"),u.length>0&&w.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?w("<div>").append(w.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":w.parseJSON,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,w.ajaxSettings),t):Pn(w.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;2!==b&&(b=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,l=e>=200&&300>e||304===e,r&&(E=Hn(c,x,r)),E=Bn(c,E,x,l),l?(c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(w.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(w.etag[s]=S)),204===e||"HEAD"===c.type?T="nocontent":304===e?T="notmodified":(T=E.state,g=E.data,y=E.error,l=!y)):(y=T,(e||!T)&&(T="error",0>e&&(e=0))),x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--w.active||w.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=w.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?w(h):w.event,d=w.Deferred(),v=w.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,E="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||E;return f&&f.abort(t),N(0,t),this}};if(d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=w.trim(c.dataType||"*").toLowerCase().match(S)||[""],null==c.crossDomain&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(mn[3]||("http:"===mn[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=w.param(c.data,c.traditional)),Dn(Ln,c,n,x),2===b)return x;a=c.global,a&&0===w.active++&&w.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(w.lastModified[s]&&x.setRequestHeader("If-Modified-Since",w.lastModified[s]),w.etag[s]&&x.setRequestHeader("If-None-Match",w.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&2!==b){E="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);if(f=Dn(An,c,n,x)){x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{b=1,f.send(g,N)}catch(T){if(!(2>b))throw T;N(-1,T)}}else N(-1,"No Transport");return x}return x.abort()},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,n){return w.get(e,t,n,"script")}}),w.each(["get","post"],function(e,n){w[n]=function(e,r,i,s){return w.isFunction(r)&&(s=s||i,i=r,r=t),w.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),w.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||w("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||w.expando+"_"+yn++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");return a||"jsonp"===n.dataTypes[0]?(s=n.jsonpCallback=w.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||w.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&w.isFunction(o)&&o(u[0]),u=o=t}),"script"):t});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};w.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=w.ajaxSettings.xhr(),w.support.cors=!!qn&&"withCredentials"in qn,qn=w.support.ajax=!!qn,qn&&w.ajaxTransport(function(n){if(!n.crossDomain||w.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();if(n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async),n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||4===a.readyState))if(r=t,o&&(a.onreadystatechange=w.noop,Un&&delete In[o]),i)4!==a.readyState&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),"string"==typeof a.responseText&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}u||!n.isLocal||n.crossDomain?1223===u&&(u=204):u=c.text?200:404}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?4===a.readyState?setTimeout(r):(o=++Rn,Un&&(In||(In={},w(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=RegExp("^(?:([+-])=|)("+E+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Jn.exec(t),s=i&&i[3]||(w.cssNumber[e]?"":"px"),o=(w.cssNumber[e]||"px"!==s&&+r)&&Jn.exec(w.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,w.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&1!==u&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};w.Animation=w.extend(er,{tweener:function(e,t){w.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),w.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(w.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=w.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[w.cssProps[e.prop]]||w.cssHooks[e.prop])?w.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),s=w.speed(t,n,r),o=function(){var t=er(this,w.extend({},e),s);(i||w._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",s=w.timers,o=w._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&w.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=w._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=w.timers,o=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||w.isFunction(e)&&e,duration:e,easing:n&&t||t&&!w.isFunction(t)&&t};return r.duration=w.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in w.fx.speeds?w.fx.speeds[r.duration]:w.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){w.isFunction(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},w.timers=[],w.fx=rr.prototype.init,w.fx.tick=function(){var e,n=w.timers,r=0;for(Xn=w.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||w.fx.stop(),Xn=t},w.fx.timer=function(e){e()&&w.timers.push(e)&&w.fx.start()},w.fx.interval=13,w.fx.start=function(){Vn||(Vn=setInterval(w.fx.tick,w.fx.interval))},w.fx.stop=function(){clearInterval(Vn),Vn=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fx.step={},w.expr&&w.expr.filters&&(w.expr.filters.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length}),w.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){w.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(u)return n=u.documentElement,w.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},w.offset={setOffset:function(e,t,n){var r=w.css(e,"position");"static"===r&&(e.style.position="relative");var i=w(e),s=i.offset(),o=w.css(e,"top"),u=w.css(e,"left"),a=("absolute"===r||"fixed"===r)&&w.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),w.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+c),null!=t.left&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},w.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===w.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),w.nodeName(e[0],"html")||(n=e.offset()),n.top+=w.css(e[0],"borderTopWidth",!0),n.left+=w.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-w.css(r,"marginTop",!0),left:t.left-n.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||u;while(e&&!w.nodeName(e,"html")&&"static"===w.css(e,"position"))e=e.offsetParent;return e||u})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);w.fn[e]=function(i){return w.access(this,function(e,i,s){var o=sr(e);return s===t?o?n in o?o[n]:o.document.documentElement[i]:e[i]:(o?o.scrollTo(r?w(o).scrollLeft():s,r?s:w(o).scrollTop()):e[i]=s,t)},e,i,arguments.length,null)}}),w.each({Height:"height",Width:"width"},function(e,n){w.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){w.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return w.access(this,function(n,r,i){var s;return w.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?w.css(n,r,u):w.style(n,r,i,u)},n,o?i:t,o,null)}})}),w.fn.size=function(){return this.length},w.fn.andSelf=w.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=w:(e.jQuery=e.$=w,"function"==typeof define&&define.amd&&define("jquery",[],function(){return w}))})(window),function(){function U(e,t,n){var r=(n||0)-1,i=e?e.length:0;while(++r<i)if(e[r]===t)return r;return-1}function z(e,t){var n=typeof t;e=e.cache;if(n=="boolean"||t==null)return e[t]?0:-1;n!="number"&&n!="string"&&(n="object");var r=n=="number"?t:s+t;return e=(e=e[n])&&e[r],n=="object"?e&&U(e,t)>-1?0:-1:e?0:-1}function W(e){var t=this.cache,n=typeof e;if(n=="boolean"||e==null)t[e]=!0;else{n!="number"&&n!="string"&&(n="object");var r=n=="number"?e:s+e,i=t[n]||(t[n]={});n=="object"?(i[r]||(i[r]=[])).push(e):i[r]=!0}}function X(e){return e.charCodeAt(0)}function V(e,t){var n=e.criteria,r=t.criteria,i=-1,s=n.length;while(++i<s){var o=n[i],u=r[i];if(o!==u){if(o>u||typeof o=="undefined")return 1;if(o<u||typeof u=="undefined")return-1}}return e.index-t.index}function $(e){var t=-1,n=e.length,r=e[0],i=e[n/2|0],s=e[n-1];if(r&&typeof r=="object"&&i&&typeof i=="object"&&s&&typeof s=="object")return!1;var o=Q();o["false"]=o["null"]=o["true"]=o["undefined"]=!1;var u=Q();u.array=e,u.cache=o,u.push=W;while(++t<n)u.push(e[t]);return u}function J(e){return"\\"+I[e]}function K(){return t.pop()||[]}function Q(){return n.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,"undefined":!1,value:null}}function G(e){return typeof e.toString!="function"&&typeof (e+"")=="string"}function Y(e){e.length=0,t.length<u&&t.push(e)}function Z(e){var t=e.cache;t&&Z(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,n.length<u&&n.push(e)}function et(e,t,n){t||(t=0),typeof n=="undefined"&&(n=e?e.length:0);var r=-1,i=n-t||0,s=Array(i<0?0:i);while(++r<i)s[r]=e[t+r];return s}function tt(t){function It(e){return e&&typeof e=="object"&&!cn(e)&&Et.call(e,"__wrapped__")?e:new qt(e)}function qt(e,t){this.__chain__=!!t,this.__wrapped__=e}function zt(e){function i(){if(n){var e=et(n);St.apply(e,arguments)}if(this instanceof i){var s=Xt(t.prototype),o=t.apply(s,e||arguments);return zn(o)?o:s}return t.apply(r,e||arguments)}var t=e[0],n=e[2],r=e[4];return un(i,e),i}function Wt(e,t,n,r,i){if(n){var s=n(e);if(typeof s!="undefined")return s}var o=zn(e);if(!o)return e;var u=dt.call(e);if(!P[u]||!Rt.nodeClass&&G(e))return e;var a=jt[u];switch(u){case N:case C:return new a(+e);case O:case D:return new a(e);case _:return s=a(e.source,p.exec(e)),s.lastIndex=e.lastIndex,s}var f=cn(e);if(t){var l=!r;r||(r=K()),i||(i=K());var c=r.length;while(c--)if(r[c]==e)return i[c];s=f?a(e.length):{}}else s=f?et(e):Sn({},e);return f&&(Et.call(e,"index")&&(s.index=e.index),Et.call(e,"input")&&(s.input=e.input)),t?(r.push(e),i.push(s),(f?En:Mn)(e,function(e,o){s[o]=Wt(e,t,n,r,i)}),l&&(Y(r),Y(i)),s):s}function Xt(e,t){return zn(e)?Lt(e):{}}function Vt(e,t,n){if(typeof e!="function")return mi;if(typeof t!="undefined"&&"prototype"in e){var r=e.__bindData__;if(typeof r=="undefined"){Rt.funcNames&&(r=!e.name),r=r||!Rt.funcDecomp;if(!r){var i=bt.call(e);Rt.funcNames||(r=!d.test(i)),r||(r=y.test(i),un(e,r))}}if(r===!1||r!==!0&&r[1]&1)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)}}return Zr(e,t)}return e}function $t(e){function h(){var e=u?s:this;if(r){var p=et(r);St.apply(p,arguments)}if(i||f){p||(p=et(arguments)),i&&St.apply(p,i);if(f&&p.length<o)return n|=16,$t([t,l?n:n&-4,p,null,s,o])}p||(p=arguments),a&&(t=e[c]);if(this instanceof h){e=Xt(t.prototype);var d=t.apply(e,p);return zn(d)?d:e}return t.apply(e,p)}var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=n&1,a=n&2,f=n&4,l=n&8,c=t;return un(h,e),h}function Jt(e,t){var n=-1,r=sn(),i=e?e.length:0,s=i>=o&&r===U,u=[];if(s){var a=$(t);a?(r=z,t=a):s=!1}while(++n<i){var f=e[n];r(t,f)<0&&u.push(f)}return s&&Z(t),u}function Kt(e,t,n,r){var i=(r||0)-1,s=e?e.length:0,o=[];while(++i<s){var u=e[i];if(u&&typeof u=="object"&&typeof u.length=="number"&&(cn(u)||ln(u))){t||(u=Kt(u,t,n));var a=-1,f=u.length,l=o.length;o.length+=f;while(++a<f)o[l++]=u[a]}else n||o.push(u)}return o}function Qt(e,t,n,r,i,s){if(n){var o=n(e,t);if(typeof o!="undefined")return!!o}if(e===t)return e!==0||1/e==1/t;var u=typeof e,a=typeof t;if(e===e&&(!e||!F[u])&&(!t||!F[a]))return!1;if(e==null||t==null)return e===t;var f=dt.call(e),l=dt.call(t);f==x&&(f=M),l==x&&(l=M);if(f!=l)return!1;switch(f){case N:case C:return+e==+t;case O:return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case _:case D:return e==ut(t)}var c=f==T;if(!c){var h=Et.call(e,"__wrapped__"),p=Et.call(t,"__wrapped__");if(h||p)return Qt(h?e.__wrapped__:e,p?t.__wrapped__:t,n,r,i,s);if(f!=M||!Rt.nodeClass&&(G(e)||G(t)))return!1;var d=!Rt.argsObject&&ln(e)?st:e.constructor,v=!Rt.argsObject&&ln(t)?st:t.constructor;if(d!=v&&!(Un(d)&&d instanceof d&&Un(v)&&v instanceof v)&&"constructor"in e&&"constructor"in t)return!1}var m=!i;i||(i=K()),s||(s=K());var g=i.length;while(g--)if(i[g]==e)return s[g]==t;var y=0;o=!0,i.push(e),s.push(t);if(c){g=e.length,y=t.length,o=y==g;if(o||r)while(y--){var b=g,w=t[y];if(r){while(b--)if(o=Qt(e[b],w,n,r,i,s))break}else if(!(o=Qt(e[y],w,n,r,i,s)))break}}else An(t,function(t,u,a){if(Et.call(a,u))return y++,o=Et.call(e,u)&&Qt(e[u],t,n,r,i,s)}),o&&!r&&An(e,function(e,t,n){if(Et.call(n,t))return o=--y>-1});return i.pop(),s.pop(),m&&(Y(i),Y(s)),o}function Gt(e,t,n,r,i){(cn(t)?cr:Mn)(t,function(t,s){var o,u,a=t,f=e[s];if(t&&((u=cn(t))||$n(t))){var l=r.length;while(l--)if(o=r[l]==t){f=i[l];break}if(!o){var c;if(n){a=n(f,t);if(c=typeof a!="undefined")f=a}c||(f=u?cn(f)?f:[]:$n(f)?f:{}),r.push(t),i.push(f),c||Gt(f,t,n,r,i)}}else n&&(a=n(f,t),typeof a=="undefined"&&(a=t)),typeof a!="undefined"&&(f=a);e[s]=f})}function Yt(e,t){return e+yt(Bt()*(t-e+1))}function Zt(e,t,n){var r=-1,i=sn(),s=e?e.length:0,u=[],a=!t&&s>=o&&i===U,f=n||a?K():u;if(a){var l=$(f);i=z,f=l}while(++r<s){var c=e[r],h=n?n(c,r,e):c;if(t?!r||f[f.length-1]!==h:i(f,h)<0)(n||a)&&f.push(h),u.push(c)}return a?(Y(f.array),Z(f)):n&&Y(f),u}function en(e){return function(t,n,r){var i={};n=It.createCallback(n,r,3);if(cn(t)){var s=-1,o=t.length;while(++s<o){var u=t[s];e(i,u,n(u,s,t),t)}}else En(t,function(t,r,s){e(i,t,n(t,r,s),s)});return i}}function tn(e,t,n,r,i,s){var o=t&1,u=t&2,a=t&4,f=t&8,l=t&16,c=t&32;if(!u&&!Un(e))throw new at;l&&!n.length&&(t&=-17,l=n=!1),c&&!r.length&&(t&=-33,c=r=!1);var h=e&&e.__bindData__;if(h&&h!==!0)return h=et(h),h[2]&&(h[2]=et(h[2])),h[3]&&(h[3]=et(h[3])),o&&!(h[1]&1)&&(h[4]=i),!o&&h[1]&1&&(t|=8),a&&!(h[1]&4)&&(h[5]=s),l&&St.apply(h[2]||(h[2]=[]),n),c&&Ct.apply(h[3]||(h[3]=[]),r),h[1]|=t,tn.apply(null,h);var p=t==1||t===17?zt:$t;return p([e,t,n,r,i,s])}function nn(){j.shadowedProps=E,j.array=j.bottom=j.loop=j.top="",j.init="iterable",j.useHas=!0;for(var e,t=0;e=arguments[t];t++)for(var n in e)j[n]=e[n];var r=j.args;j.firstArg=/^[^,]+/.exec(r)[0];var s=W("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+r+") {\n"+Ut(j)+"\n}");return s(Vt,L,lt,Et,i,ln,cn,Kn,j.keys,ct,F,Ft,D,ht,dt)}function rn(e){return gn[e]}function sn(){var e=(e=It.indexOf)===Br?U:e;return e}function on(e){return typeof e=="function"&&vt.test(e)}function an(e){var t,n;return!e||dt.call(e)!=M||(t=e.constructor,Un(t)&&!(t instanceof t))||!Rt.argsClass&&ln(e)||!Rt.nodeClass&&G(e)?!1:Rt.ownLast?(An(e,function(e,t,r){return n=Et.call(r,t),!1}),n!==!1):(An(e,function(e,t){n=t}),typeof n=="undefined"||Et.call(e,n))}function fn(e){return yn[e]}function ln(e){return e&&typeof e=="object"&&typeof e.length=="number"&&dt.call(e)==x||!1}function xn(e,t,n,r){return typeof t!="boolean"&&t!=null&&(r=n,n=t,t=!1),Wt(e,t,typeof n=="function"&&Vt(n,r,1))}function Tn(e,t,n){return Wt(e,!0,typeof t=="function"&&Vt(t,n,1))}function Nn(e,t){var n=Xt(e);return t?Sn(n,t):n}function kn(e,t,n){var r;return t=It.createCallback(t,n,3),Mn(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Ln(e,t,n){var r;return t=It.createCallback(t,n,3),_n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function On(e,t,n){var r=[];An(e,function(e,t){r.push(t,e)});var i=r.length;t=Vt(t,n,3);while(i--)if(t(r[i--],r[i],e)===!1)break;return e}function _n(e,t,n){var r=pn(e),i=r.length;t=Vt(t,n,3);while(i--){var s=r[i];if(t(e[s],s,e)===!1)break}return e}function Dn(e){var t=[];return An(e,function(e,n){Un(e)&&t.push(n)}),t.sort()}function Pn(e,t){return e?Et.call(e,t):!1}function Hn(e){var t=-1,n=pn(e),r=n.length,i={};while(++t<r){var s=n[t];i[e[s]]=s}return i}function Bn(e){return e===!0||e===!1||e&&typeof e=="object"&&dt.call(e)==N||!1}function jn(e){return e&&typeof e=="object"&&dt.call(e)==C||!1}function Fn(e){return e&&e.nodeType===1||!1}function In(e){var t=!0;if(!e)return t;var n=dt.call(e),r=e.length;return n==T||n==D||(Rt.argsClass?n==x:ln(e))||n==M&&typeof r=="number"&&Un(e.splice)?!r:(Mn(e,function(){return t=!1}),t)}function qn(e,t,n,r){return Qt(e,t,typeof n=="function"&&Vt(n,r,2))}function Rn(e){return Ot(e)&&!Mt(parseFloat(e))}function Un(e){return typeof e=="function"}function zn(e){return!!e&&!!F[typeof e]}function Wn(e){return Vn(e)&&e!=+e}function Xn(e){return e===null}function Vn(e){return typeof e=="number"||e&&typeof e=="object"&&dt.call(e)==O||!1}function Jn(e){return e&&F[typeof e]&&dt.call(e)==_||!1}function Kn(e){return typeof e=="string"||e&&typeof e=="object"&&dt.call(e)==D||!1}function Qn(e){return typeof e=="undefined"}function Gn(e,t,n){var r={};return t=It.createCallback(t,n,3),Mn(e,function(e,n,i){r[n]=t(e,n,i)}),r}function Yn(e){var t=arguments,n=2;if(!zn(e))return e;typeof t[2]!="number"&&(n=t.length);if(n>3&&typeof t[n-2]=="function")var r=Vt(t[--n-1],t[n--],2);else n>2&&typeof t[n-1]=="function"&&(r=t[--n]);var i=et(arguments,1,n),s=-1,o=K(),u=K();while(++s<n)Gt(e,i[s],r,o,u);return Y(o),Y(u),e}function Zn(e,t,n){var r={};if(typeof t!="function"){var i=[];An(e,function(e,t){i.push(t)}),i=Jt(i,Kt(arguments,!0,!1,1));var s=-1,o=i.length;while(++s<o){var u=i[s];r[u]=e[u]}}else t=It.createCallback(t,n,3),An(e,function(e,n,i){t(e,n,i)||(r[n]=e)});return r}function er(e){var t=-1,r=pn(e),i=r.length,s=n(i);while(++t<i){var o=r[t];s[t]=[o,e[o]]}return s}function tr(e,t,n){var r={};if(typeof t!="function"){var i=-1,s=Kt(arguments,!0,!1,1),o=zn(e)?s.length:0;while(++i<o){var u=s[i];u in e&&(r[u]=e[u])}}else t=It.createCallback(t,n,3),An(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r}function nr(e,t,n,r){var i=cn(e);if(n==null)if(i)n=[];else{var s=e&&e.constructor,o=s&&s.prototype;n=Xt(o)}return t&&(t=It.createCallback(t,r,4),(i?En:Mn)(e,function(e,r,i){return t(n,e,r,i)})),n}function rr(e){var t=-1,r=pn(e),i=r.length,s=n(i);while(++t<i)s[t]=e[r[t]];return s}function ir(e){var t=arguments,r=-1,i=Kt(t,!0,!1,1),s=t[2]&&t[2][t[1]]===e?1:i.length,o=n(s);Rt.unindexedChars&&Kn(e)&&(e=e.split(""));while(++r<s)o[r]=e[i[r]];return o}function sr(e,t,n){var r=-1,i=sn(),s=e?e.length:0,o=!1;return n=(n<0?Dt(0,s+n):n)||0,cn(e)?o=i(e,t,n)>-1:typeof s=="number"?o=(Kn(e)?e.indexOf(t,n):i(e,t,n))>-1:En(e,function(e){if(++r>=n)return!(o=e===t)}),o}function ur(e,t,n){var r=!0;t=It.createCallback(t,n,3);if(cn(e)){var i=-1,s=e.length;while(++i<s)if(!(r=!!t(e[i],i,e)))break}else En(e,function(e,n,i){return r=!!t(e,n,i)});return r}function ar(e,t,n){var r=[];t=It.createCallback(t,n,3);if(cn(e)){var i=-1,s=e.length;while(++i<s){var o=e[i];t(o,i,e)&&r.push(o)}}else En(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function fr(e,t,n){t=It.createCallback(t,n,3);if(!cn(e)){var o;return En(e,function(e,n,r){if(t(e,n,r))return o=e,!1}),o}var r=-1,i=e.length;while(++r<i){var s=e[r];if(t(s,r,e))return s}}function lr(e,t,n){var r;return t=It.createCallback(t,n,3),hr(e,function(e,n,i){if(t(e,n,i))return r=e,!1}),r}function cr(e,t,n){if(t&&typeof n=="undefined"&&cn(e)){var r=-1,i=e.length;while(++r<i)if(t(e[r],r,e)===!1)break}else En(e,t,n);return e}function hr(e,t,n){var r=e,i=e?e.length:0;t=t&&typeof n=="undefined"?t:Vt(t,n,3);if(cn(e)){while(i--)if(t(e[i],i,e)===!1)break}else{if(typeof i!="number"){var s=pn(e);i=s.length}else Rt.unindexedChars&&Kn(e)&&(r=e.split(""));En(e,function(e,n,o){return n=s?s[--i]:--i,t(r[n],n,o)})}return e}function vr(e,t){var r=et(arguments,2),i=-1,s=typeof t=="function",o=e?e.length:0,u=n(typeof o=="number"?o:0);return cr(e,function(e){u[++i]=(s?t:e[t]).apply(e,r)}),u}function mr(e,t,r){var i=-1,s=e?e.length:0,o=n(typeof s=="number"?s:0);t=It.createCallback(t,r,3);if(cn(e))while(++i<s)o[i]=t(e[i],i,e);else En(e,function(e,n,r){o[++i]=t(e,n,r)});return o}function gr(e,t,n){var r=-Infinity,i=r;typeof t!="function"&&n&&n[t]===e&&(t=null);if(t==null&&cn(e)){var s=-1,o=e.length;while(++s<o){var u=e[s];u>i&&(i=u)}}else t=t==null&&Kn(e)?X:It.createCallback(t,n,3),En(e,function(e,n,s){var o=t(e,n,s);o>r&&(r=o,i=e)});return i}function yr(e,t,n){var r=Infinity,i=r;typeof t!="function"&&n&&n[t]===e&&(t=null);if(t==null&&cn(e)){var s=-1,o=e.length;while(++s<o){var u=e[s];u<i&&(i=u)}}else t=t==null&&Kn(e)?X:It.createCallback(t,n,3),En(e,function(e,n,s){var o=t(e,n,s);o<r&&(r=o,i=e)});return i}function wr(e,t,n,r){var i=arguments.length<3;t=It.createCallback(t,r,4);if(cn(e)){var s=-1,o=e.length;i&&(n=e[++s]);while(++s<o)n=t(n,e[s],s,e)}else En(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)});return n}function Er(e,t,n,r){var i=arguments.length<3;return t=It.createCallback(t,r,4),hr(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)}),n}function Sr(e,t,n){return t=It.createCallback(t,n,3),ar(e,function(e,n,r){return!t(e,n,r)})}function xr(t,n,r){t&&typeof t.length!="number"?t=rr(t):Rt.unindexedChars&&Kn(t)&&(t=t.split(""));if(n==null||r)return t?t[Yt(0,t.length-1)]:e;var i=Tr(t);return i.length=Pt(Dt(0,n),i.length),i}function Tr(e){var t=-1,r=e?e.length:0,i=n(typeof r=="number"?r:0);return cr(e,function(e){var n=Yt(0,++t);i[t]=i[n],i[n]=e}),i}function Nr(e){var t=e?e.length:0;return typeof t=="number"?t:pn(e).length}function Cr(e,t,n){var r;t=It.createCallback(t,n,3);if(cn(e)){var i=-1,s=e.length;while(++i<s)if(r=t(e[i],i,e))break}else En(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}function kr(e,t,r){var i=-1,s=cn(t),o=e?e.length:0,u=n(typeof o=="number"?o:0);s||(t=It.createCallback(t,r,3)),cr(e,function(e,n,r){var o=u[++i]=Q();s?o.criteria=mr(t,function(t){return e[t]}):(o.criteria=K())[0]=t(e,n,r),o.index=i,o.value=e}),o=u.length,u.sort(V);while(o--){var a=u[o];u[o]=a.value,s||Y(a.criteria),Z(a)}return u}function Lr(e){return e&&typeof e.length=="number"?Rt.unindexedChars&&Kn(e)?e.split(""):et(e):rr(e)}function Or(e){var t=-1,n=e?e.length:0,r=[];while(++t<n){var i=e[t];i&&r.push(i)}return r}function Mr(e){return Jt(e,Kt(arguments,!0,!0,1))}function _r(e,t,n){var r=-1,i=e?e.length:0;t=It.createCallback(t,n,3);while(++r<i)if(t(e[r],r,e))return r;return-1}function Dr(e,t,n){var r=e?e.length:0;t=It.createCallback(t,n,3);while(r--)if(t(e[r],r,e))return r;return-1}function Pr(t,n,r){var i=0,s=t?t.length:0;if(typeof n!="number"&&n!=null){var o=-1;n=It.createCallback(n,r,3);while(++o<s&&n(t[o],o,t))i++}else{i=n;if(i==null||r)return t?t[0]:e}return et(t,0,Pt(Dt(0,i),s))}function Hr(e,t,n,r){return typeof t!="boolean"&&t!=null&&(r=n,n=typeof t!="function"&&r&&r[t]===e?null:t,t=!1),n!=null&&(e=mr(e,n,r)),Kt(e,t)}function Br(e,t,n){if(typeof n=="number"){var r=e?e.length:0;n=n<0?Dt(0,r+n):n||0}else if(n){var i=Xr(e,t);return e[i]===t?i:-1}return U(e,t,n)}function jr(e,t,n){var r=0,i=e?e.length:0;if(typeof t!="number"&&t!=null){var s=i;t=It.createCallback(t,n,3);while(s--&&t(e[s],s,e))r++}else r=t==null||n?1:t||r;return et(e,0,Pt(Dt(0,i-r),i))}function Fr(){var e=[],t=-1,n=arguments.length,r=K(),i=sn(),s=i===U,u=K();while(++t<n){var a=arguments[t];if(cn(a)||ln(a))e.push(a),r.push(s&&a.length>=o&&$(t?e[t]:u))}var f=e[0],l=-1,c=f?f.length:0,h=[];e:while(++l<c){var p=r[0];a=f[l];if((p?z(p,a):i(u,a))<0){t=n,(p||u).push(a);while(--t){p=r[t];if((p?z(p,a):i(e[t],a))<0)continue e}h.push(a)}}while(n--)p=r[n],p&&Z(p);return Y(r),Y(u),h}function Ir(t,n,r){var i=0,s=t?t.length:0;if(typeof n!="number"&&n!=null){var o=s;n=It.createCallback(n,r,3);while(o--&&n(t[o],o,t))i++}else{i=n;if(i==null||r)return t?t[s-1]:e}return et(t,Dt(0,s-i))}function qr(e,t,n){var r=e?e.length:0;typeof n=="number"&&(r=(n<0?Dt(0,r+n):Pt(n,r-1))+1);while(r--)if(e[r]===t)return r;return-1}function Rr(e){var t=arguments,n=0,r=t.length,i=e?e.length:0;while(++n<r){var s=-1,o=t[n];while(++s<i)e[s]===o&&(Nt.call(e,s--,1),i--)}return e}function Ur(e,t,r){e=+e||0,r=typeof r=="number"?r:+r||1,t==null&&(t=e,e=0);var i=-1,s=Dt(0,mt((t-e)/(r||1))),o=n(s);while(++i<s)o[i]=e,e+=r;return o}function zr(e,t,n){var r=-1,i=e?e.length:0,s=[];t=It.createCallback(t,n,3);while(++r<i){var o=e[r];t(o,r,e)&&(s.push(o),Nt.call(e,r--,1),i--)}return s}function Wr(e,t,n){if(typeof t!="number"&&t!=null){var r=0,i=-1,s=e?e.length:0;t=It.createCallback(t,n,3);while(++i<s&&t(e[i],i,e))r++}else r=t==null||n?1:Dt(0,t);return et(e,r)}function Xr(e,t,n,r){var i=0,s=e?e.length:i;n=n?It.createCallback(n,r,1):mi,t=n(t);while(i<s){var o=i+s>>>1;n(e[o])<t?i=o+1:s=o}return i}function Vr(){return Zt(Kt(arguments,!0,!0))}function $r(e,t,n,r){return typeof t!="boolean"&&t!=null&&(r=n,n=typeof t!="function"&&r&&r[t]===e?null:t,t=!1),n!=null&&(n=It.createCallback(n,r,3)),Zt(e,t,n)}function Jr(e){return Jt(e,et(arguments,1))}function Kr(){var e=-1,t=arguments.length;while(++e<t){var n=arguments[e];if(cn(n)||ln(n))var r=r?Zt(Jt(r,n).concat(Jt(n,r))):n}return r||[]}function Qr(){var e=arguments.length>1?arguments:arguments[0],t=-1,r=e?gr(br(e,"length")):0,i=n(r<0?0:r);while(++t<r)i[t]=br(e,t);return i}function Gr(e,t){var n=-1,r=e?e.length:0,i={};!t&&r&&!cn(e[0])&&(t=[]);while(++n<r){var s=e[n];t?i[s]=t[n]:s&&(i[s[0]]=s[1])}return i}function Yr(e,t){if(!Un(t))throw new at;return function(){if(--e<1)return t.apply(this,arguments)}}function Zr(e,t){return arguments.length>2?tn(e,17,et(arguments,2),null,t):tn(e,1,null,null,t)}function ei(e){var t=arguments.length>1?Kt(arguments,!0,!1,1):Dn(e),n=-1,r=t.length;while(++n<r){var i=t[n];e[i]=tn(e[i],1,null,null,e)}return e}function ti(e,t){return arguments.length>2?tn(t,19,et(arguments,2),null,e):tn(t,3,null,null,e)}function ni(){var e=arguments,t=e.length;while(t--)if(!Un(e[t]))throw new at;return function(){var t=arguments,n=e.length;while(n--)t=[e[n].apply(this,t)];return t[0]}}function ri(e,t){return t=typeof t=="number"?t:+t||e.length,tn(e,4,null,null,null,t)}function ii(t,n,r){var i,s,o,u,a,f,l,c=0,h=!1,p=!0;if(!Un(t))throw new at;n=Dt(0,n)||0;if(r===!0){var d=!0;p=!1}else zn(r)&&(d=r.leading,h="maxWait"in r&&(Dt(n,r.maxWait)||0),p="trailing"in r?r.trailing:p);var v=function(){var r=n-(wi()-u);if(r<=0){s&&gt(s);var h=l;s=f=l=e,h&&(c=wi(),o=t.apply(a,i),!f&&!s&&(i=a=null))}else f=Tt(v,r)},m=function(){f&&gt(f),s=f=l=e;if(p||h!==n)c=wi(),o=t.apply(a,i),!f&&!s&&(i=a=null)};return function(){i=arguments,u=wi(),a=this,l=p&&(f||!d);if(h===!1)var e=d&&!f;else{!s&&!d&&(c=u);var r=h-(u-c),g=r<=0;g?(s&&(s=gt(s)),c=u,o=t.apply(a,i)):s||(s=Tt(m,r))}return g&&f?f=gt(f):!f&&n!==h&&(f=Tt(v,n)),e&&(g=!0,o=t.apply(a,i)),g&&!f&&!s&&(i=a=null),o}}function si(t){if(!Un(t))throw new at;var n=et(arguments,1);return Tt(function(){t.apply(e,n)},1)}function oi(t,n){if(!Un(t))throw new at;var r=et(arguments,2);return Tt(function(){t.apply(e,r)},n)}function ui(e,t){if(!Un(e))throw new at;var n=function(){var r=n.cache,i=t?t.apply(this,arguments):s+arguments[0];return Et.call(r,i)?r[i]:r[i]=e.apply(this,arguments)};return n.cache={},n}function ai(e){var t,n;if(!Un(e))throw new at;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function fi(e){return tn(e,16,et(arguments,1))}function li(e){return tn(e,32,null,et(arguments,1))}function ci(e,t,n){var r=!0,i=!0;if(!Un(e))throw new at;return n===!1?r=!1:zn(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),H.leading=r,H.maxWait=t,H.trailing=i,ii(e,t,H)}function hi(e,t){return tn(t,16,[e])}function pi(e){return function(){return e}}function di(e,t,n){var r=typeof e;if(e==null||r=="function")return Vt(e,t,n);if(r!="object")return Si(e);var i=pn(e),s=i[0],o=e[s];return i.length==1&&o===o&&!zn(o)?function(e){var t=e[s];return o===t&&(o!==0||1/o==1/t)}:function(t){var n=i.length,r=!1;while(n--)if(!(r=Qt(t[i[n]],e[i[n]],null,!0)))break;return r}}function vi(e){return e==null?"":ut(e).replace(wn,rn)}function mi(e){return e}function gi(e,t,n){var r=!0,i=t&&Dn(t);if(!t||!n&&!i.length)n==null&&(n=t),s=qt,t=e,e=It,i=Dn(t);n===!1?r=!1:zn(n)&&"chain"in n&&(r=n.chain);var s=e,o=Un(s);cr(i,function(n){var i=e[n]=t[n];o&&(s.prototype[n]=function(){var t=this.__chain__,n=this.__wrapped__,o=[n];St.apply(o,arguments);var u=i.apply(e,o);if(r||t){if(n===u&&zn(u))return this;u=new s(u),u.__chain__=t}return u})})}function yi(){return t._=pt,this}function bi(){}function Si(e){return function(t){return t[e]}}function xi(e,t,n){var r=e==null,i=t==null;n==null&&(typeof e=="boolean"&&i?(n=e,e=1):!i&&typeof t=="boolean"&&(n=t,i=!0)),r&&i&&(t=1),e=+e||0,i?(t=e,e=0):t=+t||0;if(n||e%1||t%1){var s=Bt();return Pt(e+s*(t-e+parseFloat("1e-"+((s+"").length-1))),t)}return Yt(e,t)}function Ti(e,t){if(e){var n=e[t];return Un(n)?e[t]():n}}function Ni(t,n,r){var i=It.templateSettings;t=ut(t||""),r=Cn({},r,i);var s=Cn({},r.imports,i.imports),o=pn(s),u=rr(s),a,p=0,d=r.interpolate||g,m="__p += '",y=ot((r.escape||g).source+"|"+d.source+"|"+(d===v?h:g).source+"|"+(r.evaluate||g).source+"|$","g");t.replace(y,function(e,n,r,i,s,o){return r||(r=i),m+=t.slice(p,o).replace(b,J),n&&(m+="' +\n__e("+n+") +\n'"),s&&(a=!0,m+="';\n"+s+";\n__p += '"),r&&(m+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),p=o+e.length,e}),m+="';\n";var w=r.variable,E=w;E||(w="obj",m="with ("+w+") {\n"+m+"\n}\n"),m=(a?m.replace(f,""):m).replace(l,"$1").replace(c,"$1;"),m="function("+w+") {\n"+(E?"":w+" || ("+w+" = {});\n")+"var __t, __p = '', __e = _.escape"+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var x="\n/*\n//# sourceURL="+(r.sourceURL||"/lodash/template/source["+S++ +"]")+"\n*/";try{var T=W(o,"return "+m+x).apply(e,u)}catch(N){throw N.source=m,N}return n?T(n):(T.source=m,T)}function Ci(e,t,r){e=(e=+e)>-1?e:0;var i=-1,s=n(e);t=Vt(t,r,1);while(++i<e)s[i]=t(i);return s}function ki(e){return e==null?"":ut(e).replace(bn,fn)}function Li(e){var t=++r;return ut(e==null?"":e)+t}function Ai(e){return e=new qt(e),e.__chain__=!0,e}function Oi(e,t){return t(e),e}function Mi(){return this.__chain__=!0,this}function _i(){return ut(this.__wrapped__)}function Di(){return this.__wrapped__}t=t?nt.defaults(q.Object(),t,nt.pick(q,w)):q;var n=t.Array,u=t.Boolean,I=t.Date,R=t.Error,W=t.Function,rt=t.Math,it=t.Number,st=t.Object,ot=t.RegExp,ut=t.String,at=t.TypeError,ft=[],lt=R.prototype,ct=st.prototype,ht=ut.prototype,pt=t._,dt=ct.toString,vt=ot("^"+ut(dt).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),mt=rt.ceil,gt=t.clearTimeout,yt=rt.floor,bt=W.prototype.toString,wt=on(wt=st.getPrototypeOf)&&wt,Et=ct.hasOwnProperty,St=ft.push,xt=ct.propertyIsEnumerable,Tt=t.setTimeout,Nt=ft.splice,Ct=ft.unshift,kt=function(){try{var e={},t=on(t=st.defineProperty)&&t,n=t(e,e,e)&&t}catch(r){}return n}(),Lt=on(Lt=st.create)&&Lt,At=on(At=n.isArray)&&At,Ot=t.isFinite,Mt=t.isNaN,_t=on(_t=st.keys)&&_t,Dt=rt.max,Pt=rt.min,Ht=t.parseInt,Bt=rt.random,jt={};jt[T]=n,jt[N]=u,jt[C]=I,jt[A]=W,jt[M]=st,jt[O]=it,jt[_]=ot,jt[D]=ut;var Ft={};Ft[T]=Ft[C]=Ft[O]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},Ft[N]=Ft[D]={constructor:!0,toString:!0,valueOf:!0},Ft[L]=Ft[A]=Ft[_]={constructor:!0,toString:!0},Ft[M]={constructor:!0},function(){var e=E.length;while(e--){var t=E[e];for(var n in Ft)Et.call(Ft,n)&&!Et.call(Ft[n],t)&&(Ft[n][t]=!1)}}(),qt.prototype=It.prototype;var Rt=It.support={};(function(){var e=function(){this.x=1},r={0:1,length:1},i=[];e.prototype={valueOf:1,y:1};for(var s in new e)i.push(s);for(s in arguments);Rt.argsClass=dt.call(arguments)==x,Rt.argsObject=arguments.constructor==st&&!(arguments instanceof n),Rt.enumErrorProps=xt.call(lt,"message")||xt.call(lt,"name"),Rt.enumPrototypes=xt.call(e,"prototype"),Rt.funcDecomp=!on(t.WinRTError)&&y.test(tt),Rt.funcNames=typeof W.name=="string",Rt.nonEnumArgs=s!=0,Rt.nonEnumShadows=!/valueOf/.test(i),Rt.ownLast=i[0]!="x",Rt.spliceObjects=(ft.splice.call(r,0,1),!r[0]),Rt.unindexedChars="x"[0]+st("x")[0]!="xx";try{Rt.nodeClass=dt.call(document)!=M||!!({toString:0}+"")}catch(o){Rt.nodeClass=!0}})(1),It.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:v,variable:"",imports:{_:It}};var Ut=function(e){var t="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";";e.array?(t+="\nvar length = iterable.length; index = -1;\nif ("+e.array+") {  ",Rt.unindexedChars&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+";\n  }\n}\nelse {  "):Rt.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+";\n    }\n  } else {  "),Rt.enumPrototypes&&(t+="\n  var skipProto = typeof iterable == 'function';\n  "),Rt.enumErrorProps&&(t+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var n=[];Rt.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),Rt.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))');if(e.useHas&&e.keys)t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }  ";else{t+="\n  for (index in iterable) {\n",e.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }    ";if(Rt.nonEnumShadows){t+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ";for(k=0;k<7;k++)t+="\n    index = '"+e.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",e.useHas||(t+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),t+=") {\n      "+e.loop+";\n    }      ";t+="\n  }    "}}if(e.array||Rt.nonEnumArgs)t+="\n}";return t+=e.bottom+";\nreturn result",t};Lt||(Xt=function(){function e(){}return function(n){if(zn(n)){e.prototype=n;var r=new e;e.prototype=null}return r||t.Object()}}());var un=kt?function(e,t){B.value=t,kt(e,"__bindData__",B)}:bi;Rt.argsClass||(ln=function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&Et.call(e,"callee")&&!xt.call(e,"callee")||!1});var cn=At||function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&dt.call(e)==T||!1},hn=nn({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),pn=_t?function(e){return zn(e)?Rt.enumPrototypes&&typeof e=="function"||Rt.nonEnumArgs&&e.length&&ln(e)?hn(e):_t(e):[]}:hn,dn={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:pn,loop:"if (callback(iterable[index], index, collection) === false) return result"},vn={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:pn,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},mn={top:"if (!objectTypes[typeof iterable]) return result;\n"+dn.top,array:!1},gn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yn=Hn(gn),bn=ot("("+pn(yn).join("|")+")","g"),wn=ot("["+pn(gn).join("")+"]","g"),En=nn(dn),Sn=nn(vn,{top:vn.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),Cn=nn(vn),An=nn(dn,mn,{useHas:!1}),Mn=nn(dn,mn);Un(/x/)&&(Un=function(e){return typeof e=="function"&&dt.call(e)==A});var $n=wt?function(e){if(!e||dt.call(e)!=M||!Rt.argsClass&&ln(e))return!1;var t=e.valueOf,n=on(t)&&(n=wt(t))&&wt(n);return n?e==n||wt(e)==n:an(e)}:an,or=en(function(e,t,n){Et.call(e,n)?e[n]++:e[n]=1}),pr=en(function(e,t,n){(Et.call(e,n)?e[n]:e[n]=[]).push(t)}),dr=en(function(e,t,n){e[n]=t}),br=mr,Ar=ar,wi=on(wi=I.now)&&wi||function(){return(new I).getTime()},Ei=Ht(a+"08")==8?Ht:function(e,t){return Ht(Kn(e)?e.replace(m,""):e,t||0)};return It.after=Yr,It.assign=Sn,It.at=ir,It.bind=Zr,It.bindAll=ei,It.bindKey=ti,It.chain=Ai,It.compact=Or,It.compose=ni,It.constant=pi,It.countBy=or,It.create=Nn,It.createCallback=di,It.curry=ri,It.debounce=ii,It.defaults=Cn,It.defer=si,It.delay=oi,It.difference=Mr,It.filter=ar,It.flatten=Hr,It.forEach=cr,It.forEachRight=hr,It.forIn=An,It.forInRight=On,It.forOwn=Mn,It.forOwnRight=_n,It.functions=Dn,It.groupBy=pr,It.indexBy=dr,It.initial=jr,It.intersection=Fr,It.invert=Hn,It.invoke=vr,It.keys=pn,It.map=mr,It.mapValues=Gn,It.max=gr,It.memoize=ui,It.merge=Yn,It.min=yr,It.omit=Zn,It.once=ai,It.pairs=er,It.partial=fi,It.partialRight=li,It.pick=tr,It.pluck=br,It.property=Si,It.pull=Rr,It.range=Ur,It.reject=Sr,It.remove=zr,It.rest=Wr,It.shuffle=Tr,It.sortBy=kr,It.tap=Oi,It.throttle=ci,It.times=Ci,It.toArray=Lr,It.transform=nr,It.union=Vr,It.uniq=$r,It.values=rr,It.where=Ar,It.without=Jr,It.wrap=hi,It.xor=Kr,It.zip=Qr,It.zipObject=Gr,It.collect=mr,It.drop=Wr,It.each=cr,It.eachRight=hr,It.extend=Sn,It.methods=Dn,It.object=Gr,It.select=ar,It.tail=Wr,It.unique=$r,It.unzip=Qr,gi(It),It.clone=xn,It.cloneDeep=Tn,It.contains=sr,It.escape=vi,It.every=ur,It.find=fr,It.findIndex=_r,It.findKey=kn,It.findLast=lr,It.findLastIndex=Dr,It.findLastKey=Ln,It.has=Pn,It.identity=mi,It.indexOf=Br,It.isArguments=ln,It.isArray=cn,It.isBoolean=Bn,It.isDate=jn,It.isElement=Fn,It.isEmpty=In,It.isEqual=qn,It.isFinite=Rn,It.isFunction=Un,It.isNaN=Wn,It.isNull=Xn,It.isNumber=Vn,It.isObject=zn,It.isPlainObject=$n,It.isRegExp=Jn,It.isString=Kn,It.isUndefined=Qn,It.lastIndexOf=qr,It.mixin=gi,It.noConflict=yi,It.noop=bi,It.now=wi,It.parseInt=Ei,It.random=xi,It.reduce=wr,It.reduceRight=Er,It.result=Ti,It.runInContext=tt,It.size=Nr,It.some=Cr,It.sortedIndex=Xr,It.template=Ni,It.unescape=ki,It.uniqueId=Li,It.all=ur,It.any=Cr,It.detect=fr,It.findWhere=fr,It.foldl=wr,It.foldr=Er,It.include=sr,It.inject=wr,gi(function(){var e={};return Mn(It,function(t,n){It.prototype[n]||(e[n]=t)}),e}(),!1),It.first=Pr,It.last=Ir,It.sample=xr,It.take=Pr,It.head=Pr,Mn(It,function(e,t){var n=t!=="sample";It.prototype[t]||(It.prototype[t]=function(t,r){var i=this.__chain__,s=e(this.__wrapped__,t,r);return!i&&(t==null||r&&(!n||typeof t!="function"))?s:new qt(s,i)})}),It.VERSION="2.4.1",It.prototype.chain=Mi,It.prototype.toString=_i,It.prototype.value=Di,It.prototype.valueOf=Di,En(["join","pop","shift"],function(e){var t=ft[e];It.prototype[e]=function(){var e=this.__chain__,n=t.apply(this.__wrapped__,arguments);return e?new qt(n,e):n}}),En(["push","reverse","sort","unshift"],function(e){var t=ft[e];It.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),En(["concat","slice","splice"],function(e){var t=ft[e];It.prototype[e]=function(){return new qt(t.apply(this.__wrapped__,arguments),this.__chain__)}}),Rt.spliceObjects||En(["pop","shift","splice"],function(e){var t=ft[e],n=e=="splice";It.prototype[e]=function(){var e=this.__chain__,r=this.__wrapped__,i=t.apply(r,arguments);return r.length===0&&delete r[0],e||n?new qt(i,e):i}}),It}var e,t=[],n=[],r=0,i={},s=+(new Date)+"",o=75,u=40,a=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",f=/\b__p \+= '';/g,l=/\b(__p \+=) '' \+/g,c=/(__e\(.*?\)|\b__t\)) \+\n'';/g,h=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,p=/\w*$/,d=/^\s*function[ \n\r\t]+\w/,v=/<%=([\s\S]+?)%>/g,m=RegExp("^["+a+"]*0+(?=.$)"),g=/($^)/,y=/\bthis\b/,b=/['\n\r\t\u2028\u2029\\]/g,w=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],E=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],S=0,x="[object Arguments]",T="[object Array]",N="[object Boolean]",C="[object Date]",L="[object Error]",A="[object Function]",O="[object Number]",M="[object Object]",_="[object RegExp]",D="[object String]",P={};P[A]=!1,P[x]=P[T]=P[N]=P[C]=P[O]=P[M]=P[_]=P[D]=!0;var H={leading:!1,maxWait:0,trailing:!1},B={configurable:!1,enumerable:!1,value:null,writable:!1},j={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},F={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},I={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},q=F[typeof window]&&window||this,R=F[typeof global]&&global;R&&(R.global===R||R.window===R)&&(q=R);var nt=tt();typeof define=="function"&&typeof define.amd=="object"&&define.amd&&define("underscore",[],function(){return nt})}.call(this),this.createjs=this.createjs||{},function(){var e=function(){throw"UID cannot be instantiated"};e._nextID=0,e.get=function(){return e._nextID++},createjs.UID=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.removeEventListener=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent},t._listeners=null,t.initialize=function(){},t.addEventListener=function(e,t){var n=this._listeners;n?this.removeEventListener(e,t):n=this._listeners={};var r=n[e];return r||(r=n[e]=[]),r.push(t),t},t.removeEventListener=function(e,t){var n=this._listeners;if(n){var r=n[e];if(r)for(var i=0,s=r.length;i<s;i++)if(r[i]==t){1==s?delete n[e]:r.splice(i,1);break}}},t.removeAllEventListeners=function(e){e?this._listeners&&delete this._listeners[e]:this._listeners=null},t.dispatchEvent=function(e,t){var n=!1,r=this._listeners;if(e&&r){"string"==typeof e&&(e={type:e}),e.target=t||this,r=r[e.type];if(!r)return n;for(var r=r.slice(),i=0,s=r.length;i<s;i++){var o=r[i];o instanceof Function?n=n||o.apply(null,[e]):o.handleEvent&&(n=n||o.handleEvent(e))}}return!!n},t.hasEventListener=function(e){var t=this._listeners;return!!t&&!!t[e]},t.toString=function(){return"[EventDispatcher]"},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"Ticker cannot be instantiated."};e.useRAF=!1,e.addEventListener=null,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e._listeners=null,e._pauseable=null,e._paused=!1,e._inited=!1,e._startTime=0,e._pausedTime=0,e._ticks=0,e._pausedTicks=0,e._interval=50,e._lastTime=0,e._times=null,e._tickTimes=null,e._rafActive=!1,e._timeoutID=null,e.addListener=function(t,n){null!=t&&(e.removeListener(t),e._pauseable[e._listeners.length]=null==n?!0:n,e._listeners.push(t))},e.init=function(){e._inited=!0,e._times=[],e._tickTimes=[],e._pauseable=[],e._listeners=[],e._times.push(e._lastTime=e._startTime=e._getTime()),e.setInterval(e._interval)},e.removeListener=function(t){var n=e._listeners;n&&(t=n.indexOf(t),-1!=t&&(n.splice(t,1),e._pauseable.splice(t,1)))},e.removeAllListeners=function(){e._listeners=[],e._pauseable=[]},e.setInterval=function(t){e._interval=t,e._inited&&e._setupTick()},e.getInterval=function(){return e._interval},e.setFPS=function(t){e.setInterval(1e3/t)},e.getFPS=function(){return 1e3/e._interval},e.getMeasuredFPS=function(t){return 2>e._times.length?-1:(null==t&&(t=e.getFPS()|0),t=Math.min(e._times.length-1,t),1e3/((e._times[0]-e._times[t])/t))},e.setPaused=function(t){e._paused=t},e.getPaused=function(){return e._paused},e.getTime=function(t){return e._getTime()-e._startTime-(t?e._pausedTime:0)},e.getTicks=function(t){return e._ticks-(t?e._pausedTicks:0)},e._handleAF=function(){e._rafActive=!1,e._setupTick(),e._getTime()-e._lastTime>=.97*(e._interval-1)&&e._tick()},e._handleTimeout=function(){e.timeoutID=null,e._setupTick(),e._tick()},e._setupTick=function(){if(!e._rafActive&&null==e.timeoutID){if(e.useRAF){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t){t(e._handleAF),e._rafActive=!0;return}}e.timeoutID=setTimeout(e._handleTimeout,e._interval)}},e._tick=function(){var t=e._getTime();e._ticks++;var n=t-e._lastTime,r=e._paused;r&&(e._pausedTicks++,e._pausedTime+=n),e._lastTime=t;for(var i=e._pauseable,s=e._listeners.slice(),o=s?s.length:0,u=0;u<o;u++){var a=s[u];null==a||r&&i[u]||(a.tick?a.tick(n,r):a instanceof Function&&a(n,r))}e.dispatchEvent({type:"tick",paused:r,delta:n,time:t,runTime:t-e._pausedTime});for(e._tickTimes.unshift(e._getTime()-t);100<e._tickTimes.length;)e._tickTimes.pop();for(e._times.unshift(t);100<e._times.length;)e._times.pop()};var t=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);e._getTime=function(){return t&&t.call(performance)||(new Date).getTime()},e.init(),createjs.Ticker=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r,i,s,o,u,a){this.initialize(e,t,n,r,i,s,o,u,a)},t=e.prototype;t.stageX=0,t.stageY=0,t.rawX=0,t.rawY=0,t.type=null,t.nativeEvent=null,t.onMouseMove=null,t.onMouseUp=null,t.target=null,t.pointerID=0,t.primary=!1,t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t.initialize=function(e,t,n,r,i,s,o,u,a){this.type=e,this.stageX=t,this.stageY=n,this.target=r,this.nativeEvent=i,this.pointerID=s,this.primary=o,this.rawX=null==u?t:u,this.rawY=null==a?n:a},t.clone=function(){return new e(this.type,this.stageX,this.stageY,this.target,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},t.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r,i,s){this.initialize(e,t,n,r,i,s)},t=e.prototype;e.identity=null,e.DEG_TO_RAD=Math.PI/180,t.a=1,t.b=0,t.c=0,t.d=1,t.tx=0,t.ty=0,t.alpha=1,t.shadow=null,t.compositeOperation=null,t.initialize=function(e,t,n,r,i,s){return null!=e&&(this.a=e),this.b=t||0,this.c=n||0,null!=r&&(this.d=r),this.tx=i||0,this.ty=s||0,this},t.prepend=function(e,t,n,r,i,s){var o=this.tx;if(1!=e||0!=t||0!=n||1!=r){var u=this.a,a=this.c;this.a=u*e+this.b*n,this.b=u*t+this.b*r,this.c=a*e+this.d*n,this.d=a*t+this.d*r}return this.tx=o*e+this.ty*n+i,this.ty=o*t+this.ty*r+s,this},t.append=function(e,t,n,r,i,s){var o=this.a,u=this.b,a=this.c,f=this.d;return this.a=e*o+t*a,this.b=e*u+t*f,this.c=n*o+r*a,this.d=n*u+r*f,this.tx=i*o+s*a+this.tx,this.ty=i*u+s*f+this.ty,this},t.prependMatrix=function(e){return this.prepend(e.a,e.b,e.c,e.d,e.tx,e.ty),this.prependProperties(e.alpha,e.shadow,e.compositeOperation),this},t.appendMatrix=function(e){return this.append(e.a,e.b,e.c,e.d,e.tx,e.ty),this.appendProperties(e.alpha,e.shadow,e.compositeOperation),this},t.prependTransform=function(t,n,r,i,s,o,u,a,f){if(s%360){var l=s*e.DEG_TO_RAD;s=Math.cos(l),l=Math.sin(l)}else s=1,l=0;if(a||f)this.tx-=a,this.ty-=f;return o||u?(o*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.prepend(s*r,l*r,-l*i,s*i,0,0),this.prepend(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),t,n)):this.prepend(s*r,l*r,-l*i,s*i,t,n),this},t.appendTransform=function(t,n,r,i,s,o,u,a,f){if(s%360){var l=s*e.DEG_TO_RAD;s=Math.cos(l),l=Math.sin(l)}else s=1,l=0;o||u?(o*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.append(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),t,n),this.append(s*r,l*r,-l*i,s*i,0,0)):this.append(s*r,l*r,-l*i,s*i,t,n);if(a||f)this.tx-=a*this.a+f*this.c,this.ty-=a*this.b+f*this.d;return this},t.rotate=function(e){var t=Math.cos(e);e=Math.sin(e);var n=this.a,r=this.c,i=this.tx;return this.a=n*t-this.b*e,this.b=n*e+this.b*t,this.c=r*t-this.d*e,this.d=r*e+this.d*t,this.tx=i*t-this.ty*e,this.ty=i*e+this.ty*t,this},t.skew=function(t,n){return t*=e.DEG_TO_RAD,n*=e.DEG_TO_RAD,this.append(Math.cos(n),Math.sin(n),-Math.sin(t),Math.cos(t),0,0),this},t.scale=function(e,t){return this.a*=e,this.d*=t,this.tx*=e,this.ty*=t,this},t.translate=function(e,t){return this.tx+=e,this.ty+=t,this},t.identity=function(){return this.alpha=this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.shadow=this.compositeOperation=null,this},t.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,s=e*r-t*n;return this.a=r/s,this.b=-t/s,this.c=-n/s,this.d=e/s,this.tx=(n*this.ty-r*i)/s,this.ty=-(e*this.ty-t*i)/s,this},t.isIdentity=function(){return 0==this.tx&&0==this.ty&&1==this.a&&0==this.b&&0==this.c&&1==this.d},t.decompose=function(t){null==t&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var n=Math.atan2(-this.c,this.d),r=Math.atan2(this.b,this.a);return n==r?(t.rotation=r/e.DEG_TO_RAD,0>this.a&&0<=this.d&&(t.rotation+=0>=t.rotation?180:-180),t.skewX=t.skewY=0):(t.skewX=n/e.DEG_TO_RAD,t.skewY=r/e.DEG_TO_RAD),t},t.reinitialize=function(e,t,n,r,i,s,o,u,a){return this.initialize(e,t,n,r,i,s),this.alpha=o||1,this.shadow=u,this.compositeOperation=a,this},t.appendProperties=function(e,t,n){return this.alpha*=e,this.shadow=t||this.shadow,this.compositeOperation=n||this.compositeOperation,this},t.prependProperties=function(e,t,n){return this.alpha*=e,this.shadow=this.shadow||t,this.compositeOperation=this.compositeOperation||n,this},t.clone=function(){var t=new e(this.a,this.b,this.c,this.d,this.tx,this.ty);return t.shadow=this.shadow,t.alpha=this.alpha,t.compositeOperation=this.compositeOperation,t},t.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},e.identity=new e(1,0,0,1,0,0),createjs.Matrix2D=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t){this.initialize(e,t)},t=e.prototype;t.x=0,t.y=0,t.initialize=function(e,t){this.x=null==e?0:e,this.y=null==t?0:t},t.clone=function(){return new e(this.x,this.y)},t.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r){this.initialize(e,t,n,r)},t=e.prototype;t.x=0,t.y=0,t.width=0,t.height=0,t.initialize=function(e,t,n,r){this.x=null==e?0:e,this.y=null==t?0:t,this.width=null==n?0:n,this.height=null==r?0:r},t.clone=function(){return new e(this.x,this.y,this.width,this.height)},t.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r,i,s,o){this.initialize(e,t,n,r,i,s,o)},t=e.prototype;t.target=null,t.overLabel=null,t.outLabel=null,t.downLabel=null,t.play=!1,t._isPressed=!1,t._isOver=!1,t.initialize=function(e,t,n,r,i,s,o){e.addEventListener&&(this.target=e,e.cursor="pointer",this.overLabel=null==n?"over":n,this.outLabel=null==t?"out":t,this.downLabel=null==r?"down":r,this.play=i,this.setEnabled(!0),this.handleEvent({}),s&&(o&&(s.actionsEnabled=!1,s.gotoAndStop&&s.gotoAndStop(o)),e.hitArea=s))},t.setEnabled=function(e){var t=this.target;e?(t.addEventListener("mouseover",this),t.addEventListener("mouseout",this),t.addEventListener("mousedown",this)):(t.removeEventListener("mouseover",this),t.removeEventListener("mouseout",this),t.removeEventListener("mousedown",this))},t.toString=function(){return"[ButtonHelper]"},t.handleEvent=function(e){var t=this.target,n=e.type;"mousedown"==n?(e.addEventListener("mouseup",this),this._isPressed=!0,e=this.downLabel):"mouseup"==n?(this._isPressed=!1,e=this._isOver?this.overLabel:this.outLabel):"mouseover"==n?(this._isOver=!0,e=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,e=this._isPressed?this.overLabel:this.outLabel),this.play?t.gotoAndPlay&&t.gotoAndPlay(e):t.gotoAndStop&&t.gotoAndStop(e)},createjs.ButtonHelper=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r){this.initialize(e,t,n,r)},t=e.prototype;e.identity=null,t.color=null,t.offsetX=0,t.offsetY=0,t.blur=0,t.initialize=function(e,t,n,r){this.color=e,this.offsetX=t,this.offsetY=n,this.blur=r},t.toString=function(){return"[Shadow]"},t.clone=function(){return new e(this.color,this.offsetX,this.offsetY,this.blur)},e.identity=new e("transparent",0,0,0),createjs.Shadow=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype;t.complete=!0,t.onComplete=null,t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._animations=null,t._frames=null,t._images=null,t._data=null,t._loadCount=0,t._frameHeight=0,t._frameWidth=0,t._numFrames=0,t._regX=0,t._regY=0,t.initialize=function(e){var t,n,r;if(null!=e){if(e.images&&0<(n=e.images.length)){r=this._images=[];for(t=0;t<n;t++){var i=e.images[t];if("string"==typeof i){var s=i,i=new Image;i.src=s}r.push(i),!i.getContext&&!i.complete&&(this._loadCount++,this.complete=!1,function(e){i.onload=function(){e._handleImageLoad()}}(this))}}if(null!=e.frames)if(e.frames instanceof Array){this._frames=[],r=e.frames,t=0;for(n=r.length;t<n;t++)s=r[t],this._frames.push({image:this._images[s[4]?s[4]:0],rect:new createjs.Rectangle(s[0],s[1],s[2],s[3]),regX:s[5]||0,regY:s[6]||0})}else n=e.frames,this._frameWidth=n.width,this._frameHeight=n.height,this._regX=n.regX||0,this._regY=n.regY||0,this._numFrames=n.count,0==this._loadCount&&this._calculateFrames();if(null!=(n=e.animations)){this._animations=[],this._data={};for(var o in n){e={name:o},s=n[o];if("number"==typeof s)r=e.frames=[s];else if(s instanceof Array)if(1==s.length)e.frames=[s[0]];else{e.frequency=s[3],e.next=s[2],r=e.frames=[];for(t=s[0];t<=s[1];t++)r.push(t)}else e.frequency=s.frequency,e.next=s.next,t=s.frames,r=e.frames="number"==typeof t?[t]:t.slice(0);e.next=2>r.length||0==e.next?null:null==e.next||1==e.next?o:e.next,e.frequency||(e.frequency=1),this._animations.push(o),this._data[o]=e}}}},t.getNumFrames=function(e){return null==e?this._frames?this._frames.length:this._numFrames:(e=this._data[e],null==e?0:e.frames.length)},t.getAnimations=function(){return this._animations.slice(0)},t.getAnimation=function(e){return this._data[e]},t.getFrame=function(e){var t;return this.complete&&this._frames&&(t=this._frames[e])?t:null},t.getFrameBounds=function(e){return(e=this.getFrame(e))?new createjs.Rectangle(-e.regX,-e.regY,e.rect.width,e.rect.height):null},t.toString=function(){return"[SpriteSheet]"},t.clone=function(){var t=new e;return t.complete=this.complete,t._animations=this._animations,t._frames=this._frames,t._images=this._images,t._data=this._data,t._frameHeight=this._frameHeight,t._frameWidth=this._frameWidth,t._numFrames=this._numFrames,t._loadCount=this._loadCount,t},t._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.onComplete&&this.onComplete(),this.dispatchEvent("complete"))},t._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];for(var e=0,t=this._frameWidth,n=this._frameHeight,r=0,i=this._images;r<i.length;r++){for(var s=i[r],o=(s.width+1)/t|0,u=(s.height+1)/n|0,u=0<this._numFrames?Math.min(this._numFrames-e,o*u):o*u,a=0;a<u;a++)this._frames.push({image:s,rect:new createjs.Rectangle(a%o*t,(a/o|0)*n,t,n),regX:this._regX,regY:this._regY});e+=u}this._numFrames=e}},createjs.SpriteSheet=e}(),this.createjs=this.createjs||{},function(){function e(e,t,n){this.f=e,this.params=t,this.path=null==n?!0:n}e.prototype.exec=function(e){this.f.apply(e,this.params)};var t=function(){this.initialize()},n=t.prototype;t.getRGB=function(e,t,n,r){return null!=e&&null==n&&(r=t,n=e&255,t=e>>8&255,e=e>>16&255),null==r?"rgb("+e+","+t+","+n+")":"rgba("+e+","+t+","+n+","+r+")"},t.getHSL=function(e,t,n,r){return null==r?"hsl("+e%360+","+t+"%,"+n+"%)":"hsla("+e%360+","+t+"%,"+n+"%,"+r+")"},t.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},t.STROKE_CAPS_MAP=["butt","round","square"],t.STROKE_JOINTS_MAP=["miter","round","bevel"],t._ctx=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d"),t.beginCmd=new e(t._ctx.beginPath,[],!1),t.fillCmd=new e(t._ctx.fill,[],!1),t.strokeCmd=new e(t._ctx.stroke,[],!1),n._strokeInstructions=null,n._strokeStyleInstructions=null,n._ignoreScaleStroke=!1,n._fillInstructions=null,n._instructions=null,n._oldInstructions=null,n._activeInstructions=null,n._active=!1,n._dirty=!1,n.initialize=function(){this.clear(),this._ctx=t._ctx},n.isEmpty=function(){return!(this._instructions.length||this._oldInstructions.length||this._activeInstructions.length)},n.draw=function(e){this._dirty&&this._updateInstructions();for(var t=this._instructions,n=0,r=t.length;n<r;n++)t[n].exec(e)},n.drawAsPath=function(e){this._dirty&&this._updateInstructions();for(var t,n=this._instructions,r=0,i=n.length;r<i;r++)((t=n[r]).path||0==r)&&t.exec(e)},n.moveTo=function(t,n){return this._activeInstructions.push(new e(this._ctx.moveTo,[t,n])),this},n.lineTo=function(t,n){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.lineTo,[t,n])),this},n.arcTo=function(t,n,r,i,s){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.arcTo,[t,n,r,i,s])),this},n.arc=function(t,n,r,i,s,o){return this._dirty=this._active=!0,null==o&&(o=!1),this._activeInstructions.push(new e(this._ctx.arc,[t,n,r,i,s,o])),this},n.quadraticCurveTo=function(t,n,r,i){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.quadraticCurveTo,[t,n,r,i])),this},n.bezierCurveTo=function(t,n,r,i,s,o){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.bezierCurveTo,[t,n,r,i,s,o])),this},n.rect=function(t,n,r,i){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.rect,[t,n,r,i])),this},n.closePath=function(){return this._active&&(this._dirty=!0,this._activeInstructions.push(new e(this._ctx.closePath,[]))),this},n.clear=function(){return this._instructions=[],this._oldInstructions=[],this._activeInstructions=[],this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=null,this._active=this._dirty=!1,this},n.beginFill=function(n){return this._active&&this._newPath(),this._fillInstructions=n?[new e(this._setProp,["fillStyle",n],!1),t.fillCmd]:null,this},n.beginLinearGradientFill=function(n,r,i,s,o,u){this._active&&this._newPath(),i=this._ctx.createLinearGradient(i,s,o,u),s=0;for(o=n.length;s<o;s++)i.addColorStop(r[s],n[s]);return this._fillInstructions=[new e(this._setProp,["fillStyle",i],!1),t.fillCmd],this},n.beginRadialGradientFill=function(n,r,i,s,o,u,a,f){this._active&&this._newPath(),i=this._ctx.createRadialGradient(i,s,o,u,a,f),s=0;for(o=n.length;s<o;s++)i.addColorStop(r[s],n[s]);return this._fillInstructions=[new e(this._setProp,["fillStyle",i],!1),t.fillCmd],this},n.beginBitmapFill=function(n,r,i){return this._active&&this._newPath(),n=this._ctx.createPattern(n,r||""),n=new e(this._setProp,["fillStyle",n],!1),this._fillInstructions=i?[n,new e(this._ctx.save,[],!1),new e(this._ctx.transform,[i.a,i.b,i.c,i.d,i.tx,i.ty],!1),t.fillCmd,new e(this._ctx.restore,[],!1)]:[n,t.fillCmd],this},n.endFill=function(){return this.beginFill()},n.setStrokeStyle=function(n,r,i,s,o){return this._active&&this._newPath(),this._strokeStyleInstructions=[new e(this._setProp,["lineWidth",null==n?"1":n],!1),new e(this._setProp,["lineCap",null==r?"butt":isNaN(r)?r:t.STROKE_CAPS_MAP[r]],!1),new e(this._setProp,["lineJoin",null==i?"miter":isNaN(i)?i:t.STROKE_JOINTS_MAP[i]],!1),new e(this._setProp,["miterLimit",null==s?"10":s],!1)],this._ignoreScaleStroke=o,this},n.beginStroke=function(t){return this._active&&this._newPath(),this._strokeInstructions=t?[new e(this._setProp,["strokeStyle",t],!1)]:null,this},n.beginLinearGradientStroke=function(t,n,r,i,s,o){this._active&&this._newPath(),r=this._ctx.createLinearGradient(r,i,s,o),i=0;for(s=t.length;i<s;i++)r.addColorStop(n[i],t[i]);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",r],!1)],this},n.beginRadialGradientStroke=function(t,n,r,i,s,o,u,a){this._active&&this._newPath(),r=this._ctx.createRadialGradient(r,i,s,o,u,a),i=0;for(s=t.length;i<s;i++)r.addColorStop(n[i],t[i]);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",r],!1)],this},n.beginBitmapStroke=function(t,n){this._active&&this._newPath();var r=this._ctx.createPattern(t,n||"");return this._strokeInstructions=[new e(this._setProp,["strokeStyle",r],!1)],this},n.endStroke=function(){return this.beginStroke(),this},n.curveTo=n.quadraticCurveTo,n.drawRect=n.rect,n.drawRoundRect=function(e,t,n,r,i){return this.drawRoundRectComplex(e,t,n,r,i,i,i,i),this},n.drawRoundRectComplex=function(t,n,r,i,s,o,u,a){var f=(r<i?r:i)/2,l=0,h=0,p=0,d=0;0>s&&(s*=l=-1),s>f&&(s=f),0>o&&(o*=h=-1),o>f&&(o=f),0>u&&(u*=p=-1),u>f&&(u=f),0>a&&(a*=d=-1),a>f&&(a=f),this._dirty=this._active=!0;var f=this._ctx.arcTo,v=this._ctx.lineTo;return this._activeInstructions.push(new e(this._ctx.moveTo,[t+r-o,n]),new e(f,[t+r+o*h,n-o*h,t+r,n+o,o]),new e(v,[t+r,n+i-u]),new e(f,[t+r+u*p,n+i+u*p,t+r-u,n+i,u]),new e(v,[t+a,n+i]),new e(f,[t-a*d,n+i+a*d,t,n+i-a,a]),new e(v,[t,n+s]),new e(f,[t-s*l,n-s*l,t+s,n,s]),new e(this._ctx.closePath)),this},n.drawCircle=function(e,t,n){return this.arc(e,t,n,0,2*Math.PI),this},n.drawEllipse=function(t,n,r,i){this._dirty=this._active=!0;var s=.5522848*(r/2),o=.5522848*(i/2),u=t+r,a=n+i;return r=t+r/2,i=n+i/2,this._activeInstructions.push(new e(this._ctx.moveTo,[t,i]),new e(this._ctx.bezierCurveTo,[t,i-o,r-s,n,r,n]),new e(this._ctx.bezierCurveTo,[r+s,n,u,i-o,u,i]),new e(this._ctx.bezierCurveTo,[u,i+o,r+s,a,r,a]),new e(this._ctx.bezierCurveTo,[r-s,a,t,i+o,t,i])),this},n.drawPolyStar=function(t,n,r,i,s,o){this._dirty=this._active=!0,null==s&&(s=0),s=1-s,o=null==o?0:o/(180/Math.PI);var u=Math.PI/i;this._activeInstructions.push(new e(this._ctx.moveTo,[t+Math.cos(o)*r,n+Math.sin(o)*r]));for(var a=0;a<i;a++)o+=u,1!=s&&this._activeInstructions.push(new e(this._ctx.lineTo,[t+Math.cos(o)*r*s,n+Math.sin(o)*r*s])),o+=u,this._activeInstructions.push(new e(this._ctx.lineTo,[t+Math.cos(o)*r,n+Math.sin(o)*r]));return this},n.decodePath=function(e){for(var n=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],r=[2,2,4,6,0],i=0,s=e.length,o=[],u=0,a=0,f=t.BASE_64;i<s;){var l=e.charAt(i),c=f[l],h=c>>3,p=n[h];if(!p||c&3)throw"bad path data (@"+i+"): "+l;l=r[h],h||(u=a=0),o.length=0,i++,c=(c>>2&1)+2;for(h=0;h<l;h++){var d=f[e.charAt(i)],v=d>>5?-1:1,d=(d&31)<<6|f[e.charAt(i+1)];3==c&&(d=d<<6|f[e.charAt(i+2)]),d=v*d/10,h%2?u=d+=u:a=d+=a,o[h]=d,i+=c}p.apply(this,o)}return this},n.clone=function(){var e=new t;return e._instructions=this._instructions.slice(),e._activeInstructions=this._activeInstructions.slice(),e._oldInstructions=this._oldInstructions.slice(),this._fillInstructions&&(e._fillInstructions=this._fillInstructions.slice()),this._strokeInstructions&&(e._strokeInstructions=this._strokeInstructions.slice()),this._strokeStyleInstructions&&(e._strokeStyleInstructions=this._strokeStyleInstructions.slice()),e._active=this._active,e._dirty=this._dirty,e},n.toString=function(){return"[Graphics]"},n.mt=n.moveTo,n.lt=n.lineTo,n.at=n.arcTo,n.bt=n.bezierCurveTo,n.qt=n.quadraticCurveTo,n.a=n.arc,n.r=n.rect,n.cp=n.closePath,n.c=n.clear,n.f=n.beginFill,n.lf=n.beginLinearGradientFill,n.rf=n.beginRadialGradientFill,n.bf=n.beginBitmapFill,n.ef=n.endFill,n.ss=n.setStrokeStyle,n.s=n.beginStroke,n.ls=n.beginLinearGradientStroke,n.rs=n.beginRadialGradientStroke,n.bs=n.beginBitmapStroke,n.es=n.endStroke,n.dr=n.drawRect,n.rr=n.drawRoundRect,n.rc=n.drawRoundRectComplex,n.dc=n.drawCircle,n.de=n.drawEllipse,n.dp=n.drawPolyStar,n.p=n.decodePath,n._updateInstructions=function(){this._instructions=this._oldInstructions.slice(),this._instructions.push(t.beginCmd),this._instructions.push.apply(this._instructions,this._activeInstructions),this._fillInstructions&&this._instructions.push.apply(this._instructions,this._fillInstructions),this._strokeInstructions&&(this._strokeStyleInstructions&&this._instructions.push.apply(this._instructions,this._strokeStyleInstructions),this._instructions.push.apply(this._instructions,this._strokeInstructions),this._ignoreScaleStroke?this._instructions.push(new e(this._ctx.save,[],!1),new e(this._ctx.setTransform,[1,0,0,1,0,0],!1),t.strokeCmd,new e(this._ctx.restore,[],!1)):this._instructions.push(t.strokeCmd))},n._newPath=function(){this._dirty&&this._updateInstructions(),this._oldInstructions=this._instructions,this._activeInstructions=[],this._active=this._dirty=!1},n._setProp=function(e,t){this[e]=t},createjs.Graphics=t}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;e.suppressCrossDomainErrors=!1,e._hitTestCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),e._hitTestCanvas.width=e._hitTestCanvas.height=1,e._hitTestContext=e._hitTestCanvas.getContext("2d"),e._nextCacheID=1,t.alpha=1,t.cacheCanvas=null,t.id=-1,t.mouseEnabled=!0,t.name=null,t.parent=null,t.regX=0,t.regY=0,t.rotation=0,t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.shadow=null,t.visible=!0,t.x=0,t.y=0,t.compositeOperation=null,t.snapToPixel=!1,t.onPress=null,t.onClick=null,t.onDoubleClick=null,t.onMouseOver=null,t.onMouseOut=null,t.onTick=null,t.filters=null,t.cacheID=0,t.mask=null,t.hitArea=null,t.cursor=null,t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._cacheOffsetX=0,t._cacheOffsetY=0,t._cacheScale=1,t._cacheDataURLID=0,t._cacheDataURL=null,t._matrix=null,t.initialize=function(){this.id=createjs.UID.get(),this._matrix=new createjs.Matrix2D},t.isVisible=function(){return!!this.visible&&0<this.alpha&&0!=this.scaleX&&0!=this.scaleY},t.draw=function(e,t){var n=this.cacheCanvas;if(t||!n)return!1;var r=this._cacheScale;return e.drawImage(n,this._cacheOffsetX,this._cacheOffsetY,n.width/r,n.height/r),!0},t.updateContext=function(e){var t,n=this.mask;n&&n.graphics&&!n.graphics.isEmpty()&&(t=n.getMatrix(n._matrix),e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),n.graphics.drawAsPath(e),e.clip(),t.invert(),e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty)),t=this._matrix.identity().appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY),createjs.Stage._snapToPixelEnabled&&this.snapToPixel?e.transform(t.a,t.b,t.c,t.d,t.tx+.5|0,t.ty+.5|0):e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),e.globalAlpha*=this.alpha,this.compositeOperation&&(e.globalCompositeOperation=this.compositeOperation),this.shadow&&this._applyShadow(e,this.shadow)},t.cache=function(e,t,n,r,i){i=i||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this.cacheCanvas.width=Math.ceil(n*i),this.cacheCanvas.height=Math.ceil(r*i),this._cacheOffsetX=e,this._cacheOffsetY=t,this._cacheScale=i||1,this.updateCache()},t.updateCache=function(t){var n=this.cacheCanvas,r=this._cacheScale,i=this._cacheOffsetX*r,s=this._cacheOffsetY*r;if(!n)throw"cache() must be called before updateCache()";var o=n.getContext("2d");o.save(),t||o.clearRect(0,0,n.width,n.height),o.globalCompositeOperation=t,o.setTransform(r,0,0,r,-i,-s),this.draw(o,!0),this._applyFilters(),o.restore(),this.cacheID=e._nextCacheID++},t.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=0,this._cacheScale=1},t.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},t.getStage=function(){for(var e=this;e.parent;)e=e.parent;return e instanceof createjs.Stage?e:null},t.localToGlobal=function(e,t){var n=this.getConcatenatedMatrix(this._matrix);return null==n?null:(n.append(1,0,0,1,e,t),new createjs.Point(n.tx,n.ty))},t.globalToLocal=function(e,t){var n=this.getConcatenatedMatrix(this._matrix);return null==n?null:(n.invert(),n.append(1,0,0,1,e,t),new createjs.Point(n.tx,n.ty))},t.localToLocal=function(e,t,n){return e=this.localToGlobal(e,t),n.globalToLocal(e.x,e.y)},t.setTransform=function(e,t,n,r,i,s,o,u,a){return this.x=e||0,this.y=t||0,this.scaleX=null==n?1:n,this.scaleY=null==r?1:r,this.rotation=i||0,this.skewX=s||0,this.skewY=o||0,this.regX=u||0,this.regY=a||0,this},t.getMatrix=function(e){return(e?e.identity():new createjs.Matrix2D).appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY).appendProperties(this.alpha,this.shadow,this.compositeOperation)},t.getConcatenatedMatrix=function(e){e?e.identity():e=new createjs.Matrix2D;for(var t=this;null!=t;)e.prependTransform(t.x,t.y,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.regX,t.regY).prependProperties(t.alpha,t.shadow,t.compositeOperation),t=t.parent;return e},t.hitTest=function(t,n){var r=e._hitTestContext,i=e._hitTestCanvas;return r.setTransform(1,0,0,1,-t,-n),this.draw(r),r=this._testHit(r),i.width=0,i.width=1,r},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.clone=function(){var t=new e;return this.cloneProps(t),t},t.toString=function(){return"[DisplayObject (name="+this.name+")]"},t.cloneProps=function(e){e.alpha=this.alpha,e.name=this.name,e.regX=this.regX,e.regY=this.regY,e.rotation=this.rotation,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.shadow=this.shadow,e.skewX=this.skewX,e.skewY=this.skewY,e.visible=this.visible,e.x=this.x,e.y=this.y,e.mouseEnabled=this.mouseEnabled,e.compositeOperation=this.compositeOperation,this.cacheCanvas&&(e.cacheCanvas=this.cacheCanvas.cloneNode(!0),e.cacheCanvas.getContext("2d").putImageData(this.cacheCanvas.getContext("2d").getImageData(0,0,this.cacheCanvas.width,this.cacheCanvas.height),0,0))},t._applyShadow=function(e,t){t=t||Shadow.identity,e.shadowColor=t.color,e.shadowOffsetX=t.offsetX,e.shadowOffsetY=t.offsetY,e.shadowBlur=t.blur},t._tick=function(e){this.onTick&&this.onTick.apply(this,e);var t=this._listeners;t&&t.tick&&this.dispatchEvent({type:"tick",params:e})},t._testHit=function(t){try{var n=1<t.getImageData(0,0,1,1).data[3]}catch(r){if(!e.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return n},t._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var e=this.filters.length,t=this.cacheCanvas.getContext("2d"),n=this.cacheCanvas.width,r=this.cacheCanvas.height,i=0;i<e;i++)this.filters[i].applyFilter(t,0,0,n,r)},t._hasMouseHandler=function(e){var t=this._listeners;return!!(e&1&&(this.onPress||this.onClick||this.onDoubleClick||t&&(this.hasEventListener("mousedown")||this.hasEventListener("click")||this.hasEventListener("dblclick")))||e&2&&(this.onMouseOver||this.onMouseOut||this.cursor||t&&(this.hasEventListener("mouseover")||this.hasEventListener("mouseout"))))},createjs.DisplayObject=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype=new createjs.DisplayObject;t.children=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(){this.DisplayObject_initialize(),this.children=[]},t.isVisible=function(){var e=this.cacheCanvas||this.children.length;return!!this.visible&&!!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;for(var n=this.children.slice(0),r=0,i=n.length;r<i;r++){var s=n[r];s.isVisible()&&(e.save(),s.updateContext(e),s.draw(e),e.restore())}return!0},t.addChild=function(e){if(null==e)return e;var t=arguments.length;if(1<t){for(var n=0;n<t;n++)this.addChild(arguments[n]);return arguments[t-1]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.push(e),e},t.addChildAt=function(e,t){var n=arguments.length,r=arguments[n-1];if(0>r||r>this.children.length)return arguments[n-2];if(2<n){for(var i=0;i<n-1;i++)this.addChildAt(arguments[i],r+i);return arguments[n-2]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),e},t.removeChild=function(e){var t=arguments.length;if(1<t){for(var n=!0,r=0;r<t;r++)n=n&&this.removeChild(arguments[r]);return n}return this.removeChildAt(this.children.indexOf(e))},t.removeChildAt=function(e){var t=arguments.length;if(1<t){for(var n=[],r=0;r<t;r++)n[r]=arguments[r];n.sort(function(e,t){return t-e});for(var i=!0,r=0;r<t;r++)i=i&&this.removeChildAt(n[r]);return i}if(0>e||e>this.children.length-1)return!1;if(t=this.children[e])t.parent=null;return this.children.splice(e,1),!0},t.removeAllChildren=function(){for(var e=this.children;e.length;)e.pop().parent=null},t.getChildAt=function(e){return this.children[e]},t.getChildByName=function(e){for(var t=this.children,n=0,r=t.length;n<r;n++)if(t[n].name==e)return t[n];return null},t.sortChildren=function(e){this.children.sort(e)},t.getChildIndex=function(e){return this.children.indexOf(e)},t.getNumChildren=function(){return this.children.length},t.swapChildrenAt=function(e,t){var n=this.children,r=n[e],i=n[t];r&&i&&(n[e]=i,n[t]=r)},t.swapChildren=function(e,t){for(var n=this.children,r,i,s=0,o=n.length;s<o&&(n[s]==e&&(r=s),n[s]==t&&(i=s),null==r||null==i);s++);s!=o&&(n[r]=t,n[i]=e)},t.setChildIndex=function(e,t){var n=this.children,r=n.length;if(!(e.parent!=this||0>t||t>=r)){for(var i=0;i<r&&n[i]!=e;i++);i==r||i==t||(n.splice(i,1),t<i&&t--,n.splice(t,0,e))}},t.contains=function(e){for(;e;){if(e==this)return!0;e=e.parent}return!1},t.hitTest=function(e,t){return null!=this.getObjectUnderPoint(e,t)},t.getObjectsUnderPoint=function(e,t){var n=[],r=this.localToGlobal(e,t);return this._getObjectsUnderPoint(r.x,r.y,n),n},t.getObjectUnderPoint=function(e,t){var n=this.localToGlobal(e,t);return this._getObjectsUnderPoint(n.x,n.y)},t.clone=function(t){var n=new e;this.cloneProps(n);if(t)for(var r=n.children=[],i=0,s=this.children.length;i<s;i++){var o=this.children[i].clone(t);o.parent=n,r.push(o)}return n},t.toString=function(){return"[Container (name="+this.name+")]"},t.DisplayObject__tick=t._tick,t._tick=function(e){for(var t=this.children.length-1;0<=t;t--){var n=this.children[t];n._tick&&n._tick(e)}this.DisplayObject__tick(e)},t._getObjectsUnderPoint=function(t,n,r,i){var s=createjs.DisplayObject._hitTestContext,o=createjs.DisplayObject._hitTestCanvas,u=this._matrix,a=this._hasMouseHandler(i);if(!this.hitArea&&this.cacheCanvas&&a&&(this.getConcatenatedMatrix(u),s.setTransform(u.a,u.b,u.c,u.d,u.tx-t,u.ty-n),s.globalAlpha=u.alpha,this.draw(s),this._testHit(s)))return o.width=0,o.width=1,this;for(var f=this.children.length-1;0<=f;f--){var l=this.children[f],h=l.hitArea;if(l.visible&&!(!h&&!l.isVisible()||i&&!l.mouseEnabled)){var p=i&&l._hasMouseHandler(i);if(l instanceof e&&(!h||!p)){if(a){if(l=l._getObjectsUnderPoint(t,n))return this}else if(l=l._getObjectsUnderPoint(t,n,r,i),!r&&l)return l}else if(!i||a||p)if(l.getConcatenatedMatrix(u),h&&(u.appendTransform(h.x,h.y,h.scaleX,h.scaleY,h.rotation,h.skewX,h.skewY,h.regX,h.regY),u.alpha=h.alpha),s.globalAlpha=u.alpha,s.setTransform(u.a,u.b,u.c,u.d,u.tx-t,u.ty-n),(h||l).draw(s),this._testHit(s)){o.width=0,o.width=1;if(a)return this;if(!r)return l;r.push(l)}}}return null},createjs.Container=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.Container;e._snapToPixelEnabled=!1,t.autoClear=!0,t.canvas=null,t.mouseX=0,t.mouseY=0,t.onMouseMove=null,t.onMouseUp=null,t.onMouseDown=null,t.snapToPixelEnabled=!1,t.mouseInBounds=!1,t.tickOnUpdate=!0,t.mouseMoveOutside=!1,t._pointerData=null,t._pointerCount=0,t._primaryPointerID=null,t._mouseOverIntervalID=null,t.Container_initialize=t.initialize,t.initialize=function(e){this.Container_initialize(),this.canvas="string"==typeof e?document.getElementById(e):e,this._pointerData={},this.enableDOMEvents(!0)},t.update=function(){if(this.canvas){this.autoClear&&this.clear(),e._snapToPixelEnabled=this.snapToPixelEnabled,this.tickOnUpdate&&this._tick(arguments.length?arguments:null);var t=this.canvas.getContext("2d");t.save(),this.updateContext(t),this.draw(t,!1),t.restore()}},t.tick=t.update,t.handleEvent=function(e){"tick"==e.type&&this.update(e)},t.clear=function(){if(this.canvas){var e=this.canvas.getContext("2d");e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this.canvas.width,this.canvas.height)}},t.toDataURL=function(e,t){t||(t="image/png");var n=this.canvas.getContext("2d"),r=this.canvas.width,i=this.canvas.height,s;if(e){s=n.getImageData(0,0,r,i);var o=n.globalCompositeOperation;n.globalCompositeOperation="destination-over",n.fillStyle=e,n.fillRect(0,0,r,i)}var u=this.canvas.toDataURL(t);return e&&(n.clearRect(0,0,r,i),n.putImageData(s,0,0),n.globalCompositeOperation=o),u},t.enableMouseOver=function(e){this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null);if(null==e)e=20;else if(0>=e)return;var t=this;this._mouseOverIntervalID=setInterval(function(){t._testMouseOver()},1e3/Math.min(50,e))},t.enableDOMEvents=function(e){null==e&&(e=!0);var t,n=this._eventListeners;if(!e&&n){for(t in n)e=n[t],e.t.removeEventListener(t,e.f);this._eventListeners=null}else if(e&&!n){e=window.addEventListener?window:document;var r=this,n=this._eventListeners={};n.mouseup={t:e,f:function(e){r._handleMouseUp(e)}},n.mousemove={t:e,f:function(e){r._handleMouseMove(e)}},n.dblclick={t:e,f:function(e){r._handleDoubleClick(e)}},(e=this.canvas)&&(n.mousedown={t:e,f:function(e){r._handleMouseDown(e)}});for(t in n)e=n[t],e.t.addEventListener(t,e.f)}},t.clone=function(){var t=new e(null);return this.cloneProps(t),t},t.toString=function(){return"[Stage (name="+this.name+")]"},t._getPointerData=function(e){var t=this._pointerData[e];return t||(t=this._pointerData[e]={x:0,y:0},null==this._primaryPointerID&&(this._primaryPointerID=e)),t},t._handleMouseMove=function(e){e||(e=window.event),this._handlePointerMove(-1,e,e.pageX,e.pageY)},t._handlePointerMove=function(e,t,n,r){if(this.canvas){var i=this._getPointerData(e),s=i.inBounds;this._updatePointerPosition(e,n,r);if(s||i.inBounds||this.mouseMoveOutside){if(this.onMouseMove||this.hasEventListener("stagemousemove"))n=new createjs.MouseEvent("stagemousemove",i.x,i.y,this,t,e,e==this._primaryPointerID,i.rawX,i.rawY),this.onMouseMove&&this.onMouseMove(n),this.dispatchEvent(n);(r=i.event)&&(r.onMouseMove||r.hasEventListener("mousemove"))&&(n=new createjs.MouseEvent("mousemove",i.x,i.y,r.target,t,e,e==this._primaryPointerID,i.rawX,i.rawY),r.onMouseMove&&r.onMouseMove(n),r.dispatchEvent(n,r.target))}}},t._updatePointerPosition=function(e,t,n){var r=this._getElementRect(this.canvas);t-=r.left,n-=r.top;var i=this.canvas.width,s=this.canvas.height;t/=(r.right-r.left)/i,n/=(r.bottom-r.top)/s,r=this._getPointerData(e),(r.inBounds=0<=t&&0<=n&&t<=i-1&&n<=s-1)?(r.x=t,r.y=n):this.mouseMoveOutside&&(r.x=0>t?0:t>i-1?i-1:t,r.y=0>n?0:n>s-1?s-1:n),r.rawX=t,r.rawY=n,e==this._primaryPointerID&&(this.mouseX=r.x,this.mouseY=r.y,this.mouseInBounds=r.inBounds)},t._getElementRect=function(e){var t;try{t=e.getBoundingClientRect()}catch(n){t={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}var r=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),i=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),s=window.getComputedStyle?getComputedStyle(e):e.currentStyle;e=parseInt(s.paddingLeft)+parseInt(s.borderLeftWidth);var o=parseInt(s.paddingTop)+parseInt(s.borderTopWidth),u=parseInt(s.paddingRight)+parseInt(s.borderRightWidth),s=parseInt(s.paddingBottom)+parseInt(s.borderBottomWidth);return{left:t.left+r+e,right:t.right+r-u,top:t.top+i+o,bottom:t.bottom+i-s}},t._handleMouseUp=function(e){this._handlePointerUp(-1,e,!1)},t._handlePointerUp=function(e,t,n){var r=this._getPointerData(e),i;if(this.onMouseMove||this.hasEventListener("stagemouseup"))i=new createjs.MouseEvent("stagemouseup",r.x,r.y,this,t,e,e==this._primaryPointerID,r.rawX,r.rawY),this.onMouseUp&&this.onMouseUp(i),this.dispatchEvent(i);var s=r.event;s&&(s.onMouseUp||s.hasEventListener("mouseup"))&&(i=new createjs.MouseEvent("mouseup",r.x,r.y,s.target,t,e,e==this._primaryPointerID,r.rawX,r.rawY),s.onMouseUp&&s.onMouseUp(i),s.dispatchEvent(i,s.target)),(s=r.target)&&(s.onClick||s.hasEventListener("click"))&&this._getObjectsUnderPoint(r.x,r.y,null,!0,this._mouseOverIntervalID?3:1)==s&&(i=new createjs.MouseEvent("click",r.x,r.y,s,t,e,e==this._primaryPointerID,r.rawX,r.rawY),s.onClick&&s.onClick(i),s.dispatchEvent(i)),n?(e==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[e]):r.event=r.target=null},t._handleMouseDown=function(e){this._handlePointerDown(-1,e,!1)},t._handlePointerDown=function(e,t,n,r){var i=this._getPointerData(e);null!=r&&this._updatePointerPosition(e,n,r);if(this.onMouseDown||this.hasEventListener("stagemousedown"))n=new createjs.MouseEvent("stagemousedown",i.x,i.y,this,t,e,e==this._primaryPointerID,i.rawX,i.rawY),this.onMouseDown&&this.onMouseDown(n),this.dispatchEvent(n);if(r=this._getObjectsUnderPoint(i.x,i.y,null,this._mouseOverIntervalID?3:1))if(i.target=r,r.onPress||r.hasEventListener("mousedown"))if(n=new createjs.MouseEvent("mousedown",i.x,i.y,r,t,e,e==this._primaryPointerID,i.rawX,i.rawY),r.onPress&&r.onPress(n),r.dispatchEvent(n),n.onMouseMove||n.onMouseUp||n.hasEventListener("mousemove")||n.hasEventListener("mouseup"))i.event=n},t._testMouseOver=function(){if(-1==this._primaryPointerID&&(this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var e=null;this.mouseInBounds&&(e=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,3),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var t=this._mouseOverTarget;if(t!=e){var n=this._getPointerData(-1);if(t&&(t.onMouseOut||t.hasEventListener("mouseout"))){var r=new createjs.MouseEvent("mouseout",n.x,n.y,t,null,-1,n.rawX,n.rawY);t.onMouseOut&&t.onMouseOut(r),t.dispatchEvent(r)}t&&(this.canvas.style.cursor=""),e&&(e.onMouseOver||e.hasEventListener("mouseover"))&&(r=new createjs.MouseEvent("mouseover",n.x,n.y,e,null,-1,n.rawX,n.rawY),e.onMouseOver&&e.onMouseOver(r),e.dispatchEvent(r)),e&&(this.canvas.style.cursor=e.cursor||""),this._mouseOverTarget=e}}},t._handleDoubleClick=function(e){var t=this._getPointerData(-1),n=this._getObjectsUnderPoint(t.x,t.y,null,this._mouseOverIntervalID?3:1);n&&(n.onDoubleClick||n.hasEventListener("dblclick"))&&(evt=new createjs.MouseEvent("dblclick",t.x,t.y,n,e,-1,!0,t.rawX,t.rawY),n.onDoubleClick&&n.onDoubleClick(evt),n.dispatchEvent(evt))},createjs.Stage=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.image=null,t.snapToPixel=!0,t.sourceRect=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){this.DisplayObject_initialize(),"string"==typeof e?(this.image=new Image,this.image.src=e):this.image=e},t.isVisible=function(){var e=this.cacheCanvas||this.image&&(this.image.complete||this.image.getContext||2<=this.image.readyState);return!!this.visible&&!!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;var n=this.sourceRect;return n?e.drawImage(this.image,n.x,n.y,n.width,n.height,0,0,n.width,n.height):e.drawImage(this.image,0,0),!0},t.clone=function(){var t=new e(this.image);return this.sourceRect&&(t.sourceRect=this.sourceRect.clone()),this.cloneProps(t),t},t.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.onAnimationEnd=null,t.currentFrame=-1,t.currentAnimation=null,t.paused=!0,t.spriteSheet=null,t.snapToPixel=!0,t.offset=0,t.currentAnimationFrame=0,t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._advanceCount=0,t._animation=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){this.DisplayObject_initialize(),this.spriteSheet=e},t.isVisible=function(){var e=this.cacheCanvas||this.spriteSheet.complete&&0<=this.currentFrame;return!!this.visible&&!!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;this._normalizeFrame();var n=this.spriteSheet.getFrame(this.currentFrame);if(n){var r=n.rect;return e.drawImage(n.image,r.x,r.y,r.width,r.height,-n.regX,-n.regY,r.width,r.height),!0}},t.play=function(){this.paused=!1},t.stop=function(){this.paused=!0},t.gotoAndPlay=function(e){this.paused=!1,this._goto(e)},t.gotoAndStop=function(e){this.paused=!0,this._goto(e)},t.advance=function(){this._animation?this.currentAnimationFrame++:this.currentFrame++,this._normalizeFrame()},t.getBounds=function(){return this.spriteSheet.getFrameBounds(this.currentFrame)},t.clone=function(){var t=new e(this.spriteSheet);return this.cloneProps(t),t},t.toString=function(){return"[BitmapAnimation (name="+this.name+")]"},t.DisplayObject__tick=t._tick,t._tick=function(e){var t=this._animation?this._animation.frequency:1;!this.paused&&0==(++this._advanceCount+this.offset)%t&&this.advance(),this.DisplayObject__tick(e)},t._normalizeFrame=function(){var e=this._animation,t=this.currentFrame,n=this.paused,r;if(e)if(r=e.frames.length,this.currentAnimationFrame>=r){var i=e.next;this._dispatchAnimationEnd(e,t,n,i,r-1)||(i?this._goto(i):(this.paused=!0,this.currentAnimationFrame=e.frames.length-1,this.currentFrame=e.frames[this.currentAnimationFrame]))}else this.currentFrame=e.frames[this.currentAnimationFrame];else r=this.spriteSheet.getNumFrames(),t>=r&&!this._dispatchAnimationEnd(e,t,n,r-1)&&(this.currentFrame=0)},t._dispatchAnimationEnd=function(e,t,n,r,i){var s=e?e.name:null;return this.onAnimationEnd&&this.onAnimationEnd(this,s,r),this.dispatchEvent({type:"animationend",name:s,next:r}),!n&&this.paused&&(this.currentAnimationFrame=i),this.paused!=n||this._animation!=e||this.currentFrame!=t},t.DisplayObject_cloneProps=t.cloneProps,t.cloneProps=function(e){this.DisplayObject_cloneProps(e),e.onAnimationEnd=this.onAnimationEnd,e.currentFrame=this.currentFrame,e.currentAnimation=this.currentAnimation,e.paused=this.paused,e.offset=this.offset,e._animation=this._animation,e.currentAnimationFrame=this.currentAnimationFrame},t._goto=function(e){if(isNaN(e)){var t=this.spriteSheet.getAnimation(e);t&&(this.currentAnimationFrame=0,this._animation=t,this.currentAnimation=e,this._normalizeFrame())}else this.currentAnimation=this._animation=null,this.currentFrame=e},createjs.BitmapAnimation=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.graphics=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){this.DisplayObject_initialize(),this.graphics=e?e:new createjs.Graphics},t.isVisible=function(){var e=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!this.visible&&!!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this.graphics.draw(e),!0)},t.clone=function(t){return t=new e(t&&this.graphics?this.graphics.clone():this.graphics),this.cloneProps(t),t},t.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype=new createjs.DisplayObject;e._workingContext=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d"),t.text="",t.font=null,t.color="#000",t.textAlign="left",t.textBaseline="top",t.maxWidth=null,t.outline=!1,t.lineHeight=0,t.lineWidth=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e,t,n){this.DisplayObject_initialize(),this.text=e,this.font=t,this.color=n?n:"#000"},t.isVisible=function(){var e=this.cacheCanvas||null!=this.text&&""!==this.text;return!!this.visible&&!!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&e)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this.outline?e.strokeStyle=this.color:e.fillStyle=this.color,e.font=this.font,e.textAlign=this.textAlign||"start",e.textBaseline=this.textBaseline||"alphabetic",this._drawText(e),!0)},t.getMeasuredWidth=function(){return this._getWorkingContext().measureText(this.text).width},t.getMeasuredLineHeight=function(){return 1.2*this._getWorkingContext().measureText("M").width},t.getMeasuredHeight=function(){return this._drawText()*(this.lineHeight||this.getMeasuredLineHeight())},t.clone=function(){var t=new e(this.text,this.font,this.color);return this.cloneProps(t),t},t.toString=function(){return"[Text (text="+(20<this.text.length?this.text.substr(0,17)+"...":this.text)+")]"},t.DisplayObject_cloneProps=t.cloneProps,t.cloneProps=function(e){this.DisplayObject_cloneProps(e),e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,e.maxWidth=this.maxWidth,e.outline=this.outline,e.lineHeight=this.lineHeight,e.lineWidth=this.lineWidth},t._getWorkingContext=function(){var t=e._workingContext;return t.font=this.font,t.textAlign=this.textAlign||"start",t.textBaseline=this.textBaseline||"alphabetic",t},t._drawText=function(e){var t=!!e;t||(e=this._getWorkingContext());for(var n=String(this.text).split(/(?:\r\n|\r|\n)/),r=this.lineHeight||this.getMeasuredLineHeight(),i=0,s=0,o=n.length;s<o;s++){var u=e.measureText(n[s]).width;if(null==this.lineWidth||u<this.lineWidth)t&&this._drawTextLine(e,n[s],i*r);else{for(var u=n[s].split(/(\s)/),a=u[0],f=1,l=u.length;f<l;f+=2)e.measureText(a+u[f]+u[f+1]).width>this.lineWidth?(t&&this._drawTextLine(e,a,i*r),i++,a=u[f+1]):a+=u[f]+u[f+1];t&&this._drawTextLine(e,a,i*r)}i++}return i},t._drawTextLine=function(e,t,n){this.outline?e.strokeText(t,0,n,this.maxWidth||65535):e.fillText(t,0,n,this.maxWidth||65535)},createjs.Text=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"SpriteSheetUtils cannot be instantiated"};e._workingCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),e._workingContext=e._workingCanvas.getContext("2d"),e.addFlippedFrames=function(t,n,r,i){if(n||r||i){var s=0;n&&e._flip(t,++s,!0,!1),r&&e._flip(t,++s,!1,!0),i&&e._flip(t,++s,!0,!0)}},e.extractFrame=function(t,n){isNaN(n)&&(n=t.getAnimation(n).frames[0]);var r=t.getFrame(n);if(!r)return null;var i=r.rect,s=e._workingCanvas;return s.width=i.width,s.height=i.height,e._workingContext.drawImage(r.image,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r=new Image,r.src=s.toDataURL("image/png"),r},e.mergeAlpha=function(e,t,n){n||(n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),n.width=Math.max(t.width,e.width),n.height=Math.max(t.height,e.height);var r=n.getContext("2d");return r.save(),r.drawImage(e,0,0),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),r.restore(),n},e._flip=function(t,n,r,i){for(var s=t._images,o=e._workingCanvas,u=e._workingContext,a=s.length/n,f=0;f<a;f++){var l=s[f];l.__tmp=f,o.width=0,o.width=l.width,o.height=l.height,u.setTransform(r?-1:1,0,0,i?-1:1,r?l.width:0,i?l.height:0),u.drawImage(l,0,0);var h=new Image;h.src=o.toDataURL("image/png"),h.width=l.width,h.height=l.height,s.push(h)}u=t._frames,o=u.length/n;for(f=0;f<o;f++){var l=u[f],p=l.rect.clone(),h=s[l.image.__tmp+a*n],d={image:h,rect:p,regX:l.regX,regY:l.regY};r&&(p.x=h.width-p.x-p.width,d.regX=p.width-l.regX),i&&(p.y=h.height-p.y-p.height,d.regY=p.height-l.regY),u.push(d)}r="_"+(r?"h":"")+(i?"v":""),i=t._animations,t=t._data,s=i.length/n;for(f=0;f<s;f++){u=i[f],l=t[u],a={name:u+r,frequency:l.frequency,next:l.next,frames:[]},l.next&&(a.next+=r),u=l.frames,l=0;for(h=u.length;l<h;l++)a.frames.push(u[l]+o*n);t[a.name]=a,i.push(a.name)}},createjs.SpriteSheetUtils=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;e.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",e.ERR_RUNNING="a build is already running",t.maxWidth=2048,t.maxHeight=2048,t.spriteSheet=null,t.scale=1,t.padding=1,t.timeSlice=.3,t.progress=-1,t.onComplete=null,t.onProgress=null,t.addEventListener=null,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._frames=null,t._animations=null,t._data=null,t._nextFrameIndex=0,t._index=0,t._timerID=null,t._scale=1,t.initialize=function(){this._frames=[],this._animations={}},t.addFrame=function(t,n,r,i,s,o){if(this._data)throw e.ERR_RUNNING;return n=n||t.bounds||t.nominalBounds,!n&&t.getBounds&&(n=t.getBounds()),n?(r=r||1,this._frames.push({source:t,sourceRect:n,scale:r,funct:i,params:s,scope:o,index:this._frames.length,height:n.height*r})-1):null},t.addAnimation=function(t,n,r,i){if(this._data)throw e.ERR_RUNNING;this._animations[t]={frames:n,next:r,frequency:i}},t.addMovieClip=function(t,n,r){if(this._data)throw e.ERR_RUNNING;var i=t.frameBounds,s=n||t.bounds||t.nominalBounds;!s&&t.getBounds&&(s=t.getBounds());if(!s&&!i)return null;n=this._frames.length;for(var o=t.timeline.duration,u=0;u<o;u++)this.addFrame(t,i&&i[u]?i[u]:s,r,function(e){var t=this.actionsEnabled;this.actionsEnabled=!1,this.gotoAndStop(e),this.actionsEnabled=t},[u],t);u=t.timeline._labels,t=[];for(var a in u)t.push({index:u[a],label:a});if(t.length){t.sort(function(e,t){return e.index-t.index}),u=0;for(a=t.length;u<a;u++){r=t[u].label;for(var i=n+(u==a-1?o:t[u+1].index),s=[],f=n+t[u].index;f<i;f++)s.push(f);this.addAnimation(r,s,!0)}}},t.build=function(){if(this._data)throw e.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},t.buildAsync=function(t){if(this._data)throw e.ERR_RUNNING;this.timeSlice=t,this._startBuild();var n=this;this._timerID=setTimeout(function(){n._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},t.stopAsync=function(){clearTimeout(this._timerID),this._data=null},t.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},t.toString=function(){return"[SpriteSheetBuilder]"},t._startBuild=function(){var t=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var n=[];this._data={images:[],frames:n,animations:this._animations};var r=this._frames.slice();r.sort(function(e,t){return e.height<=t.height?-1:1});if(r[r.length-1].height+2*t>this.maxHeight)throw e.ERR_DIMENSIONS;for(var i=0,s=0,o=0;r.length;){var u=this._fillRow(r,i,o,n,t);u.w>s&&(s=u.w),i+=u.h;if(!u.h||!r.length){var a=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");a.width=this._getSize(s,this.maxWidth),a.height=this._getSize(i,this.maxHeight),this._data.images[o]=a,u.h||(s=i=0,o++)}}},t._getSize=function(e,t){for(var n=4;Math.pow(2,++n)<e;);return Math.min(t,Math.pow(2,n))},t._fillRow=function(t,n,r,i,s){var o=this.maxWidth,u=this.maxHeight;n+=s;for(var u=u-n,a=s,f=0,l=t.length-1;0<=l;l--){var h=t[l],p=this._scale*h.scale,d=h.sourceRect,v=h.source,m=Math.floor(p*d.x-s),g=Math.floor(p*d.y-s),y=Math.ceil(p*d.height+2*s),d=Math.ceil(p*d.width+2*s);if(d>o)throw e.ERR_DIMENSIONS;y>u||a+d>o||(h.img=r,h.rect=new createjs.Rectangle(a,n,d,y),f=f||y,t.splice(l,1),i[h.index]=[a,n,d,y,r,Math.round(-m+p*v.regX-s),Math.round(-g+p*v.regY-s)],a+=d)}return{w:a,h:f}},t._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.onComplete&&this.onComplete(this),this.dispatchEvent("complete")},t._run=function(){for(var e=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),t=(new Date).getTime()+e,n=!1;t>(new Date).getTime();)if(!this._drawNext()){n=!0;break}if(n)this._endBuild();else{var r=this;this._timerID=setTimeout(function(){r._run()},50-e)}e=this.progress=this._index/this._frames.length,this.onProgress&&this.onProgress(this,e),this.dispatchEvent({type:"progress",progress:e})},t._drawNext=function(){var e=this._frames[this._index],t=e.scale*this._scale,n=e.rect,r=e.sourceRect,i=this._data.images[e.img].getContext("2d");return e.funct&&e.funct.apply(e.scope,e.params),i.save(),i.beginPath(),i.rect(n.x,n.y,n.width,n.height),i.clip(),i.translate(Math.ceil(n.x-r.x*t),Math.ceil(n.y-r.y*t)),i.scale(t,t),e.source.draw(i),i.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.htmlElement=null,t._oldMtx=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){"string"==typeof e&&(e=document.getElementById(e)),this.DisplayObject_initialize(),this.mouseEnabled=!1,this.htmlElement=e,e=e.style,e.position="absolute",e.transformOrigin=e.WebkitTransformOrigin=e.msTransformOrigin=e.MozTransformOrigin=e.OTransformOrigin="0% 0%"},t.isVisible=function(){return null!=this.htmlElement},t.draw=function(){if(null!=this.htmlElement){var e=this.getConcatenatedMatrix(this._matrix),t=this.htmlElement.style;if(!this.visible)return!0;t.visibility="visible";var n=this._oldMtx||{};n.alpha!=e.alpha&&(t.opacity=""+e.alpha,n.alpha=e.alpha);if(n.tx!=e.tx||n.ty!=e.ty||n.a!=e.a||n.b!=e.b||n.c!=e.c||n.d!=e.d)t.transform=t.WebkitTransform=t.OTransform=t.msTransform=["matrix("+e.a,e.b,e.c,e.d,e.tx+.5|0,(e.ty+.5|0)+")"].join(),t.MozTransform=["matrix("+e.a,e.b,e.c,e.d,(e.tx+.5|0)+"px",(e.ty+.5|0)+"px)"].join(),this._oldMtx=e.clone();return!0}},t.cache=function(){},t.uncache=function(){},t.updateCache=function(){},t.hitTest=function(){},t.localToGlobal=function(){},t.globalToLocal=function(){},t.localToLocal=function(){},t.clone=function(){throw"DOMElement cannot be cloned."},t.toString=function(){return"[DOMElement (name="+this.name+")]"},t.DisplayObject__tick=t._tick,t._tick=function(e){this.htmlElement.style.visibility="hidden",this.DisplayObject__tick(e)},createjs.DOMElement=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;t.initialize=function(){},t.getBounds=function(){return new createjs.Rectangle(0,0,0,0)},t.applyFilter=function(){},t.toString=function(){return"[Filter]"},t.clone=function(){return new e},createjs.Filter=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"Touch cannot be instantiated"};e.isSupported=function(){return"ontouchstart"in window||window.navigator.msPointerEnabled},e.enable=function(t,n,r){return!t||!t.canvas||!e.isSupported()?!1:(t.__touch={pointers:{},multitouch:!n,preventDefault:!r,count:0},"ontouchstart"in window?e._IOS_enable(t):window.navigator.msPointerEnabled&&e._IE_enable(t),!0)},e.disable=function(t){t&&("ontouchstart"in window?e._IOS_disable(t):window.navigator.msPointerEnabled&&e._IE_disable(t))},e._IOS_enable=function(t){var n=t.canvas,r=t.__touch.f=function(n){e._IOS_handleEvent(t,n)};n.addEventListener("touchstart",r,!1),n.addEventListener("touchmove",r,!1),n.addEventListener("touchend",r,!1),n.addEventListener("touchcancel",r,!1)},e._IOS_disable=function(e){var t=e.canvas;t&&(e=e.__touch.f,t.removeEventListener("touchstart",e,!1),t.removeEventListener("touchmove",e,!1),t.removeEventListener("touchend",e,!1),t.removeEventListener("touchcancel",e,!1))},e._IOS_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();for(var n=t.changedTouches,r=t.type,i=0,s=n.length;i<s;i++){var o=n[i],u=o.identifier;o.target==e.canvas&&("touchstart"==r?this._handleStart(e,u,t,o.pageX,o.pageY):"touchmove"==r?this._handleMove(e,u,t,o.pageX,o.pageY):("touchend"==r||"touchcancel"==r)&&this._handleEnd(e,u,t))}}},e._IE_enable=function(t){var n=t.canvas,r=t.__touch.f=function(n){e._IE_handleEvent(t,n)};n.addEventListener("MSPointerDown",r,!1),window.addEventListener("MSPointerMove",r,!1),window.addEventListener("MSPointerUp",r,!1),window.addEventListener("MSPointerCancel",r,!1),t.__touch.preventDefault&&(n.style.msTouchAction="none"),t.__touch.activeIDs={}},e._IE_disable=function(e){var t=e.__touch.f;window.removeEventListener("MSPointerMove",t,!1),window.removeEventListener("MSPointerUp",t,!1),window.removeEventListener("MSPointerCancel",t,!1),e.canvas&&e.canvas.removeEventListener("MSPointerDown",t,!1)},e._IE_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();var n=t.type,r=t.pointerId,i=e.__touch.activeIDs;if("MSPointerDown"==n)t.srcElement==e.canvas&&(i[r]=!0,this._handleStart(e,r,t,t.pageX,t.pageY));else if(i[r])if("MSPointerMove"==n)this._handleMove(e,r,t,t.pageX,t.pageY);else if("MSPointerUp"==n||"MSPointerCancel"==n)delete i[r],this._handleEnd(e,r,t)}},e._handleStart=function(e,t,n,r,i){var s=e.__touch;if(s.multitouch||!s.count){var o=s.pointers;o[t]||(o[t]=!0,s.count++,e._handlePointerDown(t,n,r,i))}},e._handleMove=function(e,t,n,r,i){e.__touch.pointers[t]&&e._handlePointerMove(t,n,r,i)},e._handleEnd=function(e,t,n){var r=e.__touch,i=r.pointers;i[t]&&(r.count--,e._handlePointerUp(t,n,!0),delete i[t])},createjs.Touch=e}(),function(){var e=this.createjs=this.createjs||{},e=e.EaselJS=e.EaselJS||{};e.version="0.6.0",e.buildDate="Tue, 12 Feb 2013 21:12:22 GMT"}(),define("createjs",function(e){return function(){var t,n;return t||e.createjs}}(this)),define("distanceutils",[],function(){var e=function(e,t){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)};return{distanceSquared:e,getDistance:function(t,n){return Math.sqrt(e(t,n))}}}),define("mathutils",["jquery","lodash","distanceutils"],function(e,t,n){var r=Math.PI,i=2*Math.PI,s=360/i,o=i/360,u=2.54,a=1/u,f=306,l=1/f,c=f*a,h=1/c,p=function(e){f=e,l=1/f,c=f*a,h=1/c},d=function(e){return e?e<0?-1:1:0},v=function(e,t){var n,r=e.length;for(n=0;n<r;n++)if(t<e[n]){e.splice(n,0,t);return}e.push(t)},m=function(e){var t=e*s;return t%=360,t<0&&(t=360+t),t},g=function(e,t){return e.left<t.right&&t.left<e.right&&e.top<t.bottom&&t.top<e.bottom},y=function(e,t,n){return e.left<=t&&e.right>=t&&e.top<=n&&e.bottom>=n},b=function(e,t,n){return e===t?n===e:n>e&&n<t},w=function(e,t,n,r,i){e.left=t,e.top=n,e.right=r,e.bottom=i},E=function(e){var t;e.left>e.right&&(t=e.left,e.left=e.right,e.right=t),e.top>e.bottom&&(t=e.top,e.top=e.bottom,e.bottom=t)},S=function(e,t,n){return e.topLine.a*t+e.topLine.b*n>e.topLine.c&&e.rightLine.a*t+e.rightLine.b*n<e.rightLine.c&&e.bottomLine.a*t+e.bottomLine.b*n<e.bottomLine.c&&e.leftLine.a*t+e.leftLine.b*n>e.leftLine.c},x=function(e,n,r){var i={};return i.a=-n.y+e.y,i.b=n.x-e.x,i.c=e.y*n.x-n.y*e.x,!t.isUndefined(r)&&(r==="A"&&i.a<0||r==="B"&&i.b<0||i.a===0&&i.b<0||i.b===0&&i.a<0)&&(i.a=-i.a,i.b=-i.b,i.c=-i.c),i},T=function(e,t,n){return n>=e&&n<=t},N=function(e,t){return t>e&&(e+=360),e},C=function(e,t,n){return t-e>=360?!0:(n=N(n,e),T(e,t,n))},k=function(e,t){var n,r,i;return(n=e.a*t.b-e.b*t.a)===0?null:(r=(e.c*t.b-t.c*e.b)/n,i=(-e.c*t.a+t.c*e.a)/n,{x:r,y:i})},L=function(e,t,n,r,i,s){var o={},u={},a;return w(o,e.x,e.y,t.x,t.y),E(o),w(u,r.x,r.y,i.x,i.y),E(u),g(o,u)?(a=k(n,s),a===null||!y(o,a.x,a.y)||!y(u,a.x,a.y)?null:a):null},A=function(e,t,r,i,s,o){r===0?(i.x=e,i.y=t):n.distanceSquared(e,t,o.x,o.y)<n.distanceSquared(i.x,i.y,o.x,o.y)?(s.x=i.x,s.y=i.y,i.x=e,i.y=t):(s.x=e,s.y=t)},O=function(e,t,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g,S;o=e.x,u=e.y,a=t.x,f=t.y,p={},w(p,o,u,a,f),E(p),l=u-f,c=a-o,h=a*u-f*o,m=0;if(c!==0){if(b(p.left,p.right,n.left)){v=(h-l*n.left)/c;if(b(n.top,n.bottom,v)){if(!s)return 1;d=n.left,A(d,v,m,r,i,e,t),m++}}if(b(p.left,p.right,n.right)){v=(h-l*n.right)/c;if(b(n.top,n.bottom,v)){if(!s)return 1;d=n.right,A(d,v,m,r,i,e,t),m++}}}if(l!==0){if(b(p.top,p.bottom,n.top)){d=(h-c*n.top)/l;if(b(n.left,n.right,d)){if(!s)return 1;v=n.top,A(d,v,m,r,i,e,t),m++}}if(b(p.top,p.bottom,n.bottom)){d=(h-c*n.bottom)/l;if(b(n.left,n.right,d)){if(!s)return 1;v=n.bottom,A(d,v,m,r,i,e,t),m++}}if(m===0){g=y(n,o,u),S=y(n,a,f);if(g!==S){if(!s)return 1;m=1,g?r.set(e):r.set(t)}}}return m},M=function(e,t,n,r,i,s,o,u){var a=!1;return b(i,s,r)&&(u?v(o,e):C(t,n,e)&&(a=!0)),a},_=function(e,t,n,s){var o,u,a,f,l,c,h,p,d,v;o=e.getWidth()/2,u=e.getHeight()/2,a=0,f=a+360;if(o>0){if(b(-o,o,t.left)){l=Math.acos(t.left/o),c=i-l,d=u*Math.sin(l),v=u*Math.sin(c),l=m(l),c=m(c);if(M(l,a,f,d,t.top,t.bottom,n,s))return!0;if(M(c,a,f,v,t.top,t.bottom,n,s))return!0}if(b(-o,o,t.right)){l=Math.acos(t.right/o),c=i-l,d=u*Math.sin(l),v=u*Math.sin(c),l=m(l),c=m(c);if(M(l,a,f,d,t.top,t.bottom,n,s))return!0;if(M(c,a,f,v,t.top,t.bottom,n,s))return!0}}if(u>0){if(b(-u,u,t.top)){l=Math.asin(t.top/u),c=r-l,h=o*Math.cos(l),p=o*Math.cos(c),l=m(l),c=m(c);if(M(l,a,f,h,t.left,t.right,n,s))return!0;if(M(c,a,f,p,t.left,t.right,n,s))return!0}if(b(-u,u,t.bottom)){l=Math.asin(t.bottom/u),c=r-l,h=o*Math.cos(l),p=o*Math.cos(c),l=m(l),c=m(c);if(M(l,a,f,h,t.left,t.right,n,s))return!0;if(M(c,a,f,p,t.left,t.right,n,s))return!0}}return s&&n.length!==0},D=function(e,t,n){return e.left===e.right?t===e.left&&b(e.top,e.bottom,n):e.top===e.bottom?n===e.top&&b(e.left,e.right,t):y(e,t,n)},P=function(e,t,n,r,i,o,u,a){var f,l,c;return f=!1,D(n,e,t)&&(l=Math.acos(e/r),c=d(Math.sin(l)),l=s*l,c===d(t)?a?v(u,l):C(i,o,l)&&(f=!0):(l=360-l,a?v(u,l):C(i,o,l)&&(f=!0))),f},H=function(e,t,n,r){var i,s;return i=t*Math.cos(r),s=n*Math.sin(r),S(e,i,s)},B=function(e,t,n){var r,i,s,u,a,f,l;r=t.getWidth()/2,i=t.getHeight()/2,s=0,u=s+360,a=u%360,f=o*(e[0]+e[1])/2,H(n,r,i,f)&&(l=e[0],e.splice(0,1),e.push(360+l))},j=function(e,t,n,r,s){var o,u,a,f,l,c,h,p,d,v,g,y,S,x,T,N,C,k,L,A,O,_;o=e.getWidth()/2,u=e.getHeight()/2,a=0,f=a+360,l=t.x,c=t.y,h=n.x,p=n.y,d={},w(d,l,c,h,p),E(d);if(h-l===0){if(b(-o,o,l)){v=Math.acos(l/o),g=i-v,y=u*Math.sin(v),S=u*Math.sin(g),v=m(v),g=m(g);if(M(v,a,f,y,d.top,d.bottom,r,s))return!0;if(M(g,a,f,S,d.top,d.bottom,r,s))return!0}return!1}x=(p-c)/(h-l),T=c-x*l,N=u*u+o*o*x*x,C=2*o*o*T*x,k=o*o*(T*T-u*u),L=C*C-4*N*k;if(L<0)return!1;A=Math.sqrt(L),O=(-C-A)/(2*N),_=x*O+T;if(P(O,_,d,o,a,f,r,s))return!0;if(A>0){O=(-C+A)/(2*N),_=x*O+T;if(P(O,_,d,o,a,f,r,s))return!0}return r!==null&&!r.isEmpty()},F=function(e,t,n,r){return j(e,t.bottomLeft,t.topLeft,n,r)&&!r?!0:j(e,t.topLeft,t.topRight,n,r)&&!r?!0:j(e,t.topRight,t.bottomRight,n,r)&&!r?!0:j(e,t.bottomRight,t.bottomLeft,n,r)&&!r?!0:(r&&n.length!==0&&B(n,e,t),n!==null&&!n.isEmpty())};return e(document).on("ready",function(){var e=document.getElementById("dpi_calc_div");e&&p((e.offsetWidth+e.offsetHeight)/2)}),{getCenter:function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},signum:d,convertRadiansToDegrees:m,pxToCm:function(e){return e*h},cmToPx:function(e){return e*c},rectsIntersect:g,doesRectNonStrictlyContainPoint:D,doesRectContainPoint:y,isStrictlyBetween:b,doesRectContainRect:function(e,t){return e.left<=t.left&&e.right>=t.right&&e.top<=t.top&&e.bottom>=t.bottom},setRectFromPoint:function(e,t,n){w(e,t.x-n,t.y-n,t.x+n,t.y+n)},setRect:w,setRectFromRect:function(e,t){e.left=t.left,e.top=t.top,e.right=t.right,e.bottom=t.bottom},sortRect:E,doesQuadContainPoint:S,quadContainsRect:function(e,t){return S(e,t.left,t.top)&&S(e,t.left,t.bottom)&&S(e,t.right,t.bottom)&&S(e,t.right,t.top)},newLine:x,constructQuadFromRects:function(e,t){var n,r,i,s,o,u,a,f;if(e.left<t.left)n=e,r=t;else if(e.left>t.left)n=t,r=e;else if(e.top<t.top)n=e,r=t;else{if(!(e.top>t.top))return null;n=t,r=e}return a=r.top-n.top,f=r.left-n.left,f===0?(i={x:n.left,y:n.top},s={x:n.right,y:n.bottom},o={x:r.left,y:r.top},u={x:r.right,y:r.bottom}):a/f>0?(i={x:n.right,y:n.top},s={x:r.right,y:r.top},o={x:n.left,y:n.bottom},u={x:r.left,y:r.bottom}):(i={x:n.left,y:n.top},s={x:r.left,y:r.top},o={x:n.right,y:n.bottom},u={x:r.right,y:r.bottom}),{topLeft:i,topRight:s,bottomLeft:o,bottomRight:u,topLine:x(i,s,"B"),bottomLine:x(o,u,"B"),leftLine:x(i,o,"A"),rightLine:x(s,u,"A")}},isBetween:T,modToGreaterThan:N,isAngleBetween:C,lineSegmentIntersectsRect:function(e,t,n){return O(t,n,e,null,null,!1)>0},ellipseIntersectsRect:function(e,t){return _(e,t,null,!1)},ellipseIntersectsQuad:function(e,t){return F(e,t,null,!1)},lineSegmentIntersectsQuad:function(e,t,n){if(S(e,t.x,t.y)||S(e,n.x,n.y))return!0;var r=x(t,n);return L(e.topLeft,e.topRight,e.topLine,t,n,r)!==null||L(e.topLeft,e.bottomLeft,e.leftLine,t,n,r)!==null||L(e.bottomLeft,e.bottomRight,e.bottomLine,t,n,r)!==null||L(e.topRight,e.bottomRight,e.rightLine,t,n,r)!==null?!0:!1},findLineSegmentIntersection:L,findLineIntersection:k,setIntersectionPoint:A,findEllipseRectIntersections:_,checkAndAddIntersection:M,insertIntersection:v,findEllipseQuadIntersections:F,checkFindAndInsertAngle:P,finalizeIntersections:B,quadContainsEllipsePoint:H}}),define("pagesize",[],{SCREEN_SIZE:{disp:"Screen Size",val:"SCREEN_SIZE",width:0,height:0},LETTER:{disp:"Letter",val:"LETTER",width:21.59,height:27.94},LEGAL:{disp:"Legal",val:"LEGAL",width:21.59,height:35.56},A3:{disp:"A3",val:"A3",width:29.7,height:42},A4:{disp:"A4",val:"A4",width:21,height:29.7},A5:{disp:"A5",val:"A5",width:14.8,height:21}}),define("pagestyle",["mathutils"],function(e){return{BLANK:{disp:"Blank",val:"blank",draw:function(){console.log("draw blank page")}},COLLEGE_RULE:{disp:"College Rule",val:"college",lineSpacing:.71,verticalMargin:3.175,draw:function(t,n,r){var i,s;i=e.cmToPx(this.lineSpacing),s=i;while(s<r)t.graphics.beginStroke("#C6DEFF").setStrokeStyle(1).moveTo(0,s).lineTo(n,s),s+=i}},GRID:{disp:"Grid",val:"grid_4x4",fourBy:{lineSpacing:.635,grids:4},draw:function(t,n,r){var i,s,o,u;i=e.cmToPx(this.fourBy.lineSpacing),s=this.fourBy.grids,o=i,u=0;while(o<n)u++,t.graphics.beginStroke("#C6DEFF").setStrokeStyle(u%s?1:2).moveTo(o,0).lineTo(o,r),o+=i;o=i,u=0;while(o<r)u++,t.graphics.beginStroke("#C6DEFF").setStrokeStyle(u%s?1:2).moveTo(0,o).lineTo(n,o),o+=i}}}}),define("historyitem",["lodash"],function(e){var t=function(t,n,r,i){this.papyrus=t,this.item=n,this.play=r,this.rewind=i,this.args=e.tail(arguments,3)};return e.extend(t.prototype,{addItem:{play:function(){this.papyrus.callerWrapper(this.papyrus.directAddItem,this.item)},rewind:function(){this.papyrus.callerWrapper(this.papyrus.directDeleteItem,this.item)}},deleteItem:{play:function(){this.papyrus.callerWrapper(this.papyrus.directDeleteItem,this.item)},rewind:function(){this.papyrus.callerWrapper(this.papyrus.directAddItem,this.item)}},moveItem:{play:function(){this.papyrus.callerWrapper(this.papyrus.directMoveItem,this.item,this.args[0],this.args[1])},rewind:function(){this.papyrus.callerWrapper(this.papyrus.directMoveItem,this.item,-this.args[0],-this.args[1])}},resizeItem:{play:function(){this.papyrus.callerWrapper(this.papyrus.directResizeItem,this.item,this.args[0],this.args[1],this.args[2],this.args[3],this.args[4],this.args[5])},rewind:function(){this.papyrus.callerWrapper(this.papyrus.directReverseResizeItem,this.item,this.args[0],this.args[1],-this.args[2],-this.args[3],1/this.args[4],1/this.args[5])}}}),t}),define("createjs.dashes",["createjs"],function(e){return e.Graphics.prototype.dashedLineTo=function(e,t,n,r,i){var s=n-e,o=r-t,u,a,f,l;u=Math.floor(Math.sqrt(s*s+o*o)/i),a=s/u,f=o/u,this.moveTo(e,t);for(l=0;l<u;l+=1)e+=a,t+=f,this[l%2===0?"lineTo":"moveTo"](e,t);return this[l%2===0?"lineTo":"moveTo"](n,r)},e.Graphics.prototype.drawDashedRect=function(e,t){return this.moveTo(e.left,e.top).dashedLineTo(e.left,e.top,e.right,e.top,t).dashedLineTo(e.right,e.top,e.right,e.bottom,t).dashedLineTo(e.right,e.bottom,e.left,e.bottom,t).dashedLineTo(e.left,e.bottom,e.left,e.top,t)},e}),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),define("backbone",["lodash","jquery"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),function(e){var t,n,r;typeof window=="undefined"?(t=require("underscore"),n=require("backbone"),r=n,typeof module=="undefined"||(module.exports=r)):(t=window._,n=window.Backbone,r=window),n.Relational={showWarnings:!0},n.Semaphore={_permitsAvailable:null,_permitsUsed:0,acquire:function(){if(this._permitsAvailable&&this._permitsUsed>=this._permitsAvailable)throw new Error("Max permits acquired");this._permitsUsed++},release:function(){if(this._permitsUsed===0)throw new Error("All permits released");this._permitsUsed--},isLocked:function(){return this._permitsUsed>0},setAvailablePermits:function(e){if(this._permitsUsed>e)throw new Error("Available permits cannot be less than used permits");this._permitsAvailable=e}},n.BlockingQueue=function(){this._queue=[]},t.extend(n.BlockingQueue.prototype,n.Semaphore,{_queue:null,add:function(e){this.isBlocked()?this._queue.push(e):e()},process:function(){var e=this._queue;this._queue=[];while(e&&e.length)e.shift()()},block:function(){this.acquire()},unblock:function(){this.release(),this.isBlocked()||this.process()},isBlocked:function(){return this.isLocked()}}),n.Relational.eventQueue=new n.BlockingQueue,n.Store=function(){this._collections=[],this._reverseRelations=[],this._orphanRelations=[],this._subModels=[],this._modelScopes=[r]},t.extend(n.Store.prototype,n.Events,{initializeRelation:function(e,r,i){var s=t.isString(r.type)?n[r.type]||this.getObjectByName(r.type):r.type;s&&s.prototype instanceof n.Relation?new s(e,r,i):n.Relational.showWarnings&&typeof console!="undefined"&&console.warn("Relation=%o; missing or invalid relation type!",r)},addModelScope:function(e){this._modelScopes.push(e)},removeModelScope:function(e){this._modelScopes=t.without(this._modelScopes,e)},addSubModels:function(e,t){this._subModels.push({superModelType:t,subModels:e})},setupSuperModel:function(e){t.find(this._subModels,function(n){return t.find(n.subModels||[],function(t,r){var i=this.getObjectByName(t);if(e===i)return n.superModelType._subModels[r]=e,e._superModel=n.superModelType,e._subModelTypeValue=r,e._subModelTypeAttribute=n.superModelType.prototype.subModelTypeAttribute,!0},this)},this)},addReverseRelation:function(e){var n=t.any(this._reverseRelations,function(n){return t.all(e||[],function(e,t){return e===n[t]})});!n&&e.model&&e.type&&(this._reverseRelations.push(e),this._addRelation(e.model,e),this.retroFitRelation(e))},addOrphanRelation:function(e){var n=t.any(this._orphanRelations,function(n){return t.all(e||[],function(e,t){return e===n[t]})});!n&&e.model&&e.type&&this._orphanRelations.push(e)},processOrphanRelations:function(){t.each(this._orphanRelations.slice(0),function(e){var r=n.Relational.store.getObjectByName(e.relatedModel);r&&(this.initializeRelation(null,e),this._orphanRelations=t.without(this._orphanRelations,e))},this)},_addRelation:function(e,n){e.prototype.relations||(e.prototype.relations=[]),e.prototype.relations.push(n),t.each(e._subModels||[],function(e){this._addRelation(e,n)},this)},retroFitRelation:function(e){var t=this.getCollection(e.model,!1);t&&t.each(function(t){if(!(t instanceof e.model))return;new e.type(t,e)},this)},getCollection:function(e,r){e instanceof n.RelationalModel&&(e=e.constructor);var i=e;while(i._superModel)i=i._superModel;var s=t.find(this._collections,function(e){return e.model===i});return!s&&r!==!1&&(s=this._createCollection(i)),s},getObjectByName:function(n){var r=n.split("."),i=null;return t.find(this._modelScopes,function(n){i=t.reduce(r||[],function(t,n){return t?t[n]:e},n);if(i&&i!==n)return!0},this),i},_createCollection:function(e){var t;return e instanceof n.RelationalModel&&(e=e.constructor),e.prototype instanceof n.RelationalModel&&(t=new n.Collection,t.model=e,this._collections.push(t)),t},resolveIdForItem:function(e,r){var i=t.isString(r)||t.isNumber(r)?r:null;return i===null&&(r instanceof n.RelationalModel?i=r.id:t.isObject(r)&&(i=r[e.prototype.idAttribute])),!i&&i!==0&&(i=null),i},find:function(e,t){var n=this.resolveIdForItem(e,t),r=this.getCollection(e);if(r){var i=r.get(n);if(i instanceof e)return i}return null},register:function(e){var t=this.getCollection(e);if(t){var n=e.collection;t.add(e),this.listenTo(e,"destroy",this.unregister,this),this.listenTo(e,"relational:unregister",this.unregister,this),e.collection=n}},checkId:function(e,t){var r=this.getCollection(e),i=r&&r.get(t);if(i&&e!==i)throw n.Relational.showWarnings&&typeof console!="undefined"&&console.warn("Duplicate id! Old RelationalModel=%o, new RelationalModel=%o",i,e),new Error("Cannot instantiate more than one Backbone.RelationalModel with the same id per type!")},update:function(e){var t=this.getCollection(e);t._onModelEvent("change:"+e.idAttribute,e,t),e.trigger("relational:change:id",e,t)},unregister:function(e,t,n){this.stopListening(e);var r=this.getCollection(e);r&&r.remove(e,n)},reset:function(){this.stopListening(),this._collections=[],this._subModels=[],this._modelScopes=[r]}}),n.Relational.store=new n.Store,n.Relation=function(e,r,i){this.instance=e,r=t.isObject(r)?r:{},this.reverseRelation=t.defaults(r.reverseRelation||{},this.options.reverseRelation),this.options=t.defaults(r,this.options,n.Relation.prototype.options),this.reverseRelation.type=t.isString(this.reverseRelation.type)?n[this.reverseRelation.type]||n.Relational.store.getObjectByName(this.reverseRelation.type):this.reverseRelation.type,this.key=this.options.key,this.keySource=this.options.keySource||this.key,this.keyDestination=this.options.keyDestination||this.keySource||this.key,this.model=this.options.model||this.instance.constructor,this.relatedModel=this.options.relatedModel,t.isString(this.relatedModel)&&(this.relatedModel=n.Relational.store.getObjectByName(this.relatedModel));if(!this.checkPreconditions())return;!this.options.isAutoRelation&&this.reverseRelation.type&&this.reverseRelation.key&&n.Relational.store.addReverseRelation(t.defaults({isAutoRelation:!0,model:this.relatedModel,relatedModel:this.model,reverseRelation:this.options},this.reverseRelation));if(e){var s=this.keySource;s!==this.key&&typeof this.instance.get(this.key)=="object"&&(s=this.key),this.setKeyContents(this.instance.get(s)),this.relatedCollection=n.Relational.store.getCollection(this.relatedModel),this.keySource!==this.key&&delete this.instance.attributes[this.keySource],this.instance._relations[this.key]=this,this.initialize(i),this.options.autoFetch&&this.instance.fetchRelated(this.key,t.isObject(this.options.autoFetch)?this.options.autoFetch:{}),this.listenTo(this.instance,"destroy",this.destroy).listenTo(this.relatedCollection,"relational:add relational:change:id",this.tryAddRelated).listenTo(this.relatedCollection,"relational:remove",this.removeRelated)}},n.Relation.extend=n.Model.extend,t.extend(n.Relation.prototype,n.Events,n.Semaphore,{options:{createModels:!0,includeInJSON:!0,isAutoRelation:!1,autoFetch:!1,parse:!1},instance:null,key:null,keyContents:null,relatedModel:null,relatedCollection:null,reverseRelation:null,related:null,checkPreconditions:function(){var e=this.instance,r=this.key,i=this.model,s=this.relatedModel,o=n.Relational.showWarnings&&typeof console!="undefined";if(!i||!r||!s)return o&&console.warn("Relation=%o: missing model, key or relatedModel (%o, %o, %o).",this,i,r,s),!1;if(i.prototype instanceof n.RelationalModel){if(s.prototype instanceof n.RelationalModel){if(this instanceof n.HasMany&&this.reverseRelation.type===n.HasMany)return o&&console.warn("Relation=%o: relation is a HasMany, and the reverseRelation is HasMany as well.",this),!1;if(e&&t.keys(e._relations).length){var u=t.find(e._relations,function(e){return e.key===r},this);if(u)return o&&console.warn("Cannot create relation=%o on %o for model=%o: already taken by relation=%o.",this,r,e,u),!1}return!0}return o&&console.warn("Relation=%o: relatedModel does not inherit from Backbone.RelationalModel (%o).",this,s),!1}return o&&console.warn("Relation=%o: model does not inherit from Backbone.RelationalModel (%o).",this,e),!1},setRelated:function(e){this.related=e,this.instance.acquire(),this.instance.attributes[this.key]=e,this.instance.release()},_isReverseRelation:function(e){return e.instance instanceof this.relatedModel&&this.reverseRelation.key===e.key&&this.key===e.reverseRelation.key},getReverseRelations:function(e){var n=[],r=t.isUndefined(e)?this.related&&(this.related.models||[this.related]):[e];return t.each(r||[],function(e){t.each(e.getRelations()||[],function(e){this._isReverseRelation(e)&&n.push(e)},this)},this),n},destroy:function(){this.stopListening(),this instanceof n.HasOne?this.setRelated(null):this instanceof n.HasMany&&this.setRelated(this._prepareCollection()),t.each(this.getReverseRelations(),function(e){e.removeRelated(this.instance)},this)}}),n.HasOne=n.Relation.extend({options:{reverseRelation:{type:"HasMany"}},initialize:function(e){this.listenTo(this.instance,"relational:change:"+this.key,this.onChange);var n=this.findRelated(e);this.setRelated(n),t.each(this.getReverseRelations(),function(t){t.addRelated(this.instance,e)},this)},findRelated:function(e){var n=null;e=t.defaults({parse:this.options.parse},e);if(this.keyContents instanceof this.relatedModel)n=this.keyContents;else if(this.keyContents||this.keyContents===0){var r=t.defaults({create:this.options.createModels},e);n=this.relatedModel.findOrCreate(this.keyContents,r)}return this.related&&(this.keyId=null),n},setKeyContents:function(e){this.keyContents=e,this.keyId=n.Relational.store.resolveIdForItem(this.relatedModel,this.keyContents)},onChange:function(e,r,i){if(this.isLocked())return;this.acquire(),i=i?t.clone(i):{};var s=t.isUndefined(i.__related),o=s?this.related:i.__related;if(s){this.setKeyContents(r);var u=this.findRelated(i);this.setRelated(u)}o&&this.related!==o&&t.each(this.getReverseRelations(o),function(e){e.removeRelated(this.instance,null,i)},this),t.each(this.getReverseRelations(),function(e){e.addRelated(this.instance,i)},this);if(!i.silent&&this.related!==o){var a=this;this.changed=!0,n.Relational.eventQueue.add(function(){a.instance.trigger("change:"+a.key,a.instance,a.related,i,!0),a.changed=!1})}this.release()},tryAddRelated:function(e,t,n){(this.keyId||this.keyId===0)&&e.id===this.keyId&&(this.addRelated(e,n),this.keyId=null)},addRelated:function(e,n){var r=this;e.queue(function(){if(e!==r.related){var i=r.related||null;r.setRelated(e),r.onChange(r.instance,e,t.defaults({__related:i},n))}})},removeRelated:function(e,n,r){if(!this.related)return;if(e===this.related){var i=this.related||null;this.setRelated(null),this.onChange(this.instance,e,t.defaults({__related:i},r))}}}),n.HasMany=n.Relation.extend({collectionType:null,options:{reverseRelation:{type:"HasOne"},collectionType:n.Collection,collectionKey:!0,collectionOptions:{}},initialize:function(e){this.listenTo(this.instance,"relational:change:"+this.key,this.onChange),this.collectionType=this.options.collectionType,t.isString(this.collectionType)&&(this.collectionType=n.Relational.store.getObjectByName(this.collectionType));if(!(this.collectionType===n.Collection||this.collectionType.prototype instanceof n.Collection))throw new Error("`collectionType` must inherit from Backbone.Collection");var r=this.findRelated(e);this.setRelated(r)},_prepareCollection:function(e){this.related&&this.stopListening(this.related);if(!e||!(e instanceof n.Collection)){var r=t.isFunction(this.options.collectionOptions)?this.options.collectionOptions(this.instance):this.options.collectionOptions;e=new this.collectionType(null,r)}e.model=this.relatedModel;if(this.options.collectionKey){var i=this.options.collectionKey===!0?this.options.reverseRelation.key:this.options.collectionKey;e[i]&&e[i]!==this.instance?n.Relational.showWarnings&&typeof console!="undefined"&&console.warn("Relation=%o; collectionKey=%s already exists on collection=%o",this,i,this.options.collectionKey):i&&(e[i]=this.instance)}return this.listenTo(e,"relational:add",this.handleAddition).listenTo(e,"relational:remove",this.handleRemoval).listenTo(e,"relational:reset",this.handleReset),e},findRelated:function(e){var r=null;e=t.defaults({parse:this.options.parse},e);if(this.keyContents instanceof n.Collection)this._prepareCollection(this.keyContents),r=this.keyContents;else{var i=[];t.each(this.keyContents,function(n){if(n instanceof this.relatedModel)var r=n;else r=this.relatedModel.findOrCreate(n,t.extend({merge:!0},e,{create:this.options.createModels}));r&&i.push(r)},this),this.related instanceof n.Collection?r=this.related:r=this._prepareCollection(),r.set(i,t.defaults({merge:!1,parse:!1},e))}return this.keyIds=t.difference(this.keyIds,t.pluck(r.models,"id")),r},setKeyContents:function(e){this.keyContents=e instanceof n.Collection?e:null,this.keyIds=[],!this.keyContents&&(e||e===0)&&(this.keyContents=t.isArray(e)?e:[e],t.each(this.keyContents,function(e){var t=n.Relational.store.resolveIdForItem(this.relatedModel,e);(t||t===0)&&this.keyIds.push(t)},this))},onChange:function(e,r,i){i=i?t.clone(i):{},this.setKeyContents(r),this.changed=!1;var s=this.findRelated(i);this.setRelated(s);if(!i.silent){var o=this;n.Relational.eventQueue.add(function(){o.changed&&(o.instance.trigger("change:"+o.key,o.instance,o.related,i,!0),o.changed=!1)})}},handleAddition:function(e,r,i){i=i?t.clone(i):{},this.changed=!0,t.each(this.getReverseRelations(e),function(e){e.addRelated(this.instance,i)},this);var s=this;!i.silent&&n.Relational.eventQueue.add(function(){s.instance.trigger("add:"+s.key,e,s.related,i)})},handleRemoval:function(e,r,i){i=i?t.clone(i):{},this.changed=!0,t.each(this.getReverseRelations(e),function(e){e.removeRelated(this.instance,null,i)},this);var s=this;!i.silent&&n.Relational.eventQueue.add(function(){s.instance.trigger("remove:"+s.key,e,s.related,i)})},handleReset:function(e,r){var i=this;r=r?t.clone(r):{},!r.silent&&n.Relational.eventQueue.add(function(){i.instance.trigger("reset:"+i.key,i.related,r)})},tryAddRelated:function(e,n,r){var i=t.contains(this.keyIds,e.id);i&&(this.addRelated(e,r),this.keyIds=t.without(this.keyIds,e.id))},addRelated:function(e,n){var r=this;e.queue(function(){r.related&&!r.related.get(e)&&r.related.add(e,t.defaults({parse:!1},n))})},removeRelated:function(e,t,n){this.related.get(e)&&this.related.remove(e,n)}}),n.RelationalModel=n.Model.extend({relations:null,_relations:null,_isInitialized:!1,_deferProcessing:!1,_queue:null,_attributeChangeFired:!1,subModelTypeAttribute:"type",subModelTypes:null,constructor:function(e,r){if(r&&r.collection){var i=this,s=this.collection=r.collection;delete r.collection,this._deferProcessing=!0;var o=function(e){e===i&&(i._deferProcessing=!1,i.processQueue(),s.off("relational:add",o))};s.on("relational:add",o),t.defer(function(){o(i)})}n.Relational.store.processOrphanRelations(),this._queue=new n.BlockingQueue,this._queue.block(),n.Relational.eventQueue.block();try{n.Model.apply(this,arguments)}finally{n.Relational.eventQueue.unblock()}},trigger:function(e){if(e.length>5&&e.indexOf("change")===0){var t=this,r=arguments;n.Relational.eventQueue.add(function(){if(!t._isInitialized)return;var i=!0;if(e==="change")i=t.hasChanged()||t._attributeChangeFired,t._attributeChangeFired=!1;else{var s=e.slice(7),o=t.getRelation(s);o?(i=r[4]===!0,i?t.changed[s]=r[2]:o.changed||delete t.changed[s]):i&&(t._attributeChangeFired=!0)}i&&n.Model.prototype.trigger.apply(t,r)})}else n.Model.prototype.trigger.apply(this,arguments);return this},initializeRelations:function(e){this.acquire(),this._relations={},t.each(t.result(this,"relations")||[],function(t){n.Relational.store.initializeRelation(this,t,e)},this),this._isInitialized=!0,this.release(),this.processQueue()},updateRelations:function(e){this._isInitialized&&!this.isLocked()&&t.each(this._relations,function(t){var n=this.attributes[t.keySource]||this.attributes[t.key];t.related!==n&&this.trigger("relational:change:"+t.key,this,n,e||{}),t.keySource!==t.key&&delete t.instance.attributes[t.keySource]},this)},queue:function(e){this._queue.add(e)},processQueue:function(){this._isInitialized&&!this._deferProcessing&&this._queue.isBlocked()&&this._queue.unblock()},getRelation:function(e){return this._relations[e]},getRelations:function(){return t.values(this._relations)},fetchRelated:function(e,r,i){r=t.extend({update:!0,remove:!1},r);var s,o=[],u=this.getRelation(e),a=u&&(u.keyIds&&u.keyIds.slice(0)||(u.keyId||u.keyId===0?[u.keyId]:[]));if(i){var f=u.related instanceof n.Collection?u.related.models:[u.related];t.each(f,function(e){(e.id||e.id===0)&&a.push(e.id)})}if(a&&a.length){var l=[],f=t.map(a,function(e){var t=n.Relational.store.find(u.relatedModel,e);if(!t){var i={};i[u.relatedModel.prototype.idAttribute]=e,t=u.relatedModel.findOrCreate(i,r),l.push(t)}return t},this);u.related instanceof n.Collection&&t.isFunction(u.related.url)&&(s=u.related.url(f));if(s&&s!==u.related.url()){var c=t.defaults({error:function(){var e=arguments;t.each(l,function(t){t.trigger("destroy",t,t.collection,r),r.error&&r.error.apply(t,e)})},url:s},r);o=[u.related.fetch(c)]}else o=t.map(f,function(e){var n=t.defaults({error:function(){t.contains(l,e)&&(e.trigger("destroy",e,e.collection,r),r.error&&r.error.apply(e,arguments))}},r);return e.fetch(n)},this)}return o},get:function(r){var i=n.Model.prototype.get.call(this,r);if(!this.dotNotation||r.indexOf(".")===-1)return i;var s=r.split("."),o=t.reduce(s,function(r,i){if(t.isNull(r)||t.isUndefined(r))return e;if(r instanceof n.Model)return n.Model.prototype.get.call(r,i);throw new Error("Attribute must be an instanceof Backbone.Model. Is: "+r+", currentSplit: "+i)},this);if(i!==e&&o!==e)throw new Error("Ambiguous result for '"+r+"'. direct result: "+i+", dotNotation: "+o);return i||o},set:function(e,r,i){n.Relational.eventQueue.block();var s;t.isObject(e)||e==null?(s=e,i=r):(s={},s[e]=r);try{var o=this.id,u=s&&this.idAttribute in s&&s[this.idAttribute];n.Relational.store.checkId(this,u);var a=n.Model.prototype.set.apply(this,arguments);!this._isInitialized&&!this.isLocked()?(this.constructor.initializeModelHierarchy(),n.Relational.store.register(this),this.initializeRelations(i)):u&&u!==o&&n.Relational.store.update(this),s&&this.updateRelations(i)}finally{n.Relational.eventQueue.unblock()}return a},clone:function(){var e=t.clone(this.attributes);return t.isUndefined(e[this.idAttribute])||(e[this.idAttribute]=null),t.each(this.getRelations(),function(t){delete e[t.key]}),new this.constructor(e)},toJSON:function(e){if(this.isLocked())return this.id;this.acquire();var r=n.Model.prototype.toJSON.call(this,e);return this.constructor._superModel&&!(this.constructor._subModelTypeAttribute in r)&&(r[this.constructor._subModelTypeAttribute]=this.constructor._subModelTypeValue),t.each(this._relations,function(i){var s=r[i.key],o=i.options.includeInJSON,u=null;o===!0?s&&t.isFunction(s.toJSON)&&(u=s.toJSON(e)):t.isString(o)?(s instanceof n.Collection?u=s.pluck(o):s instanceof n.Model&&(u=s.get(o)),o===i.relatedModel.prototype.idAttribute&&(i instanceof n.HasMany?u=u.concat(i.keyIds):i instanceof n.HasOne&&(u=u||i.keyId))):t.isArray(o)?s instanceof n.Collection?(u=[],s.each(function(e){var n={};t.each(o,function(t){n[t]=e.get(t)}),u.push(n)})):s instanceof n.Model&&(u={},t.each(o,function(e){u[e]=s.get(e)})):delete r[i.key],o&&(r[i.keyDestination]=u),i.keyDestination!==i.key&&delete r[i.key]}),this.release(),r}},{setup:function(e){return this.prototype.relations=(this.prototype.relations||[]).slice(0),this._subModels={},this._superModel=null,this.prototype.hasOwnProperty("subModelTypes")?n.Relational.store.addSubModels(this.prototype.subModelTypes,this):this.prototype.subModelTypes=null,t.each(this.prototype.relations||[],function(e){e.model||(e.model=this);if(e.reverseRelation&&e.model===this){var r=!0;if(t.isString(e.relatedModel)){var i=n.Relational.store.getObjectByName(e.relatedModel);r=i&&i.prototype instanceof n.RelationalModel}r?n.Relational.store.initializeRelation(null,e):t.isString(e.relatedModel)&&n.Relational.store.addOrphanRelation(e)}},this),this},build:function(e,t){this.initializeModelHierarchy();var n=this._findSubModelType(this,e)||this;return new n(e,t)},_findSubModelType:function(e,t){if(e._subModels&&e.prototype.subModelTypeAttribute in t){var n=t[e.prototype.subModelTypeAttribute],r=e._subModels[n];if(r)return r;for(n in e._subModels){r=this._findSubModelType(e._subModels[n],t);if(r)return r}}return null},initializeModelHierarchy:function(){this.inheritRelations();if(this.prototype.subModelTypes){var e=t.keys(this._subModels),r=t.omit(this.prototype.subModelTypes,e);t.each(r,function(e){var t=n.Relational.store.getObjectByName(e);t&&t.initializeModelHierarchy()})}},inheritRelations:function(){if(!t.isUndefined(this._superModel)&&!t.isNull(this._superModel))return;n.Relational.store.setupSuperModel(this);if(this._superModel){this._superModel.inheritRelations();if(this._superModel.prototype.relations){var e=t.select(this._superModel.prototype.relations||[],function(e){return!t.any(this.prototype.relations||[],function(t){return e.relatedModel===t.relatedModel&&e.key===t.key},this)},this);this.prototype.relations=e.concat(this.prototype.relations)}}else this._superModel=!1},findOrCreate:function(e,r){r||(r={});var i=t.isObject(e)&&r.parse&&this.prototype.parse?this.prototype.parse(t.clone(e)):e,s=n.Relational.store.find(this,i);return t.isObject(e)&&(s&&r.merge!==!1?(delete r.collection,delete r.url,s.set(i,r)):!s&&r.create!==!1&&(s=this.build(e,r))),s},find:function(e,t){return t||(t={}),t.create=!1,this.findOrCreate(e,t)}}),t.extend(n.RelationalModel.prototype,n.Semaphore),n.Collection.prototype.__prepareModel=n.Collection.prototype._prepareModel,n.Collection.prototype._prepareModel=function(e,t){var r;return e instanceof n.Model?(e.collection||(e.collection=this),r=e):(t||(t={}),t.collection=this,typeof this.model.findOrCreate!="undefined"?r=this.model.findOrCreate(e,t):r=new this.model(e,t),r&&r.isNew()&&!r._validate(e,t)&&(this.trigger("invalid",this,e,t),r=!1)),r};var i=n.Collection.prototype.__set=n.Collection.prototype.set;n.Collection.prototype.set=function(e,r){if(this.model.prototype instanceof n.RelationalModel){r&&r.parse&&(e=this.parse(e,r)),t.isArray(e)||(e=e?[e]:[]);var s=[],o=[];return t.each(e,function(e){e instanceof n.Model||(e=n.Collection.prototype._prepareModel.call(this,e,r)),e&&(o.push(e),!this.get(e)&&!this.get(e.cid)?s.push(e):e.id!=null&&(this._byId[e.id]=e))},this),i.call(this,o,t.defaults({parse:!1},r)),t.each(s,function(e){(this.get(e)||this.get(e.cid))&&this.trigger("relational:add",e,this,r)},this),this}return i.apply(this,arguments)};var s=n.Collection.prototype.__remove=n.Collection.prototype.remove;n.Collection.prototype.remove=function(e,r){if(this.model.prototype instanceof n.RelationalModel){e=t.isArray(e)?e.slice(0):[e],r||(r={});var i=[];return t.each(e,function(e){e=this.get(e)||e&&this.get(e.cid),e&&i.push(e)},this),i.length&&(s.call(this,i,r),t.each(i,function(e){this.trigger("relational:remove",e,this,r)},this)),this}return s.apply(this,arguments)};var o=n.Collection.prototype.__reset=n.Collection.prototype.reset;n.Collection.prototype.reset=function(e,r){return r=t.extend({merge:!0},r),o.call(this,e,r),this.model.prototype instanceof n.RelationalModel&&this.trigger("relational:reset",this,r),this};var u=n.Collection.prototype.__sort=n.Collection.prototype.sort;n.Collection.prototype.sort=function(e){return u.call(this,e),this.model.prototype instanceof n.RelationalModel&&this.trigger("relational:reset",this,e),this};var a=n.Collection.prototype.__trigger=n.Collection.prototype.trigger;n.Collection.prototype.trigger=function(e){if(this.model.prototype instanceof n.RelationalModel){if(e==="add"||e==="remove"||e==="reset"||e==="sort"){var r=this,i=arguments;t.isObject(i[3])&&(i=t.toArray(i),i[3]=t.clone(i[3])),n.Relational.eventQueue.add(function(){a.apply(r,i)})}else a.apply(this,arguments);return this}return a.apply(this,arguments)},n.RelationalModel.extend=function(e,t){var r=n.Model.extend.apply(this,arguments);return r.setup(this),r}}(),define("backbone.relational",["lodash","backbone"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),define("util/guid",[],function(){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})}}),define("model/item",["lodash","backbone.relational","util/guid"],function(e,t,n){var r=t.RelationalModel.extend({defaults:{color:null,weight:0,bounds:{left:0,right:0,top:0,bottom:0},index:-1},subModelTypes:{stroke:"Stroke",ellipse:"Ellipse",text:"Text"},initialize:function(){this.invalidated=!0,this.id||(this.id=n()),this.set("id",this.id)},getWidth:function(){var e=this.get("bounds");return e.right-e.left},getHeight:function(){var e=this.get("bounds");return e.bottom-e.top},sortBounds:function(){var e,t=this.get("bounds");t.left>t.right&&(e=t.left,t.left=t.right,t.right=e),t.top>t.bottom&&(e=t.top,t.top=t.bottom,t.bottom=e)},setBounds:function(e,t,n,r){var i=this.get("bounds");i.left=e,i.right=t,i.top=n,i.bottom=r,this.sortBounds()},copy:function(){var t=this.toJSON();return delete t.id,delete t.index,r.build(e.cloneDeep(t))}});return r}),define("model/text",["lodash","createjs","model/item","util/papyrus"],function(e,t,n,r){return n.extend({defaults:e.extend({},n.prototype.defaults,{rP:{x:0,y:0},text:"default"}),draw:function(e){if(!this.invalidated)return;var n=this,i=r.createStageObject(n,e),s=n.get("rP"),o,u,a;i.x=s.x,i.y=s.y,i.text=n.get("text"),i.color=n.get("color"),i.font=n.get("weight")+"px arial",o=i.getMeasuredWidth(),u=i.getMeasuredHeight();if(o!=n.getWidth()||u!=n.getHeight())n.setBounds(s.x,s.x+o,s.y,s.y+u),a=new t.Shape,a.graphics.beginFill("#000").drawRect(0,0,o,u),i.hitArea=a;this.invalidated=!1},translate:function(e,t){var n=this.get("rP"),r=this.get("bounds");n.x+=e,n.y+=t,r.left+=e,r.right+=e,r.top+=t,r.bottom+=t,this.stageObj&&(this.stageObj.x+=e,this.stageObj.y+=t)}})}),define("util/papyrus",["lodash","createjs","model/text"],function(e,t,n){return{convertPointToPapyrus:function(e,t){return{x:e.x-t.x,y:e.y-t.y}},convertPointToCanvas:function(e,t){return{x:e.x+t.x,y:e.y+t.y}},createStageObject:function(r,i){var s=null;return r.stageObj&&r.stageObj.modelItem==r?(r.invalidated&&(e.isUndefined(r.displayIndex)?i.addChild(r.stageObj):r.displayIndex>i.children.length?i.addChild(r.stageObj):i.addChildAt(r.stageObj,r.displayIndex)),r.stageObj):(r instanceof n?s=new t.Text:s=new t.Shape,i.addChild(s),s.modelItem=r,r.stageObj=s,s)}}}),define("model/stroke",["lodash","model/item","papyrus"],function(e,t,n){return t.extend({defaults:e.extend({},t.prototype.defaults,{points:[{x:0,y:0}],rP:{x:0,y:0}}),addPoint:function(e){var t=this.get("points");this.updateBounds(e),t.push(n.convertPointToPapyrus(e,this.get("rP")))},updateBounds:function(e){var t=this.get("weight")/2,n=this.get("bounds");if(this.get("points").length==1)n.left=e.x-t,n.right=e.x+t,n.top=e.y-t,n.bottom=e.y+t;else{var r=e.x-t,i=e.y-t,s=e.x+t,o=e.y+t;r<n.left&&(n.left=r),s>n.right&&(n.right=s),i<n.top&&(n.top=i),o>n.bottom&&(n.bottom=o)}},recalcBounds:function(){var e,t,r,i,s,o;e=this.get("rP"),t=this.get("weight")/2,r=this.get("bounds"),r.left=e.x-t,r.right=e.x+t,r.top=e.y-t,r.bottom=e.y+t,i=this.get("points"),s=i.length;for(o=0;o<s;o++)this.updateBounds(n.convertPointToCanvas(i[o],e))},draw:function(t){var r,i,s,o,u,a;if(!this.invalidated)return;r=this,console.log("drawstroke"),i=r.get("points"),e.isUndefined(t)?s=n.createItemLayerStageObject(r):s=n.createStageObject(r,t),s.graphics.clear(),s.x=0,s.y=0,o=r.get("rP"),u=o,e.each(i,function(e){a=n.convertPointToCanvas(e,o),s.graphics.beginStroke(r.get("color")).setStrokeStyle(r.get("weight"),"round").moveTo(u.x,u.y).lineTo(a.x,a.y),u=a}),r.invalidated=!1},translate:function(e,t){var n=this.get("rP");n.x+=e,n.y+=t;var r=this.get("bounds");r.left+=e,r.right+=e,r.top+=t,r.bottom+=t,this.stageObj&&(this.stageObj.x+=e,this.stageObj.y+=t)},scale:function(e,t,n,r){var i,s,o,u,a;this.translate(-n,-r),i=this.get("points"),s=this.get("rP"),o=this.get("bounds"),o.left*=e,o.right*=e,o.top*=t,o.bottom*=t,this.sortBounds(),s.x*=e,s.y*=t,u=i.length;for(a=0;a<u;a++)i[a].x*=e,i[a].y*=t;this.translate(n,r),this.invalidated=!0}})}),define("model/ellipse",["lodash","model/item","papyrus"],function(e,t,n){return t.extend({defaults:e.extend({},t.prototype.defaults,{rP:{x:0,y:0}}),draw:function(t){if(!this.invalidated)return;var r=this,i=e.isUndefined(t)?n.createItemLayerStageObject(r):n.createStageObject(r,t),s=r.get("rP");e.isUndefined(t)?i=n.createItemLayerStageObject(r):i=n.createStageObject(r,t),i.x=0,i.y=0,s=r.get("rP"),i.graphics.clear().beginStroke(r.get("color")).setStrokeStyle(r.get("weight"),"round").drawEllipse(s.x,s.y,this.getWidth(),this.getHeight()),this.invalidated=!1},translate:function(e,t){var n=this.get("rP"),r=this.get("bounds");n.x+=e,n.y+=t,r.left+=e,r.right+=e,r.top+=t,r.bottom+=t,this.stageObj&&(this.stageObj.x+=e,this.stageObj.y+=t)},scale:function(e,t,n,r){this.translate(-n,-r);var i=this.get("rP"),s=this.get("bounds");s.left*=e,s.right*=e,s.top*=t,s.bottom*=t,this.sortBounds(),i.x*=e,i.y*=t,this.translate(n,r),this.invalidated=!0}})}),define("papyrus.eraser",["lodash","mathutils","distanceutils","model/stroke","model/ellipse"],function(e,t,n,r,i){var s=function(e){this.papyrus=e};return e.extend(s.prototype,{eraserShape:null,eraseRect:{},relCurrentEraserRect:{},relPreviousEraserRect:{},travelQuad:null,travelBounds:{},radius:0,radiusSquared:0,perviousPoint:{},currentPoint:{},relCurrentPoint:{},relPreviousPoint:{},toErase:[],numErased:0,updateEraserRects:function(){t.setRectFromPoint(this.eraseRect,this.currentPoint,this.radius),t.setRectFromPoint(this.prevEraseRect,this.previousPoint,this.radius)},updateTravelQuad:function(){this.travelQuad=t.constructQuadFromRects(this.prevEraseRect,this.eraseRect),e.isNull(this.travelQuad)?t.setRect(this.travelBounds,0,0,0,0):t.setRect(this.travelBounds,Math.min(this.travelQuad.topLeft.x,this.travelQuad.bottomLeft.x),Math.min(this.travelQuad.topLeft.y,this.travelQuad.topRight.y),Math.max(this.travelQuad.topRight.x,this.travelQuad.bottomRight.x),Math.max(this.travelQuad.bottomLeft.y,this.travelQuad.bottomRight.y))},eraserContainsRect:function(e){return t.doesRectContainRect(this.eraseRect,e)},eraserIntersectsStroke:function(e){var n=e.get("rP"),r,i,s,o;this.relCurrentPoint.x=this.currentPoint.x-n.x,this.relCurrentPoint.y=this.currentPoint.y-n.y,t.setRectFromPoint(this.relCurrentEraserRect,this.relCurrentPoint,this.radius),o=e.get("points");if(o.length===1)return i=o[0],t.doesRectContainPoint(this.relCurrentEraserRect,i.x,i.y);for(r=1;r<o.length;r++){i=o[r-1],s=o[r];if(t.lineSegmentIntersectsRect(this.relCurrentEraserRect,i,s))return!0}return!1},eraserContainsEllipse:function(e){return t.doesRectContainRect(this.eraseRect,e.get("bounds"))},eraserIntersectsEllipse:function(e){var n=e.get("rP"),r=e.getWidth()/2,i=e.getHeight()/2,s={x:n.x+r,y:n.y+i};return this.relCurrentPoint.x=this.currentPoint.x-s.x,this.relCurrentPoint.y=this.currentPoint.y-s.y,t.setRectFromPoint(this.relCurrentEraserRect,this.relCurrentPoint,this.radius),t.ellipseIntersectsRect(e,this.relCurrentEraserRect)},travelQuadtIntersectsStroke:function(e){var n=e.get("rP"),r,i,s,o,u;this.relCurrentPoint.x=this.currentPoint.x-n.x,this.relCurrentPoint.y=this.currentPoint.y-n.y,this.relPreviousPoint.x=this.previousPoint.x-n.x,this.relPreviousPoint.y=this.previousPoint.y-n.y,t.setRectFromPoint(this.relCurrentEraserRect,this.relCurrentPoint,this.radius),t.setRectFromPoint(this.relPreviousEraserRect,this.relPreviousPoint,this.radius),u=t.constructQuadFromRects(this.relPreviousEraserRect,this.relCurrentEraserRect),o=e.get("points");if(o.length===1)return i=o[0],t.doesQuadContainPoint(u,i.x,i.y);for(r=1;r<o.length;r++){i=o[r-1],s=o[r];if(t.lineSegmentIntersectsQuad(u,i,s))return!0}return!1},travelQuadContainsEllipse:function(e){var n=t.constructQuadFromRects(this.prevEraseRect,this.eraseRect);return t.quadContainsRect(n,e.get("bounds"))},travelQuadIntersectsEllipse:function(e){var n=e.get("rP"),r=e.getWidth()/2,i=e.getHeight()/2,s={x:n.x+r,y:n.y+i},o;return this.relCurrentPoint.x=this.currentPoint.x-s.x,this.relCurrentPoint.y=this.currentPoint.y-s.y,this.relPreviousPoint.x=this.previousPoint.x-s.x,this.relPreviousPoint.y=this.previousPoint.y-s.y,t.setRectFromPoint(this.relCurrentEraserRect,this.relCurrentPoint,this.radius),t.setRectFromPoint(this.relPreviousEraserRect,this.relPreviousPoint,this.radius),o=t.constructQuadFromRects(this.relPreviousEraserRect,this.relCurrentEraserRect),t.ellipseIntersectsQuad(e,o)},eraseTo:function(e,s){var o,u,a,f;this.previousPoint.x=this.currentPoint.x,this.previousPoint.y=this.currentPoint.y,this.currentPoint.x=e,this.currentPoint.y=s,this.updateEraserRects(),this.updateTravelQuad();if(n.distanceSquared(this.previousPoint,this.currentPoint)<this.radiusSquared){u=this.papyrus.page.get("items");for(o=0;o<u.length;o++){a=u.at(o),f=a.get("bounds");if(t.rectsIntersect(f,this.eraseRect))if(a instanceof r){if(this.eraserContainsRect(f)||this.eraserIntersectsStroke(a))this.toErase.push(a),this.numErased++}else a instanceof i&&(this.eraserContainsEllipse(a)||this.eraserIntersectsEllipse(a))&&(this.toErase.push(a),this.numErased++)}}else{u=this.papyrus.page.get("items");for(o=0;o<u.length;o++)a=u.at(o),t.rectsIntersect(a.get("bounds"),this.travelBounds)&&(a instanceof r?this.travelQuadtIntersectsStroke(a)&&(this.toErase.push(a),this.numErased++):a instanceof i&&(this.travelQuadContainsEllipse(a)||this.travelQuadIntersectsEllipse(a))&&(this.toErase.push(a),this.numErased++))}for(o=0;o<this.toEraser.length;o++)a=this.toErase[o],this.papyrus.deleteItem(a);return this.toErase.length=0,!1}}),s}),define("papyrustools",["lodash","createjs.dashes","mathutils","papyrus","util/papyrus","papyrus.eraser","model/stroke","model/ellipse","model/text"],function(e,t,n,r,i,s,o,u,a){var f=function(e){var t;e.left>e.right&&(t=e.left,e.left=e.right,e.right=t),e.top>e.bottom&&(t=e.top,e.top=e.bottom,e.bottom=t)},l=function(e,t){f(e),f(t),t.left<t.right&&t.top<t.bottom&&(e.left<e.right&&e.top<e.bottom?(e.left>t.left&&(e.left=t.left),e.top>t.top&&(e.top=t.top),e.right<t.right&&(e.right=t.right),e.bottom<t.bottom&&(e.bottom=t.bottom)):(e.left=t.left,e.top=t.top,e.right=t.right,e.bottom=t.bottom))},c=function(e,t,n){e.left+=t,e.top+=n,e.right-=t,e.bottom-=n},h=function(e){return e.right-e.left},p=function(e){return e.bottom-e.top},d=function(e,t,n,r){return(e-n)*(e-n)+(t-r)*(t-r)},v=function(e,t,n,r){return Math.sqrt(d(e,t,n,r))},m=function(r){var l=this;e.extend(this,{papyrus:r,eraser:new s(r),tools:{stroke:{start:function(e){l.currentItem=new o({color:l.papyrus.color,weight:l.papyrus.weight,points:[{x:0,y:0}],rP:{x:e.x,y:e.y},bounds:{left:e.x,right:e.x,top:e.y,bottom:e.y}}),l.newShape=l.papyrus.createToolLayerStageObject(l.currentItem)},move:function(e,t){var n,r;if(e.pointerID!=l.prevPoint.id)return;l.prevPoint.x&&l.newShape.graphics.beginStroke(l.currentItem.get("color")).setStrokeStyle(l.papyrus.weight,"round").moveTo(l.prevPoint.x,l.prevPoint.y).lineTo(e.x,e.y),t||(n=l.papyrus.stage.canvas.getContext("2d"),n.save(),l.papyrus.stage.updateContext(n),l.newShape.draw(n,!0),n.restore()),l.prevPoint.x=e.x,l.prevPoint.y=e.y,r={x:e.x,y:e.y,id:e.pointerID},l.currentItem.addPoint(r)},finish:function(){l.currentItem&&(l.currentItem.sortBounds(),l.papyrus.addItem(l.currentItem),l.currentItem=null)}},select:{start:function(r){var i=!e.isNull(l.currSelectArea)&&n.doesRectContainPoint(l.currSelectArea,r.x,r.y),s=e.isNull(l.currSelectArea)?null:l.whichAnchor(l.currSelectArea,r.x,r.y);i||s!==null?(l.moveStartPoint={x:r.x,y:r.y},s?(l.resizing=!0,l.resize_start(s)):l.moving=!0):(l.clearSelection(),l.selectShape=new t.Shape,l.papyrus.stage.addChild(l.selectShape),l.currSelectArea={left:r.x,right:r.x,top:r.y,bottom:r.y})},move:function(e,t){var n,r,i;if(e.pointerID!=l.prevPoint.id)return;if(l.moving){n=e.x-l.prevPoint.x,r=e.y-l.prevPoint.y;for(i=0;i<l.currSelectItems.length;i++)l.currSelectItems[i].stageObj.x+=n,l.currSelectItems[i].stageObj.y+=r;l.currSelectArea.left+=n,l.currSelectArea.right+=n,l.currSelectArea.top+=r,l.currSelectArea.bottom+=r,l.prevPoint.x=e.x,l.prevPoint.y=e.y}else l.resizing?(l.prevPoint.x=e.x,l.prevPoint.y=e.y,l.resize_move(l.prevPoint.x,l.prevPoint.y)):(l.currSelectArea.right=e.x,l.currSelectArea.bottom=e.y);l.drawSelectionRect(t)},finish:function(){var e,t,n;l.moving?(e=l.prevPoint.x-l.moveStartPoint.x,t=l.prevPoint.y-l.moveStartPoint.y,l.papyrus.moveItem(l.currSelectItems,e,t)):l.resizing?l.resize_finish(l.prevPoint.x,l.prevPoint.y):l.currSelectArea&&(f(l.currSelectArea),n=l.papyrus.getItemsSelectionFromBounds(l.currSelectArea),n?(l.currSelectItems=n.items,l.currSelectArea=n.bounds,l.isSelectionResizeable=n.isResizeable,c(l.currSelectArea,-l.options.SLOP,-l.options.SLOP)):(l.currSelectArea=null,l.selectShape.graphics.clear())),l.moving=!1,l.resizing=!1,l.drawSelectionRect(),l.papyrus.page.save()}},erase:{start:function(e){l.eraser.radius=l.papyrus.weight*l.options.ERASE_RECT_SCALE_FACTOR,l.eraser.radiusSquared=l.eraser.radius*l.eraser.radius,l.eraser.currentPoint.x=e.x,l.eraser.currentPoint.y=e.y,l.eraser.eraseTo(e.x,e.y),l.eraser.eraseShape||(l.eraser.eraseShape=new t.Shape),l.eraser.eraseShape.graphics.clear().setStrokeStyle(2).beginStroke(l.options.SELECTION_COLOR).drawDashedRect(l.eraser.eraseRect,l.options.DASH_SIZE),l.papyrus.stage.addChild(l.eraser.eraseShape),l.papyrus.stage.update()},move:function(e,t){l.eraser.eraseTo(e.x,e.y),l.eraser.eraseShape.graphics.clear().setStrokeStyle(2).beginStroke(l.options.SELECTION_COLOR).drawDashedRect(l.eraser.eraseRect,l.options.DASH_SIZE),t||l.papyrus.stage.update()},finish:function(){l.eraser.eraseShape.graphics.clear(),l.papyrus.stage.removeChild(l.eraser.eraseShape),l.papyrus.groupRecentRecords(l.eraser.numErased),l.eraser.numErased=0,l.papyrus.stage.update()}},ellipse:{start:function(e){l.currentItem=new u({color:l.papyrus.color,weight:l.papyrus.weight,rP:{x:e.x,y:e.y},bounds:{left:e.x,right:e.x,top:e.y,bottom:e.y}}),l.newShape=l.papyrus.createToolLayerStageObject(l.currentItem)},move:function(e,t){var n=l.currentItem.get("bounds");n.right=e.x,n.bottom=e.y,l.currentItem.invalidated=!0,l.currentItem.draw(l.papyrus.layer),t||l.papyrus.stage.update()},finish:function(){var e,t;l.currentItem&&(l.currentItem.sortBounds(),e=l.currentItem.get("rP"),t=l.currentItem.get("bounds"),e.x=t.left,e.y=t.top,l.papyrus.addItem(l.currentItem),l.currentItem=null)}},rectangle:{move:function(e,t){var n=l.currentItem.get("rP");l.newShape.graphics.clear().setStrokeStyle(l.papyrus.weight,"round").beginStroke(l.currentItem.get("color")).moveTo(n.x,n.y).lineTo(n.x,e.y).lineTo(e.x,e.y).lineTo(e.x,n.y).lineTo(n.x,n.y),t||l.papyrus.stage.update(),l.prevPoint.x=e.x,l.prevPoint.y=e.y},finish:function(){if(l.currentItem){var e=l.currentItem.get("rP");l.currentItem.get("points").push(i.convertPointToPapyrus({x:e.x,y:e.y},l.currentItem.get("rP"))),l.currentItem.get("points").push(i.convertPointToPapyrus({x:e.x,y:l.prevPoint.y},l.currentItem.get("rP"))),l.currentItem.get("points").push(i.convertPointToPapyrus({x:l.prevPoint.x,y:l.prevPoint.y},l.currentItem.get("rP"))),l.currentItem.get("points").push(i.convertPointToPapyrus({x:l.prevPoint.x,y:e.y},l.currentItem.get("rP"))),l.currentItem.get("points").push(i.convertPointToPapyrus({x:e.x,y:e.y},l.currentItem.get("rP"))),l.currentItem.setBounds(e.x,l.prevPoint.x,e.y,l.prevPoint.y),l.papyrus.addItem(l.currentItem),l.currentItem=null}}},line:{move:function(e,t){var n=l.currentItem.get("rP");l.newShape.graphics.clear().setStrokeStyle(l.papyrus.weight,"round").beginStroke(l.currentItem.get("color")).moveTo(n.x,n.y).lineTo(e.x,e.y),t||l.papyrus.stage.update(),l.prevPoint.x=e.x,l.prevPoint.y=e.y},finish:function(){if(l.currentItem){var e=l.currentItem.get("rP");l.currentItem.get("points").push(i.convertPointToPapyrus({x:e.x,y:e.y},l.currentItem.get("rP"))),l.currentItem.get("points").push(i.convertPointToPapyrus({x:l.prevPoint.x,y:l.prevPoint.y},l.currentItem.get("rP"))),l.currentItem.setBounds(e.x,l.prevPoint.x,e.y,l.prevPoint.y),l.papyrus.addItem(l.currentItem),l.currentItem=null}}},text:{start:function(e){l.currentItem=new a({color:l.papyrus.color,weight:l.papyrus.weight*3,rP:{x:e.x,y:e.y},bounds:{left:e.x,right:e.x,top:e.y,bottom:e.y}}),l.newShape=l.papyrus.createToolLayerStageObject(l.currentItem)},move:function(e){l.prevPoint.x=e.x,l.prevPoint.y=e.y},finish:function(){var e,t;l.currentItem&&(e=prompt("Enter Text"),e&&(l.currentItem.set("text",e),t=l.currentItem.get("rP"),t.x=l.prevPoint.x,t.y=l.prevPoint.y,l.currentItem.setBounds(t.x,l.prevPoint.x,t.y,l.prevPoint.y),l.papyrus.addItem(l.currentItem)),l.currentItem=null)}}}}),this.tools.rectangle.start=this.tools.stroke.start,this.tools.line.start=this.tools.stroke.start};return e.extend(m.prototype,{options:{SLOP:15,MIN_SIZE:.2,SELECTION_COLOR:"#212d8d",DASH_SIZE:8,ERASE_RECT_SCALE_FACTOR:2.5},currentTool:{},disabled:!1,currentItem:null,newShape:null,mouseDown:!1,prevPoint:{},currSelectArea:null,currSelectItems:null,selectShape:null,moving:!1,resizing:!1,moveStartPoint:!1,isSelectionResizeable:!1,isCornerAnchor:!1,isLeftOrRightMiddleAnchor:!1,selectedAreaSlop:null,selectedFittedArea:null,resizeStart:{x:0,y:0,fittedArea:null},resizeAnchor:{x:0,y:0},resizeSlopAnchor:{x:0,y:0},resizeAspectRatio:0,clearSelection:function(){this.isSelectionResizeable=!1,this.currSelectArea=null,this.currSelectItems=null,this.drawSelectionRect()},setSelectedItems:function(n){if(e.isEmpty(n))return;var r,i,s,o;this.clearSelection(),r=n[0].get("bounds"),this.currSelectArea={left:r.left,right:r.right,top:r.top,bottom:r.bottom},this.currSelectItems=[],this.isSelectionResizeable=!0,i=n.length;for(s=0;s<i;s++)o=n[s],l(this.currSelectArea,o.get("bounds")),this.currSelectItems.push(o),o instanceof a&&(this.isSelectionResizeable=!1);c(this.currSelectArea,-this.options.SLOP,-this.options.SLOP),this.selectShape=new t.Shape,this.papyrus.stage.addChild(this.selectShape),this.drawSelectionRect()},copyItems:function(){var e,t,n,r;e=[],t=this.currSelectItems.length;for(n=0;n<t;n++)r=this.currSelectItems[n].copy(),e.push(r);return e},isSelection:function(){return this.currSelectItems&&this.currSelectItems.length>0},isClipboardItem:function(){return!!this.papyrus.clipboard},saveSelectionToClipBoard:function(){var e={bounds:{left:this.currSelectArea.left,right:this.currSelectArea.right,top:this.currSelectArea.top,bottom:this.currSelectArea.bottom}};e.items=this.copyItems(this.currSelectItems),this.papyrus.clipboard=e},deleteSelectedItems:function(){this.papyrus.deleteItem(this.currSelectItems),this.clearSelection()},cutSelectedItems:function(){this.saveSelectionToClipBoard(),this.deleteSelectedItems()},copySelectedItems:function(){this.saveSelectionToClipBoard()},pasteSelectedItems:function(){var e=this.papyrus.clipboard.bounds.left+(this.papyrus.clipboard.bounds.right-this.papyrus.clipboard.bounds.left)/2,t=this.papyrus.clipboard.bounds.top+(this.papyrus.clipboard.bounds.bottom-this.papyrus.clipboard.bounds.top)/2,n=this.papyrus.clipboard.items,r=[],i,s,o,u;i=this.papyrus.stage.width/2-e,s=this.papyrus.stage.height/2-t;for(o=0;o<n.length;o++)u=n[o].copy(),u.translate(i,s),u.draw(this.papyrus.layer),r.push(u);this.papyrus.addItem(r),this.setSelectedItems(r)},enable:function(){this.disabled=!1},disable:function(){e.isFunction(this.currentTool.finish)&&this.currentTool.finish(),this.disabled=!0},tool_start:function(e){if(this.disabled)return;this.mouseDown=!0,this.prevPoint={x:e.x,y:e.y},this.currentTool.start(e)},tool_move:function(e,t){this.mouseDown&&this.currentTool.move(e,t)},tool_finish:function(){this.mouseDown&&(this.currentTool.finish(),this.mouseDown=!1)},resize_start:function(t){this.selectedAreaSlop=this.currSelectArea,this.selectedFittedArea=e.clone(this.currSelectArea),c(this.selectedFittedArea,this.options.SLOP,this.options.SLOP),this.isCornerAnchor=!1,this.isLeftOrRightMiddleAnchor=!1;switch(t){case"LEFT_TOP":case"LEFT_BOTTOM":case"RIGHT_TOP":case"RIGHT_BOTTOM":this.isCornerAnchor=!0;break;case"LEFT_MIDDLE":case"RIGHT_MIDDLE":this.isLeftOrRightMiddleAnchor=!0;break;default:}this.resizeStart=e.clone(this.moveStartPoint),this.resizeStart.x<=this.selectedAreaSlop.left?(this.resizeSlopAnchor.x=this.selectedAreaSlop.right,this.resizeAnchor.x=this.selectedFittedArea.right):this.resizeStart.x>=this.selectedAreaSlop.left?(this.resizeSlopAnchor.x=this.selectedAreaSlop.left,this.resizeAnchor.x=this.selectedFittedArea.left):this.resizeStart.x<this.selectedAreaSlop.left+h(this.selectedAreaSlop)/2?(this.resizeSlopAnchor.x=this.selectedAreaSlop.right,this.resizeAnchor.x=this.selectedFittedArea.right):(this.resizeSlopAnchor.x=this.selectedAreaSlop.left,this.resizeAnchor.x=this.selectedFittedArea.left),this.resizeStart.y<=this.selectedAreaSlop.top?(this.resizeSlopAnchor.y=this.selectedAreaSlop.bottom,this.resizeAnchor.y=this.selectedFittedArea.bottom):this.resizeStart.y>=this.selectedAreaSlop.bottom?(this.resizeSlopAnchor.y=this.selectedAreaSlop.top,this.resizeAnchor.y=this.selectedFittedArea.top):this.resizeStart.y<this.selectedAreaSlop.top+p(this.selectedAreaSlop)/2?(this.resizeSlopAnchor.y=this.selectedAreaSlop.bottom,this.resizeAnchor.y=this.selectedFittedArea.bottom):(this.resizeSlopAnchor.y=this.selectedAreaSlop.top,this.resizeAnchor.y=this.selectedFittedArea.top),this.resizeStart.fittedArea=e.clone(this.selectedFittedArea),this.resizeAspectRatio=h(this.selectedFittedArea)/p(this.selectedFittedArea)},resize_move:function(e,t){var n=2*this.options.SLOP,r=n,i=this.options.MIN_SIZE,s,o,u,a,l,d,v,m,g;this.isCornerAnchor||(this.isLeftOrRightMiddleAnchor?t=this.resizeStart.y:e=this.resizeStart.x),s=e<this.resizeSlopAnchor.x,o=t<this.resizeSlopAnchorY,e-=this.resizeSlopAnchor.x,t-=this.resizeSlopAnchor.y,u=e?e<0?-1:1:0,u*e<n+i&&(e=u*(n+i)),a=t?t<0?-1:1:0,a*t<r+i&&(t=a*(r+i)),this.selectedFittedArea.left=this.resizeSlopAnchor.x,this.selectedFittedArea.right=this.resizeSlopAnchor.x+e,this.selectedFittedArea.top=this.resizeSlopAnchor.y,this.selectedFittedArea.bottom=this.resizeSlopAnchor.y+t,f(this.selectedFittedArea),c(this.selectedFittedArea,this.options.SLOP,this.options.SLOP),l=h(this.selectedFittedArea)-h(this.resizeStart.fittedArea),d=p(this.selectedFittedArea)-p(this.resizeStart.fittedArea),this.isCornerAnchor?(g=l/this.resizeAspectRatio,g>d?(v=h(this.resizeStart.fittedArea)+l,m=v/this.resizeAspectRatio):(m=h(this.resizeStart.fittedArea)+d,v=m*this.resizeAspectRatio)):this.isLeftOrRightMiddleAnchor?(v=h(this.selectedFittedArea),m=p(this.resizeStart.fittedArea)):(v=h(this.resizeStart.fittedArea),m=p(this.selectedFittedArea)),s?this.selectedFittedArea.left=this.selectedFittedArea.right-v:this.selectedFittedArea.right=this.selectedFittedArea.left+v,o?this.selectedFittedArea.top=this.selectedFittedArea.bottom-m:this.selectedFittedArea.bottom=this.selectedFittedArea.top+m,this.currSelectArea.left=this.selectedFittedArea.left-this.options.SLOP,this.currSelectArea.right=this.selectedFittedArea.right+this.options.SLOP,this.currSelectArea.top=this.selectedFittedArea.top-this.options.SLOP,this.currSelectArea.bottom=this.selectedFittedArea.bottom+this.options.SLOP},resize_finish:function(t,n){var r=0,i=0,s,o;this.isCornerAnchor||(this.isLeftOrRightMiddleAnchor?n=this.resizeStart.y:t=this.resizeStart.x),s=h(this.selectedFittedArea)/h(this.resizeStart.fittedArea),o=p(this.selectedFittedArea)/p(this.resizeStart.fittedArea);if(!e.isFinite(s)||s===0)s=1;if(!e.isFinite(o)||o===0)o=1;0>(this.resizeSlopAnchorX-t)*(this.resizeSlopAnchorX-this.resizeStartX)&&(s*=-1,r=t<this.resizeSlopAnchorX?-this.options.SLOP:this.options.SLOP),0>(this.resizeSlopAnchorY-n)*(this.resizeSlopAnchorY-this.resizeStartY)&&(o*=-1,i=n<this.resizeSlopAnchorY?-this.options.SLOP:this.options.SLOP),r*=2,i*=2,this.papyrus.resizeItem(this.currSelectItems,this.resizeAnchorX,this.resizeAnchorY,r,i,s,o)},drawSelectionRect:function(t){this.currSelectArea?(this.selectShape.graphics.clear().setStrokeStyle(2).beginStroke(this.options.SELECTION_COLOR).moveTo(0,0).drawDashedRect(this.currSelectArea,this.options.DASH_SIZE,this.selectShape.graphics),this.isSelectionResizeable&&!this.moving?this.addSelectionControls(this.currSelectArea):this.removeSelectionControls()):(e.isNull(this.selectShape)||this.selectShape.graphics.clear(),this.removeSelectionControls()),t||this.papyrus.stage.update()},removeSelectionControls:function(){var t=this;e.each(this.selectControls,function(e){t.papyrus.stage.removeChild(e)})},addSelectionControls:function(n){var r=n.left,i=n.right,s=n.top,o=n.bottom,u=o-s,a=i-r,f={midLeft:{style:"circle",pos:{x:r,y:u/2+s-5}},midRight:{style:"circle",pos:{x:i,y:u/2+s-5}},midTop:{style:"circle",pos:{x:a/2+r,y:s}},midBottom:{style:"circle",pos:{x:a/2+r,y:o}},topLeft:{style:"rect",pos:{x:r,y:s}},topRight:{style:"rect",pos:{x:i,y:s}},bottomLeft:{style:"rect",pos:{x:r,y:o}},bottomRight:{style:"rect",pos:{x:i,y:o}}};this.selectControls=e.mapValues(f,function(n,r){var i=this.selectControls&&this.selectControls[r]||new t.Shape;return i=e.assign(i,n.pos),this.papyrus.addChild(i),n.style==="circle"?i.graphics.clear().beginFill(this.options.SELECTION_COLOR).drawCircle(0,0,5):n.style==="rect"&&i.graphics.clear().beginFill(this.options.SELECTION_COLOR).drawRect(-5,-5,10,10),i},this)},whichAnchor:function(e,t,n){if(!this.isSelectionResizeable)return null;var r=e.top,i=e.bottom,s=e.left,o=e.right,u=r+(i-r)/2,a=s+(o-s)/2,f=this.options.SLOP,l=h(e)/p(e),c=50,d=.02,m=.01;if(l<c&&l>d){if(v(s,r,t,n)<f)return"LEFT_TOP";if(v(o,r,t,n)<f)return"RIGHT_TOP";if(v(s,i,t,n)<f)return"LEFT_BOTTOM";if(v(o,i,t,n)<f)return"RIGHT_BOTTOM"}if(h(e)>m/2){if(v(s,u,t,n)<f)return"LEFT_MIDDLE";if(v(o,u,t,n)<f)return"RIGHT_MIDDLE"}if(p(e)>m/2){if(v(a,r,t,n)<f)return"TOP_MIDDLE";if(v(a,i,t,n)<f)return"BOTTOM_MIDDLE"}return null}}),m}),define("papyrus",["jquery","lodash","createjs","mathutils","pagesize","pagestyle","historyitem","papyrustools","util/papyrus","model/text"],function(e,t,n,r,i,s,o,u,a,f){var l=function(s,o){var a;this.$canvas=e(s),a=this.$canvas[0],this.tools=new u(this),this.stage=new n.Stage(a.id),this.stage.update=t.throttle(this.stage.update,20),i.SCREEN_SIZE.width=r.pxToCm(this.$canvas.width()),i.SCREEN_SIZE.height=r.pxToCm(this.$canvas.height()),this.setTool("stroke"),!t.isNull(o)&&!t.isUndefined(o)&&(this.input=new o(this))};return t.extend(l.prototype,{layer:null,page:null,tool:null,panning:!1,drawing:!1,color:"#22cc22",weight:10,recordStack:null,redoRecordStack:null,recordsArchive:{},clipboard:null,initialDrawPage:function(){var e,t,n,r;e=this.page.get("items"),t=e.length;for(n=0;n<t;n++)r=e.at(n),r.invalidated=!0,r.draw(this.layer);this.stage.update()},setPage:function(e){var i=this,o=this.page,u=new n.Shape,a=new n.Shape,f=Math.floor(r.cmToPx(e.getWidth())),l=Math.floor(r.cmToPx(e.getHeight())),c=50,h=e.get("background"),p;this.page=e,!t.isNull(o)&&!t.isUndefined(o)&&(o.off("draw:item_changed"),o.off("draw:item_added"),o.off("draw:item_removed"),this.recordsArchive[o.id]={recordStack:this.recordStack,redoRecordStack:this.redoRecordStack}),this.recordsArchive[e.id]?(p=this.recordsArchive[e.id],this.recordStack=p.recordStack?p.recordStack:[],this.redoRecordStack=p.redoRecordStack?p.redoRecordStack:[]):(this.recordStack=[],this.redoRecordStack=[]),this.stage.removeAllChildren(),this.stage.width=f+c,this.stage.height=l+c,a.graphics.beginFill("#ffffff").drawRect(0,0,f,l),a.graphics.beginStroke("#000000").setStrokeStyle(1).drawRect(-1,-1,f+1,l+1),this.stage.addChild(a),this.stage.addChild(u),this.layer=new n.Container,this.layer.mask=a,this.stage.addChild(this.layer),this.toolLayer=new n.Container,this.toolLayer.mask=a,this.stage.addChild(this.toolLayer),s[h.pageStyle].draw(u,f,l),this.initialDrawPage(),e.on("draw:item_added",function(e){e.invalidated=!0,e.draw(i.layer),i.stage.update()}),e.on("draw:item_removed",function(e){var t=i.layer.getChildIndex(e.stageObj);t>=0&&(e.displayIndex=t,i.layer.removeChildAt(e.displayIndex),e.invalidated=!0,i.stage.update())}),e.on("draw:item_changed",function(e){e.invalidated=!0,e.draw(i.layer),i.stage.update()})},setTool:function(t){if(this.tool===t)return;e("#tool_button").attr("data-icon",t).find(".ui-icon").addClass("ui-icon-"+t).removeClass("ui-icon-"+this.tool),this.tool=t,this.tools.currentTool=this.tools.getTool(t),this.tools.clearSelection()},createItemLayerStageObject:function(e){return a.createStageObject(e,this.layer)},createToolLayerStageObject:function(e){return a.createStageObject(e,this.toolLayer)},getItemsSelectionFromBounds:function(e){var n=null,i=[],s=this.page.get("items"),o=!0,u,a,l;for(u=0;u<s.length;u++)a=s.at(u),l=a.get("bounds"),r.doesRectContainRect(e,l)&&(i.push(a),n?this.tools.unionFirstWithSecond(n,l):n=t.clone(l),a instanceof f&&(o=!1));return t.isNull(n)?null:{bounds:n,items:i,isResizeable:o}},directAddItem:function(e){var t=this;this.page.addItem(e,function(){t.page.save(),t.toolLayer.removeAllChildren(),t.page.trigger("local:item_added",e)})},directDeleteItem:function(e){this.page.deleteItem(e),this.page.save(),this.page.trigger("local:item_removed",e)},directMoveItem:function(e,t,n){e.translate(t,n),this.page.save(),this.page.trigger("local:item_changed",e)},directResizeItem:function(e,t,n,r,i,s,o){e.scale(s,o,t,n),e.translate(r,i),this.page.save(),this.page.trigger("local:item_changed",e)},directReverseResizeItem:function(e,t,n,r,i,s,o){e.translate(r,i),e.scale(s,o,t,n),this.page.save(),this.page.trigger("local:item_changed",e)},callerWrapper:function(e,n){var r,i,s;r=t.tail(arguments,1);if(t.isArray(n)){i=n.length;for(s=0;s<i;s++)r[0]=n[s],e.apply(this,r)}else e.apply(this,r)},playRecord:function(e,n,r){this.redoRecordStack.length=0;var i=new o([this].concat(arguments));i.item=e,i.args=t.tail(arguments,3),i.play=n,i.rewind=r,i.play(),this.recordStack.push(i)},addItem:function(e){this.playRecord(e,o.prototype.addItem.play,o.prototype.addItem.rewind)},deleteItem:function(e){this.playRecord(e,o.prototype.deleteItem.play,o.prototype.deleteItem.rewind)},moveItem:function(e,t,n){this.playRecord(e,o.prototype.moveItem.play,o.prototype.moveItem.rewind,t,n)},resizeItem:function(e,t,n,r,i,s,u){this.playRecord(e,o.prototype.resizeItem.play,o.prototype.resizeItem.rewind,t,n,r,i,s,u)},undo:function(){if(this.recordStack.length>0){this.tools.clearSelection();var e=this.recordStack.pop();t.isArray(e.item)&&e.item.reverse(),e.rewind(),t.isArray(e.item)&&e.item.reverse(),this.redoRecordStack.push(e)}},redo:function(){if(this.redoRecordStack.length>0){this.tools.clearSelection();var e=this.redoRecordStack.pop();e.play(),this.recordStack.push(e)}},groupRecentRecords:function(e){var t,n,r,i;if(e>0){t=this.recordStack.pop(),e--,n=[],n.push(t.item);for(r=0;r<e;r++)i=this.recordStack.pop(),n.push(i.item);n.reverse(),t.item=n,this.recordStack.push(t)}}}),l}),define("papyrus-cast",["jquery","cast","papyrus"],function(e,t,n){console.log(e),console.log(t),console.log(n),e(function(){new n("canvas#papyrus"),t.receiver.logger.setLevelValue(0);var e=t.receiver.CastReceiverManager.getInstance();console.log("Starting Receiver Manager"),e.onReady=function(t){console.log("Received Ready event: "+JSON.stringify(t.data)),e.setApplicationState("Application status is ready...")},e.onSenderConnected=function(t){console.log("Received Sender Connected event: "+t.data),console.log(e.getSender(t.data).userAgent)},e.onSenderDisconnected=function(t){console.log("Received Sender Disconnected event: "+t.data),e.getSenders().length===0&&window.close()},e.onSystemVolumeChanged=function(e){console.log("Received System Volume Changed event: "+e.data.level+" "+e.data.muted)};var r=e.getCastMessageBus("urn:x-cast:com.steadfastinnovation.android.projectpapyrus");r.onMessage=function(e){console.log("Message ["+e.senderId+"]: "+e.data),r.send(e.senderId,e.data)},e.start({statusText:"Application is starting"}),console.log("Receiver Manager started")})});